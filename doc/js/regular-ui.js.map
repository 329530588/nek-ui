{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/js/index.js","node_modules/marked/lib/marked.js","node_modules/regularjs/src/Regular.js","node_modules/regularjs/src/config.js","node_modules/regularjs/src/directive/animation.js","node_modules/regularjs/src/directive/base.js","node_modules/regularjs/src/directive/event.js","node_modules/regularjs/src/directive/form.js","node_modules/regularjs/src/dom.js","node_modules/regularjs/src/env.js","node_modules/regularjs/src/group.js","node_modules/regularjs/src/helper/animate.js","node_modules/regularjs/src/helper/combine.js","node_modules/regularjs/src/helper/entities.js","node_modules/regularjs/src/helper/event.js","node_modules/regularjs/src/helper/extend.js","node_modules/regularjs/src/helper/filter.js","node_modules/regularjs/src/helper/parse.js","node_modules/regularjs/src/helper/shim.js","node_modules/regularjs/src/helper/watcher.js","node_modules/regularjs/src/index.js","node_modules/regularjs/src/module/timeout.js","node_modules/regularjs/src/parser/Lexer.js","node_modules/regularjs/src/parser/Parser.js","node_modules/regularjs/src/parser/node.js","node_modules/regularjs/src/util.js","node_modules/regularjs/src/walkers.js","node_modules/reqwest/reqwest.js","src/js/base/component.js","src/js/base/filter.js","src/js/base/request.js","src/js/base/sourceComponent.js","src/js/base/util.js","src/js/module/editor.html","src/js/module/editor.js","src/js/module/markEditor.html","src/js/module/markEditor.js","src/js/module/modal.html","src/js/module/modal.js","src/js/module/pager.html","src/js/module/pager.js","src/js/module/tab.html","src/js/module/tab.js","src/js/unit/calendar.html","src/js/unit/calendar.js","src/js/unit/checkEx.html","src/js/unit/checkEx.js","src/js/unit/checkExGroup.html","src/js/unit/checkExGroup.js","src/js/unit/checkGroup.html","src/js/unit/checkGroup.js","src/js/unit/datePicker.html","src/js/unit/datePicker.js","src/js/unit/dateTimePicker.html","src/js/unit/dateTimePicker.js","src/js/unit/dropDown.html","src/js/unit/dropDown.js","src/js/unit/gridView.html","src/js/unit/gridView.js","src/js/unit/inputEx.html","src/js/unit/inputEx.js","src/js/unit/listBox.html","src/js/unit/listBox.js","src/js/unit/listView.html","src/js/unit/listView.js","src/js/unit/notify.html","src/js/unit/notify.js","src/js/unit/progress.html","src/js/unit/progress.js","src/js/unit/radioExGroup.html","src/js/unit/radioExGroup.js","src/js/unit/radioGroup.html","src/js/unit/radioGroup.js","src/js/unit/selectEx.html","src/js/unit/selectEx.js","src/js/unit/suggest.html","src/js/unit/suggest.js","src/js/unit/tableView.html","src/js/unit/tableView.js","src/js/unit/timePicker.js","src/js/unit/treeSelect.html","src/js/unit/treeSelect.js","src/js/unit/treeView.html","src/js/unit/treeView.js","src/js/unit/treeViewList.html"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACxvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvkBA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3rBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACxfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxFA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnDA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5HA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1EA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3EA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxHA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3DA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7DA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/DA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxGA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5EA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrCA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvDA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5DA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzIA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5CA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7DA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9DA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClIA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxDA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9JA","file":"regular-ui.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * ------------------------------------------------------------\n * RGUI      Regular UI库\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\n'use strict';\n\nvar RGUI = {}\n\n/**\n * base\n */\nRGUI.Regular = require('regularjs');\nRGUI.Component = require('./base/component.js');\nRGUI._ = require('./base/util.js');\nRGUI.request = require('./base/request.js');\n\n/**\n * jsUnit\n */\n// 消息类\nRGUI.Notify = require('./unit/notify.js');\nRGUI.Progress = require('./unit/progress.js');\n\n// 效果类\nRGUI.DropDown = require('./unit/dropDown.js');\n\n// 表单类\nRGUI.InputEx = require('./unit/inputEx.js');\nRGUI.CheckEx = require('./unit/checkEx.js');\nRGUI.CheckGroup = require('./unit/checkGroup.js');\nRGUI.CheckExGroup = require('./unit/checkExGroup.js');\nRGUI.RadioGroup = require('./unit/radioGroup.js');\nRGUI.RadioExGroup = require('./unit/radioExGroup.js');\nRGUI.SelectEx = require('./unit/selectEx.js');\nRGUI.Suggest = require('./unit/suggest.js');\n\n// 数据类\nRGUI.ListBox = require('./unit/listBox.js');\nRGUI.ListView = require('./unit/listView.js');\nRGUI.GridView = require('./unit/gridView.js');\nRGUI.TreeView = require('./unit/treeView.js');\nRGUI.TableView = require('./unit/tableView.js');\nRGUI.TreeSelect = require('./unit/treeSelect.js');\n\n// 日期类\nRGUI.Calendar = require('./unit/calendar.js');\nRGUI.DatePicker = require('./unit/datePicker.js');\nRGUI.TimePicker = require('./unit/timePicker.js');\nRGUI.DateTimePicker = require('./unit/dateTimePicker.js');\n\n/**\n * jsModule\n */\n// 导航类\nRGUI.Tab = require('./module/tab.js');\nRGUI.Pager = require('./module/pager.js');\n\n// 窗口类\nRGUI.Modal = require('./module/modal.js');\n\n// 编辑器类\nRGUI.Editor = require('./module/editor.js');\nRGUI.MarkEditor = require('./module/markEditor.js');\n\nmodule.exports = window.RGUI = RGUI;","/**\n * marked - a markdown parser\n * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/chjj/marked\n */\n\n;(function() {\n\n/**\n * Block-Level Grammar\n */\n\nvar block = {\n  newline: /^\\n+/,\n  code: /^( {4}[^\\n]+\\n*)+/,\n  fences: noop,\n  hr: /^( *[-*_]){3,} *(?:\\n+|$)/,\n  heading: /^ *(#{1,6}) *([^\\n]+?) *#* *(?:\\n+|$)/,\n  nptable: noop,\n  lheading: /^([^\\n]+)\\n *(=|-){2,} *(?:\\n+|$)/,\n  blockquote: /^( *>[^\\n]+(\\n(?!def)[^\\n]+)*\\n*)+/,\n  list: /^( *)(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/,\n  html: /^ *(?:comment *(?:\\n|\\s*$)|closed *(?:\\n{2,}|\\s*$)|closing *(?:\\n{2,}|\\s*$))/,\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +[\"(]([^\\n]+)[\")])? *(?:\\n+|$)/,\n  table: noop,\n  paragraph: /^((?:[^\\n]+\\n?(?!hr|heading|lheading|blockquote|tag|def))+)\\n*/,\n  text: /^[^\\n]+/\n};\n\nblock.bullet = /(?:[*+-]|\\d+\\.)/;\nblock.item = /^( *)(bull) [^\\n]*(?:\\n(?!\\1bull )[^\\n]*)*/;\nblock.item = replace(block.item, 'gm')\n  (/bull/g, block.bullet)\n  ();\n\nblock.list = replace(block.list)\n  (/bull/g, block.bullet)\n  ('hr', '\\\\n+(?=\\\\1?(?:[-*_] *){3,}(?:\\\\n+|$))')\n  ('def', '\\\\n+(?=' + block.def.source + ')')\n  ();\n\nblock.blockquote = replace(block.blockquote)\n  ('def', block.def)\n  ();\n\nblock._tag = '(?!(?:'\n  + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code'\n  + '|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo'\n  + '|span|br|wbr|ins|del|img)\\\\b)\\\\w+(?!:/|[^\\\\w\\\\s@]*@)\\\\b';\n\nblock.html = replace(block.html)\n  ('comment', /<!--[\\s\\S]*?-->/)\n  ('closed', /<(tag)[\\s\\S]+?<\\/\\1>/)\n  ('closing', /<tag(?:\"[^\"]*\"|'[^']*'|[^'\">])*?>/)\n  (/tag/g, block._tag)\n  ();\n\nblock.paragraph = replace(block.paragraph)\n  ('hr', block.hr)\n  ('heading', block.heading)\n  ('lheading', block.lheading)\n  ('blockquote', block.blockquote)\n  ('tag', '<' + block._tag)\n  ('def', block.def)\n  ();\n\n/**\n * Normal Block Grammar\n */\n\nblock.normal = merge({}, block);\n\n/**\n * GFM Block Grammar\n */\n\nblock.gfm = merge({}, block.normal, {\n  fences: /^ *(`{3,}|~{3,}) *(\\S+)? *\\n([\\s\\S]+?)\\s*\\1 *(?:\\n+|$)/,\n  paragraph: /^/\n});\n\nblock.gfm.paragraph = replace(block.paragraph)\n  ('(?!', '(?!'\n    + block.gfm.fences.source.replace('\\\\1', '\\\\2') + '|'\n    + block.list.source.replace('\\\\1', '\\\\3') + '|')\n  ();\n\n/**\n * GFM + Tables Block Grammar\n */\n\nblock.tables = merge({}, block.gfm, {\n  nptable: /^ *(\\S.*\\|.*)\\n *([-:]+ *\\|[-| :]*)\\n((?:.*\\|.*(?:\\n|$))*)\\n*/,\n  table: /^ *\\|(.+)\\n *\\|( *[-:]+[-| :]*)\\n((?: *\\|.*(?:\\n|$))*)\\n*/\n});\n\n/**\n * Block Lexer\n */\n\nfunction Lexer(options) {\n  this.tokens = [];\n  this.tokens.links = {};\n  this.options = options || marked.defaults;\n  this.rules = block.normal;\n\n  if (this.options.gfm) {\n    if (this.options.tables) {\n      this.rules = block.tables;\n    } else {\n      this.rules = block.gfm;\n    }\n  }\n}\n\n/**\n * Expose Block Rules\n */\n\nLexer.rules = block;\n\n/**\n * Static Lex Method\n */\n\nLexer.lex = function(src, options) {\n  var lexer = new Lexer(options);\n  return lexer.lex(src);\n};\n\n/**\n * Preprocessing\n */\n\nLexer.prototype.lex = function(src) {\n  src = src\n    .replace(/\\r\\n|\\r/g, '\\n')\n    .replace(/\\t/g, '    ')\n    .replace(/\\u00a0/g, ' ')\n    .replace(/\\u2424/g, '\\n');\n\n  return this.token(src, true);\n};\n\n/**\n * Lexing\n */\n\nLexer.prototype.token = function(src, top, bq) {\n  var src = src.replace(/^ +$/gm, '')\n    , next\n    , loose\n    , cap\n    , bull\n    , b\n    , item\n    , space\n    , i\n    , l;\n\n  while (src) {\n    // newline\n    if (cap = this.rules.newline.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (cap[0].length > 1) {\n        this.tokens.push({\n          type: 'space'\n        });\n      }\n    }\n\n    // code\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      cap = cap[0].replace(/^ {4}/gm, '');\n      this.tokens.push({\n        type: 'code',\n        text: !this.options.pedantic\n          ? cap.replace(/\\n+$/, '')\n          : cap\n      });\n      continue;\n    }\n\n    // fences (gfm)\n    if (cap = this.rules.fences.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'code',\n        lang: cap[2],\n        text: cap[3]\n      });\n      continue;\n    }\n\n    // heading\n    if (cap = this.rules.heading.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'heading',\n        depth: cap[1].length,\n        text: cap[2]\n      });\n      continue;\n    }\n\n    // table no leading pipe (gfm)\n    if (top && (cap = this.rules.nptable.exec(src))) {\n      src = src.substring(cap[0].length);\n\n      item = {\n        type: 'table',\n        header: cap[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3].replace(/\\n$/, '').split('\\n')\n      };\n\n      for (i = 0; i < item.align.length; i++) {\n        if (/^ *-+: *$/.test(item.align[i])) {\n          item.align[i] = 'right';\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\n          item.align[i] = 'center';\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\n          item.align[i] = 'left';\n        } else {\n          item.align[i] = null;\n        }\n      }\n\n      for (i = 0; i < item.cells.length; i++) {\n        item.cells[i] = item.cells[i].split(/ *\\| */);\n      }\n\n      this.tokens.push(item);\n\n      continue;\n    }\n\n    // lheading\n    if (cap = this.rules.lheading.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'heading',\n        depth: cap[2] === '=' ? 1 : 2,\n        text: cap[1]\n      });\n      continue;\n    }\n\n    // hr\n    if (cap = this.rules.hr.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'hr'\n      });\n      continue;\n    }\n\n    // blockquote\n    if (cap = this.rules.blockquote.exec(src)) {\n      src = src.substring(cap[0].length);\n\n      this.tokens.push({\n        type: 'blockquote_start'\n      });\n\n      cap = cap[0].replace(/^ *> ?/gm, '');\n\n      // Pass `top` to keep the current\n      // \"toplevel\" state. This is exactly\n      // how markdown.pl works.\n      this.token(cap, top, true);\n\n      this.tokens.push({\n        type: 'blockquote_end'\n      });\n\n      continue;\n    }\n\n    // list\n    if (cap = this.rules.list.exec(src)) {\n      src = src.substring(cap[0].length);\n      bull = cap[2];\n\n      this.tokens.push({\n        type: 'list_start',\n        ordered: bull.length > 1\n      });\n\n      // Get each top-level item.\n      cap = cap[0].match(this.rules.item);\n\n      next = false;\n      l = cap.length;\n      i = 0;\n\n      for (; i < l; i++) {\n        item = cap[i];\n\n        // Remove the list item's bullet\n        // so it is seen as the next token.\n        space = item.length;\n        item = item.replace(/^ *([*+-]|\\d+\\.) +/, '');\n\n        // Outdent whatever the\n        // list item contains. Hacky.\n        if (~item.indexOf('\\n ')) {\n          space -= item.length;\n          item = !this.options.pedantic\n            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\n            : item.replace(/^ {1,4}/gm, '');\n        }\n\n        // Determine whether the next list item belongs here.\n        // Backpedal if it does not belong in this list.\n        if (this.options.smartLists && i !== l - 1) {\n          b = block.bullet.exec(cap[i + 1])[0];\n          if (bull !== b && !(bull.length > 1 && b.length > 1)) {\n            src = cap.slice(i + 1).join('\\n') + src;\n            i = l - 1;\n          }\n        }\n\n        // Determine whether item is loose or not.\n        // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n        // for discount behavior.\n        loose = next || /\\n\\n(?!\\s*$)/.test(item);\n        if (i !== l - 1) {\n          next = item.charAt(item.length - 1) === '\\n';\n          if (!loose) loose = next;\n        }\n\n        this.tokens.push({\n          type: loose\n            ? 'loose_item_start'\n            : 'list_item_start'\n        });\n\n        // Recurse.\n        this.token(item, false, bq);\n\n        this.tokens.push({\n          type: 'list_item_end'\n        });\n      }\n\n      this.tokens.push({\n        type: 'list_end'\n      });\n\n      continue;\n    }\n\n    // html\n    if (cap = this.rules.html.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: this.options.sanitize\n          ? 'paragraph'\n          : 'html',\n        pre: cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style',\n        text: cap[0]\n      });\n      continue;\n    }\n\n    // def\n    if ((!bq && top) && (cap = this.rules.def.exec(src))) {\n      src = src.substring(cap[0].length);\n      this.tokens.links[cap[1].toLowerCase()] = {\n        href: cap[2],\n        title: cap[3]\n      };\n      continue;\n    }\n\n    // table (gfm)\n    if (top && (cap = this.rules.table.exec(src))) {\n      src = src.substring(cap[0].length);\n\n      item = {\n        type: 'table',\n        header: cap[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3].replace(/(?: *\\| *)?\\n$/, '').split('\\n')\n      };\n\n      for (i = 0; i < item.align.length; i++) {\n        if (/^ *-+: *$/.test(item.align[i])) {\n          item.align[i] = 'right';\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\n          item.align[i] = 'center';\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\n          item.align[i] = 'left';\n        } else {\n          item.align[i] = null;\n        }\n      }\n\n      for (i = 0; i < item.cells.length; i++) {\n        item.cells[i] = item.cells[i]\n          .replace(/^ *\\| *| *\\| *$/g, '')\n          .split(/ *\\| */);\n      }\n\n      this.tokens.push(item);\n\n      continue;\n    }\n\n    // top-level paragraph\n    if (top && (cap = this.rules.paragraph.exec(src))) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'paragraph',\n        text: cap[1].charAt(cap[1].length - 1) === '\\n'\n          ? cap[1].slice(0, -1)\n          : cap[1]\n      });\n      continue;\n    }\n\n    // text\n    if (cap = this.rules.text.exec(src)) {\n      // Top-level should never reach here.\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'text',\n        text: cap[0]\n      });\n      continue;\n    }\n\n    if (src) {\n      throw new\n        Error('Infinite loop on byte: ' + src.charCodeAt(0));\n    }\n  }\n\n  return this.tokens;\n};\n\n/**\n * Inline-Level Grammar\n */\n\nvar inline = {\n  escape: /^\\\\([\\\\`*{}\\[\\]()#+\\-.!_>])/,\n  autolink: /^<([^ >]+(@|:\\/)[^ >]+)>/,\n  url: noop,\n  tag: /^<!--[\\s\\S]*?-->|^<\\/?\\w+(?:\"[^\"]*\"|'[^']*'|[^'\">])*?>/,\n  link: /^!?\\[(inside)\\]\\(href\\)/,\n  reflink: /^!?\\[(inside)\\]\\s*\\[([^\\]]*)\\]/,\n  nolink: /^!?\\[((?:\\[[^\\]]*\\]|[^\\[\\]])*)\\]/,\n  strong: /^__([\\s\\S]+?)__(?!_)|^\\*\\*([\\s\\S]+?)\\*\\*(?!\\*)/,\n  em: /^\\b_((?:__|[\\s\\S])+?)_\\b|^\\*((?:\\*\\*|[\\s\\S])+?)\\*(?!\\*)/,\n  code: /^(`+)\\s*([\\s\\S]*?[^`])\\s*\\1(?!`)/,\n  br: /^ {2,}\\n(?!\\s*$)/,\n  del: noop,\n  text: /^[\\s\\S]+?(?=[\\\\<!\\[_*`]| {2,}\\n|$)/\n};\n\ninline._inside = /(?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*/;\ninline._href = /\\s*<?([\\s\\S]*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*/;\n\ninline.link = replace(inline.link)\n  ('inside', inline._inside)\n  ('href', inline._href)\n  ();\n\ninline.reflink = replace(inline.reflink)\n  ('inside', inline._inside)\n  ();\n\n/**\n * Normal Inline Grammar\n */\n\ninline.normal = merge({}, inline);\n\n/**\n * Pedantic Inline Grammar\n */\n\ninline.pedantic = merge({}, inline.normal, {\n  strong: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n  em: /^_(?=\\S)([\\s\\S]*?\\S)_(?!_)|^\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)/\n});\n\n/**\n * GFM Inline Grammar\n */\n\ninline.gfm = merge({}, inline.normal, {\n  escape: replace(inline.escape)('])', '~|])')(),\n  url: /^(https?:\\/\\/[^\\s<]+[^<.,:;\"')\\]\\s])/,\n  del: /^~~(?=\\S)([\\s\\S]*?\\S)~~/,\n  text: replace(inline.text)\n    (']|', '~]|')\n    ('|', '|https?://|')\n    ()\n});\n\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\ninline.breaks = merge({}, inline.gfm, {\n  br: replace(inline.br)('{2,}', '*')(),\n  text: replace(inline.gfm.text)('{2,}', '*')()\n});\n\n/**\n * Inline Lexer & Compiler\n */\n\nfunction InlineLexer(links, options) {\n  this.options = options || marked.defaults;\n  this.links = links;\n  this.rules = inline.normal;\n  this.renderer = this.options.renderer || new Renderer;\n  this.renderer.options = this.options;\n\n  if (!this.links) {\n    throw new\n      Error('Tokens array requires a `links` property.');\n  }\n\n  if (this.options.gfm) {\n    if (this.options.breaks) {\n      this.rules = inline.breaks;\n    } else {\n      this.rules = inline.gfm;\n    }\n  } else if (this.options.pedantic) {\n    this.rules = inline.pedantic;\n  }\n}\n\n/**\n * Expose Inline Rules\n */\n\nInlineLexer.rules = inline;\n\n/**\n * Static Lexing/Compiling Method\n */\n\nInlineLexer.output = function(src, links, options) {\n  var inline = new InlineLexer(links, options);\n  return inline.output(src);\n};\n\n/**\n * Lexing/Compiling\n */\n\nInlineLexer.prototype.output = function(src) {\n  var out = ''\n    , link\n    , text\n    , href\n    , cap;\n\n  while (src) {\n    // escape\n    if (cap = this.rules.escape.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += cap[1];\n      continue;\n    }\n\n    // autolink\n    if (cap = this.rules.autolink.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (cap[2] === '@') {\n        text = cap[1].charAt(6) === ':'\n          ? this.mangle(cap[1].substring(7))\n          : this.mangle(cap[1]);\n        href = this.mangle('mailto:') + text;\n      } else {\n        text = escape(cap[1]);\n        href = text;\n      }\n      out += this.renderer.link(href, null, text);\n      continue;\n    }\n\n    // url (gfm)\n    if (!this.inLink && (cap = this.rules.url.exec(src))) {\n      src = src.substring(cap[0].length);\n      text = escape(cap[1]);\n      href = text;\n      out += this.renderer.link(href, null, text);\n      continue;\n    }\n\n    // tag\n    if (cap = this.rules.tag.exec(src)) {\n      if (!this.inLink && /^<a /i.test(cap[0])) {\n        this.inLink = true;\n      } else if (this.inLink && /^<\\/a>/i.test(cap[0])) {\n        this.inLink = false;\n      }\n      src = src.substring(cap[0].length);\n      out += this.options.sanitize\n        ? escape(cap[0])\n        : cap[0];\n      continue;\n    }\n\n    // link\n    if (cap = this.rules.link.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.inLink = true;\n      out += this.outputLink(cap, {\n        href: cap[2],\n        title: cap[3]\n      });\n      this.inLink = false;\n      continue;\n    }\n\n    // reflink, nolink\n    if ((cap = this.rules.reflink.exec(src))\n        || (cap = this.rules.nolink.exec(src))) {\n      src = src.substring(cap[0].length);\n      link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n      link = this.links[link.toLowerCase()];\n      if (!link || !link.href) {\n        out += cap[0].charAt(0);\n        src = cap[0].substring(1) + src;\n        continue;\n      }\n      this.inLink = true;\n      out += this.outputLink(cap, link);\n      this.inLink = false;\n      continue;\n    }\n\n    // strong\n    if (cap = this.rules.strong.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.strong(this.output(cap[2] || cap[1]));\n      continue;\n    }\n\n    // em\n    if (cap = this.rules.em.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.em(this.output(cap[2] || cap[1]));\n      continue;\n    }\n\n    // code\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.codespan(escape(cap[2], true));\n      continue;\n    }\n\n    // br\n    if (cap = this.rules.br.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.br();\n      continue;\n    }\n\n    // del (gfm)\n    if (cap = this.rules.del.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.del(this.output(cap[1]));\n      continue;\n    }\n\n    // text\n    if (cap = this.rules.text.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += escape(this.smartypants(cap[0]));\n      continue;\n    }\n\n    if (src) {\n      throw new\n        Error('Infinite loop on byte: ' + src.charCodeAt(0));\n    }\n  }\n\n  return out;\n};\n\n/**\n * Compile Link\n */\n\nInlineLexer.prototype.outputLink = function(cap, link) {\n  var href = escape(link.href)\n    , title = link.title ? escape(link.title) : null;\n\n  return cap[0].charAt(0) !== '!'\n    ? this.renderer.link(href, title, this.output(cap[1]))\n    : this.renderer.image(href, title, escape(cap[1]));\n};\n\n/**\n * Smartypants Transformations\n */\n\nInlineLexer.prototype.smartypants = function(text) {\n  if (!this.options.smartypants) return text;\n  return text\n    // em-dashes\n    .replace(/--/g, '\\u2014')\n    // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, '$1\\u2018')\n    // closing singles & apostrophes\n    .replace(/'/g, '\\u2019')\n    // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, '$1\\u201c')\n    // closing doubles\n    .replace(/\"/g, '\\u201d')\n    // ellipses\n    .replace(/\\.{3}/g, '\\u2026');\n};\n\n/**\n * Mangle Links\n */\n\nInlineLexer.prototype.mangle = function(text) {\n  var out = ''\n    , l = text.length\n    , i = 0\n    , ch;\n\n  for (; i < l; i++) {\n    ch = text.charCodeAt(i);\n    if (Math.random() > 0.5) {\n      ch = 'x' + ch.toString(16);\n    }\n    out += '&#' + ch + ';';\n  }\n\n  return out;\n};\n\n/**\n * Renderer\n */\n\nfunction Renderer(options) {\n  this.options = options || {};\n}\n\nRenderer.prototype.code = function(code, lang, escaped) {\n  if (this.options.highlight) {\n    var out = this.options.highlight(code, lang);\n    if (out != null && out !== code) {\n      escaped = true;\n      code = out;\n    }\n  }\n\n  if (!lang) {\n    return '<pre><code>'\n      + (escaped ? code : escape(code, true))\n      + '\\n</code></pre>';\n  }\n\n  return '<pre><code class=\"'\n    + this.options.langPrefix\n    + escape(lang, true)\n    + '\">'\n    + (escaped ? code : escape(code, true))\n    + '\\n</code></pre>\\n';\n};\n\nRenderer.prototype.blockquote = function(quote) {\n  return '<blockquote>\\n' + quote + '</blockquote>\\n';\n};\n\nRenderer.prototype.html = function(html) {\n  return html;\n};\n\nRenderer.prototype.heading = function(text, level, raw) {\n  return '<h'\n    + level\n    + ' id=\"'\n    + this.options.headerPrefix\n    + raw.toLowerCase().replace(/[^\\w]+/g, '-')\n    + '\">'\n    + text\n    + '</h'\n    + level\n    + '>\\n';\n};\n\nRenderer.prototype.hr = function() {\n  return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n};\n\nRenderer.prototype.list = function(body, ordered) {\n  var type = ordered ? 'ol' : 'ul';\n  return '<' + type + '>\\n' + body + '</' + type + '>\\n';\n};\n\nRenderer.prototype.listitem = function(text) {\n  return '<li>' + text + '</li>\\n';\n};\n\nRenderer.prototype.paragraph = function(text) {\n  return '<p>' + text + '</p>\\n';\n};\n\nRenderer.prototype.table = function(header, body) {\n  return '<table>\\n'\n    + '<thead>\\n'\n    + header\n    + '</thead>\\n'\n    + '<tbody>\\n'\n    + body\n    + '</tbody>\\n'\n    + '</table>\\n';\n};\n\nRenderer.prototype.tablerow = function(content) {\n  return '<tr>\\n' + content + '</tr>\\n';\n};\n\nRenderer.prototype.tablecell = function(content, flags) {\n  var type = flags.header ? 'th' : 'td';\n  var tag = flags.align\n    ? '<' + type + ' style=\"text-align:' + flags.align + '\">'\n    : '<' + type + '>';\n  return tag + content + '</' + type + '>\\n';\n};\n\n// span level renderer\nRenderer.prototype.strong = function(text) {\n  return '<strong>' + text + '</strong>';\n};\n\nRenderer.prototype.em = function(text) {\n  return '<em>' + text + '</em>';\n};\n\nRenderer.prototype.codespan = function(text) {\n  return '<code>' + text + '</code>';\n};\n\nRenderer.prototype.br = function() {\n  return this.options.xhtml ? '<br/>' : '<br>';\n};\n\nRenderer.prototype.del = function(text) {\n  return '<del>' + text + '</del>';\n};\n\nRenderer.prototype.link = function(href, title, text) {\n  if (this.options.sanitize) {\n    try {\n      var prot = decodeURIComponent(unescape(href))\n        .replace(/[^\\w:]/g, '')\n        .toLowerCase();\n    } catch (e) {\n      return '';\n    }\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0) {\n      return '';\n    }\n  }\n  var out = '<a href=\"' + href + '\"';\n  if (title) {\n    out += ' title=\"' + title + '\"';\n  }\n  out += '>' + text + '</a>';\n  return out;\n};\n\nRenderer.prototype.image = function(href, title, text) {\n  var out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n  if (title) {\n    out += ' title=\"' + title + '\"';\n  }\n  out += this.options.xhtml ? '/>' : '>';\n  return out;\n};\n\n/**\n * Parsing & Compiling\n */\n\nfunction Parser(options) {\n  this.tokens = [];\n  this.token = null;\n  this.options = options || marked.defaults;\n  this.options.renderer = this.options.renderer || new Renderer;\n  this.renderer = this.options.renderer;\n  this.renderer.options = this.options;\n}\n\n/**\n * Static Parse Method\n */\n\nParser.parse = function(src, options, renderer) {\n  var parser = new Parser(options, renderer);\n  return parser.parse(src);\n};\n\n/**\n * Parse Loop\n */\n\nParser.prototype.parse = function(src) {\n  this.inline = new InlineLexer(src.links, this.options, this.renderer);\n  this.tokens = src.reverse();\n\n  var out = '';\n  while (this.next()) {\n    out += this.tok();\n  }\n\n  return out;\n};\n\n/**\n * Next Token\n */\n\nParser.prototype.next = function() {\n  return this.token = this.tokens.pop();\n};\n\n/**\n * Preview Next Token\n */\n\nParser.prototype.peek = function() {\n  return this.tokens[this.tokens.length - 1] || 0;\n};\n\n/**\n * Parse Text Tokens\n */\n\nParser.prototype.parseText = function() {\n  var body = this.token.text;\n\n  while (this.peek().type === 'text') {\n    body += '\\n' + this.next().text;\n  }\n\n  return this.inline.output(body);\n};\n\n/**\n * Parse Current Token\n */\n\nParser.prototype.tok = function() {\n  switch (this.token.type) {\n    case 'space': {\n      return '';\n    }\n    case 'hr': {\n      return this.renderer.hr();\n    }\n    case 'heading': {\n      return this.renderer.heading(\n        this.inline.output(this.token.text),\n        this.token.depth,\n        this.token.text);\n    }\n    case 'code': {\n      return this.renderer.code(this.token.text,\n        this.token.lang,\n        this.token.escaped);\n    }\n    case 'table': {\n      var header = ''\n        , body = ''\n        , i\n        , row\n        , cell\n        , flags\n        , j;\n\n      // header\n      cell = '';\n      for (i = 0; i < this.token.header.length; i++) {\n        flags = { header: true, align: this.token.align[i] };\n        cell += this.renderer.tablecell(\n          this.inline.output(this.token.header[i]),\n          { header: true, align: this.token.align[i] }\n        );\n      }\n      header += this.renderer.tablerow(cell);\n\n      for (i = 0; i < this.token.cells.length; i++) {\n        row = this.token.cells[i];\n\n        cell = '';\n        for (j = 0; j < row.length; j++) {\n          cell += this.renderer.tablecell(\n            this.inline.output(row[j]),\n            { header: false, align: this.token.align[j] }\n          );\n        }\n\n        body += this.renderer.tablerow(cell);\n      }\n      return this.renderer.table(header, body);\n    }\n    case 'blockquote_start': {\n      var body = '';\n\n      while (this.next().type !== 'blockquote_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.blockquote(body);\n    }\n    case 'list_start': {\n      var body = ''\n        , ordered = this.token.ordered;\n\n      while (this.next().type !== 'list_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.list(body, ordered);\n    }\n    case 'list_item_start': {\n      var body = '';\n\n      while (this.next().type !== 'list_item_end') {\n        body += this.token.type === 'text'\n          ? this.parseText()\n          : this.tok();\n      }\n\n      return this.renderer.listitem(body);\n    }\n    case 'loose_item_start': {\n      var body = '';\n\n      while (this.next().type !== 'list_item_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.listitem(body);\n    }\n    case 'html': {\n      var html = !this.token.pre && !this.options.pedantic\n        ? this.inline.output(this.token.text)\n        : this.token.text;\n      return this.renderer.html(html);\n    }\n    case 'paragraph': {\n      return this.renderer.paragraph(this.inline.output(this.token.text));\n    }\n    case 'text': {\n      return this.renderer.paragraph(this.parseText());\n    }\n  }\n};\n\n/**\n * Helpers\n */\n\nfunction escape(html, encode) {\n  return html\n    .replace(!encode ? /&(?!#?\\w+;)/g : /&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#39;');\n}\n\nfunction unescape(html) {\n  return html.replace(/&([#\\w]+);/g, function(_, n) {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nfunction replace(regex, opt) {\n  regex = regex.source;\n  opt = opt || '';\n  return function self(name, val) {\n    if (!name) return new RegExp(regex, opt);\n    val = val.source || val;\n    val = val.replace(/(^|[^\\[])\\^/g, '$1');\n    regex = regex.replace(name, val);\n    return self;\n  };\n}\n\nfunction noop() {}\nnoop.exec = noop;\n\nfunction merge(obj) {\n  var i = 1\n    , target\n    , key;\n\n  for (; i < arguments.length; i++) {\n    target = arguments[i];\n    for (key in target) {\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n}\n\n\n/**\n * Marked\n */\n\nfunction marked(src, opt, callback) {\n  if (callback || typeof opt === 'function') {\n    if (!callback) {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n\n    var highlight = opt.highlight\n      , tokens\n      , pending\n      , i = 0;\n\n    try {\n      tokens = Lexer.lex(src, opt)\n    } catch (e) {\n      return callback(e);\n    }\n\n    pending = tokens.length;\n\n    var done = function(err) {\n      if (err) {\n        opt.highlight = highlight;\n        return callback(err);\n      }\n\n      var out;\n\n      try {\n        out = Parser.parse(tokens, opt);\n      } catch (e) {\n        err = e;\n      }\n\n      opt.highlight = highlight;\n\n      return err\n        ? callback(err)\n        : callback(null, out);\n    };\n\n    if (!highlight || highlight.length < 3) {\n      return done();\n    }\n\n    delete opt.highlight;\n\n    if (!pending) return done();\n\n    for (; i < tokens.length; i++) {\n      (function(token) {\n        if (token.type !== 'code') {\n          return --pending || done();\n        }\n        return highlight(token.text, token.lang, function(err, code) {\n          if (err) return done(err);\n          if (code == null || code === token.text) {\n            return --pending || done();\n          }\n          token.text = code;\n          token.escaped = true;\n          --pending || done();\n        });\n      })(tokens[i]);\n    }\n\n    return;\n  }\n  try {\n    if (opt) opt = merge({}, marked.defaults, opt);\n    return Parser.parse(Lexer.lex(src, opt), opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/chjj/marked.';\n    if ((opt || marked.defaults).silent) {\n      return '<p>An error occured:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  merge(marked.defaults, opt);\n  return marked;\n};\n\nmarked.defaults = {\n  gfm: true,\n  tables: true,\n  breaks: false,\n  pedantic: false,\n  sanitize: false,\n  smartLists: false,\n  silent: false,\n  highlight: null,\n  langPrefix: 'lang-',\n  smartypants: false,\n  headerPrefix: '',\n  renderer: new Renderer,\n  xhtml: false\n};\n\n/**\n * Expose\n */\n\nmarked.Parser = Parser;\nmarked.parser = Parser.parse;\n\nmarked.Renderer = Renderer;\n\nmarked.Lexer = Lexer;\nmarked.lexer = Lexer.lex;\n\nmarked.InlineLexer = InlineLexer;\nmarked.inlineLexer = InlineLexer.output;\n\nmarked.parse = marked;\n\nif (typeof module !== 'undefined' && typeof exports === 'object') {\n  module.exports = marked;\n} else if (typeof define === 'function' && define.amd) {\n  define(function() { return marked; });\n} else {\n  this.marked = marked;\n}\n\n}).call(function() {\n  return this || (typeof window !== 'undefined' ? window : global);\n}());\n","\nvar env = require('./env.js');\nvar Lexer = require(\"./parser/Lexer.js\");\nvar Parser = require(\"./parser/Parser.js\");\nvar config = require(\"./config.js\");\nvar _ = require('./util');\nvar extend = require('./helper/extend.js');\nif(env.browser){\nvar combine = require('./helper/combine.js');\nvar dom = require(\"./dom.js\");\nvar walkers = require('./walkers.js');\nvar Group = require('./group.js');\n}\nvar events = require('./helper/event.js');\nvar Watcher = require('./helper/watcher.js');\nvar parse = require('./helper/parse.js');\nvar filter = require('./helper/filter.js');\nvar doc = typeof document==='undefined'? {} : document;\n\n\n/**\n* `Regular` is regularjs's NameSpace and BaseClass. Every Component is inherited from it\n* \n* @class Regular\n* @module Regular\n* @constructor\n* @param {Object} options specification of the component\n*/\nvar Regular = function(options){\n  var prevRunning = env.isRunning;\n  env.isRunning = true;\n  var node, template;\n\n  options = options || {};\n  options.data = options.data || {};\n  options.computed = options.computed || {};\n  options.events = options.events || {};\n  if(this.data) _.extend(options.data, this.data);\n  if(this.computed) _.extend(options.computed, this.computed);\n  if(this.events) _.extend(options.events, this.events);\n\n  _.extend(this, options, true);\n  if(this.$parent){\n     this.$parent._append(this);\n  }\n  this._children = [];\n  this.$refs = {};\n\n  template = this.template;\n\n  // template is a string (len < 16). we will find it container first\n  if((typeof template === 'string' && template.length < 16) && (node = dom.find(template))) {\n    template = node.innerHTML;\n  }\n  // if template is a xml\n  if(template && template.nodeType) template = template.innerHTML;\n  if(typeof template === 'string') this.template = new Parser(template).parse();\n\n  this.computed = handleComputed(this.computed);\n  this.$root = this.$root || this;\n  // if have events\n  if(this.events){\n    this.$on(this.events);\n  }\n  if(this.$body){\n    this._getTransclude = function(){\n      var ctx = this.$parent || this;\n      if(this.$body) return ctx.$compile(this.$body, {namespace: options.namespace, outer: this, extra: options.extra})\n    }\n  }\n  this.$emit(\"$config\");\n  this.config && this.config(this.data);\n  // handle computed\n  if(template){\n    this.group = this.$compile(this.template, {namespace: options.namespace});\n    combine.node(this);\n  }\n\n\n  if(!this.$parent) this.$update();\n  this.$ready = true;\n  this.$emit(\"$init\");\n  if( this.init ) this.init(this.data);\n\n  // @TODO: remove, maybe , there is no need to update after init; \n  // if(this.$root === this) this.$update();\n  env.isRunning = prevRunning;\n\n  // children is not required;\n}\n\n\nwalkers && (walkers.Regular = Regular);\n\n\n// description\n// -------------------------\n// 1. Regular and derived Class use same filter\n_.extend(Regular, {\n  // private data stuff\n  _directives: { __regexp__:[] },\n  _plugins: {},\n  _protoInheritCache: [ 'directive', 'use'] ,\n  __after__: function(supr, o) {\n\n    var template;\n    this.__after__ = supr.__after__;\n\n    // use name make the component global.\n    if(o.name) Regular.component(o.name, this);\n    // this.prototype.template = dom.initTemplate(o)\n    if(template = o.template){\n      var node, name;\n      if( typeof template === 'string' && template.length < 16 && ( node = dom.find( template )) ){\n        template = node.innerHTML;\n        if(name = dom.attr(node, 'name')) Regular.component(name, this);\n      }\n\n      if(template.nodeType) template = template.innerHTML;\n\n      if(typeof template === 'string'){\n        this.prototype.template = new Parser(template).parse();\n      }\n    }\n\n    if(o.computed) this.prototype.computed = handleComputed(o.computed);\n    // inherit directive and other config from supr\n    Regular._inheritConfig(this, supr);\n\n  },\n  /**\n   * Define a directive\n   *\n   * @method directive\n   * @return {Object} Copy of ...\n   */  \n  directive: function(name, cfg){\n\n    if(_.typeOf(name) === \"object\"){\n      for(var k in name){\n        if(name.hasOwnProperty(k)) this.directive(k, name[k]);\n      }\n      return this;\n    }\n    var type = _.typeOf(name);\n    var directives = this._directives, directive;\n    if(cfg == null){\n      if( type === \"string\" && (directive = directives[name]) ) return directive;\n      else{\n        var regexp = directives.__regexp__;\n        for(var i = 0, len = regexp.length; i < len ; i++){\n          directive = regexp[i];\n          var test = directive.regexp.test(name);\n          if(test) return directive;\n        }\n      }\n      return undefined;\n    }\n    if(typeof cfg === 'function') cfg = { link: cfg } \n    if(type === 'string') directives[name] = cfg;\n    else if(type === 'regexp'){\n      cfg.regexp = name;\n      directives.__regexp__.push(cfg)\n    }\n    return this\n  },\n  plugin: function(name, fn){\n    var plugins = this._plugins;\n    if(fn == null) return plugins[name];\n    plugins[name] = fn;\n    return this;\n  },\n  use: function(fn){\n    if(typeof fn === \"string\") fn = Regular.plugin(fn);\n    if(typeof fn !== \"function\") return this;\n    fn(this, Regular);\n    return this;\n  },\n  // config the Regularjs's global\n  config: function(name, value){\n    var needGenLexer = false;\n    if(typeof name === \"object\"){\n      for(var i in name){\n        // if you config\n        if( i ===\"END\" || i==='BEGIN' )  needGenLexer = true;\n        config[i] = name[i];\n      }\n    }\n    if(needGenLexer) Lexer.setup();\n  },\n  expression: parse.expression,\n  Parser: Parser,\n  Lexer: Lexer,\n  _addProtoInheritCache: function(name, transform){\n    if( Array.isArray( name ) ){\n      return name.forEach(Regular._addProtoInheritCache);\n    }\n    var cacheKey = \"_\" + name + \"s\"\n    Regular._protoInheritCache.push(name)\n    Regular[cacheKey] = {};\n    if(Regular[name]) return;\n    Regular[name] = function(key, cfg){\n      var cache = this[cacheKey];\n\n      if(typeof key === \"object\"){\n        for(var i in key){\n          if(key.hasOwnProperty(i)) this[name](i, key[i]);\n        }\n        return this;\n      }\n      if(cfg == null) return cache[key];\n      cache[key] = transform? transform(cfg) : cfg;\n      return this;\n    }\n  },\n  _inheritConfig: function(self, supr){\n\n    // prototype inherit some Regular property\n    // so every Component will have own container to serve directive, filter etc..\n    var defs = Regular._protoInheritCache;\n    var keys = _.slice(defs);\n    keys.forEach(function(key){\n      self[key] = supr[key];\n      var cacheKey = '_' + key + 's';\n      if(supr[cacheKey]) self[cacheKey] = _.createObject(supr[cacheKey]);\n    })\n    return self;\n  }\n\n});\n\nextend(Regular);\n\nRegular._addProtoInheritCache(\"component\")\n\nRegular._addProtoInheritCache(\"filter\", function(cfg){\n  return typeof cfg === \"function\"? {get: cfg}: cfg;\n})\n\n\nevents.mixTo(Regular);\nWatcher.mixTo(Regular);\n\nRegular.implement({\n  init: function(){},\n  config: function(){},\n  destroy: function(){\n    // destroy event wont propgation;\n    this.$emit(\"$destroy\");\n    this.group && this.group.destroy(true);\n    this.group = null;\n    this.parentNode = null;\n    this._watchers = null;\n    this._children = [];\n    var parent = this.$parent;\n    if(parent){\n      var index = parent._children.indexOf(this);\n      parent._children.splice(index,1);\n    }\n    this.$parent = null;\n    this.$root = null;\n    this._handles = null;\n    this.$refs = null;\n  },\n\n  /**\n   * compile a block ast ; return a group;\n   * @param  {Array} parsed ast\n   * @param  {[type]} record\n   * @return {[type]}\n   */\n  $compile: function(ast, options){\n    options = options || {};\n    if(typeof ast === 'string'){\n      ast = new Parser(ast).parse()\n    }\n    var preExt = this.__ext__,\n      record = options.record, \n      records;\n\n    if(options.extra) this.__ext__ = options.extra;\n\n    if(record) this._record();\n    var group = this._walk(ast, options);\n    if(record){\n      records = this._release();\n      var self = this;\n      if(records.length){\n        // auto destroy all wather;\n        group.ondestroy = function(){ self.$unwatch(records); }\n      }\n    }\n    if(options.extra) this.__ext__ = preExt;\n    return group;\n  },\n\n\n  /**\n   * create two-way binding with another component;\n   * *warn*: \n   *   expr1 and expr2 must can operate set&get, for example: the 'a.b' or 'a[b + 1]' is set-able, but 'a.b + 1' is not, \n   *   beacuse Regular dont know how to inverse set through the expression;\n   *   \n   *   if before $bind, two component's state is not sync, the component(passed param) will sync with the called component;\n   *\n   * *example: *\n   *\n   * ```javascript\n   * // in this example, we need to link two pager component\n   * var pager = new Pager({}) // pager compoennt\n   * var pager2 = new Pager({}) // another pager component\n   * pager.$bind(pager2, 'current'); // two way bind throw two component\n   * pager.$bind(pager2, 'total');   // \n   * // or just\n   * pager.$bind(pager2, {\"current\": \"current\", \"total\": \"total\"}) \n   * ```\n   * \n   * @param  {Regular} component the\n   * @param  {String|Expression} expr1     required, self expr1 to operate binding\n   * @param  {String|Expression} expr2     optional, other component's expr to bind with, if not passed, the expr2 will use the expr1;\n   * @return          this;\n   */\n  $bind: function(component, expr1, expr2){\n    var type = _.typeOf(expr1);\n    if( expr1.type === 'expression' || type === 'string' ){\n      this._bind(component, expr1, expr2)\n    }else if( type === \"array\" ){ // multiply same path binding through array\n      for(var i = 0, len = expr1.length; i < len; i++){\n        this._bind(component, expr1[i]);\n      }\n    }else if(type === \"object\"){\n      for(var i in expr1) if(expr1.hasOwnProperty(i)){\n        this._bind(component, i, expr1[i]);\n      }\n    }\n    // digest\n    component.$update();\n    return this;\n  },\n  /**\n   * unbind one component( see $bind also)\n   *\n   * unbind will unbind all relation between two component\n   * \n   * @param  {Regular} component [description]\n   * @return {This}    this\n   */\n  $unbind: function(){\n    // todo\n  },\n  $inject: function(node, position, options){\n    var fragment = combine.node(this);\n\n    if(node === false) {\n      if(!this._fragContainer)  this._fragContainer = dom.fragment();\n      return this.$inject(this._fragContainer);\n    }\n    if(typeof node === 'string') node = dom.find(node);\n    if(!node) throw 'injected node is not found';\n    if(!fragment) return this;\n    dom.inject(fragment, node, position);\n    this.$emit(\"$inject\", node);\n    this.parentNode = Array.isArray(fragment)? fragment[0].parentNode: fragment.parentNode;\n    return this;\n  },\n  $mute: function(isMute){\n\n    isMute = !!isMute;\n\n    var needupdate = isMute === false && this._mute;\n\n    this._mute = !!isMute;\n\n    if(needupdate) this.$update();\n    return this;\n  },\n  // private bind logic\n  _bind: function(component, expr1, expr2){\n\n    var self = this;\n    // basic binding\n\n    if(!component || !(component instanceof Regular)) throw \"$bind() should pass Regular component as first argument\";\n    if(!expr1) throw \"$bind() should  pass as least one expression to bind\";\n\n    if(!expr2) expr2 = expr1;\n\n    expr1 = parse.expression( expr1 );\n    expr2 = parse.expression( expr2 );\n\n    // set is need to operate setting ;\n    if(expr2.set){\n      var wid1 = this.$watch( expr1, function(value){\n        component.$update(expr2, value)\n      });\n      component.$on('$destroy', function(){\n        self.$unwatch(wid1)\n      })\n    }\n    if(expr1.set){\n      var wid2 = component.$watch(expr2, function(value){\n        self.$update(expr1, value)\n      });\n      // when brother destroy, we unlink this watcher\n      this.$on('$destroy', component.$unwatch.bind(component,wid2))\n    }\n    // sync the component's state to called's state\n    expr2.set(component, expr1.get(this));\n  },\n  _walk: function(ast, arg1){\n    if( _.typeOf(ast) === 'array' ){\n      var res = [];\n\n      for(var i = 0, len = ast.length; i < len; i++){\n        res.push( this._walk(ast[i], arg1) );\n      }\n\n      return new Group(res);\n    }\n    if(typeof ast === 'string') return doc.createTextNode(ast)\n    return walkers[ast.type || \"default\"].call(this, ast, arg1);\n  },\n  _append: function(component){\n    this._children.push(component);\n    component.$parent = this;\n  },\n  _handleEvent: function(elem, type, value, attrs){\n    var Component = this.constructor,\n      fire = typeof value !== \"function\"? _.handleEvent.call( this, value, type ) : value,\n      handler = Component.event(type), destroy;\n\n    if ( handler ) {\n      destroy = handler.call(this, elem, fire, attrs);\n    } else {\n      dom.on(elem, type, fire);\n    }\n    return handler ? destroy : function() {\n      dom.off(elem, type, fire);\n    }\n  },\n  // 1. 用来处理exprBody -> Function\n  // 2. list里的循环\n  _touchExpr: function(expr){\n    var  rawget, ext = this.__ext__, touched = {};\n    if(expr.type !== 'expression' || expr.touched) return expr;\n    rawget = expr.get || (expr.get = new Function(_.ctxName, _.extName , _.prefix+ \"return (\" + expr.body + \")\"));\n    touched.get = !ext? rawget: function(context){\n      return rawget(context, ext)\n    }\n\n    if(expr.setbody && !expr.set){\n      var setbody = expr.setbody;\n      expr.set = function(ctx, value, ext){\n        expr.set = new Function(_.ctxName, _.setName , _.extName, _.prefix + setbody);          \n        return expr.set(ctx, value, ext);\n      }\n      expr.setbody = null;\n    }\n    if(expr.set){\n      touched.set = !ext? expr.set : function(ctx, value){\n        return expr.set(ctx, value, ext);\n      }\n    }\n    _.extend(touched, {\n      type: 'expression',\n      touched: true,\n      once: expr.once || expr.constant\n    })\n    return touched\n  },\n  // find filter\n  _f_: function(name){\n    var Component = this.constructor;\n    var filter = Component.filter(name);\n    if(!filter) throw 'filter ' + name + ' is undefined';\n    return filter;\n  },\n  // simple accessor get\n  _sg_:function(path, defaults, ext){\n    if(typeof ext !== 'undefined'){\n      // if(path === \"demos\")  debugger\n      var computed = this.computed,\n        computedProperty = computed[path];\n      if(computedProperty){\n        if(computedProperty.type==='expression' && !computedProperty.get) this._touchExpr(computedProperty);\n        if(computedProperty.get)  return computedProperty.get(this);\n        else _.log(\"the computed '\" + path + \"' don't define the get function,  get data.\"+path + \" altnately\", \"error\")\n      }\n  }\n    if(typeof defaults === \"undefined\" || typeof path == \"undefined\" ) return undefined;\n    return (ext && typeof ext[path] !== 'undefined')? ext[path]: defaults[path];\n\n  },\n  // simple accessor set\n  _ss_:function(path, value, data , op, computed){\n    var computed = this.computed,\n      op = op || \"=\", prev, \n      computedProperty = computed? computed[path]:null;\n\n    if(op !== '='){\n      prev = computedProperty? computedProperty.get(this): data[path];\n      switch(op){\n        case \"+=\":\n          value = prev + value;\n          break;\n        case \"-=\":\n          value = prev - value;\n          break;\n        case \"*=\":\n          value = prev * value;\n          break;\n        case \"/=\":\n          value = prev / value;\n          break;\n        case \"%=\":\n          value = prev % value;\n          break;\n      }\n    }\n    if(computedProperty) {\n      if(computedProperty.set) return computedProperty.set(this, value);\n      else _.log(\"the computed '\" + path + \"' don't define the set function,  assign data.\"+path + \" altnately\", \"error\" )\n    }\n    data[path] = value;\n    return value;\n  }\n});\n\nRegular.prototype.inject = function(){\n  _.log(\"use $inject instead of inject\", \"error\");\n  return this.$inject.apply(this, arguments);\n}\n\n\n// only one builtin filter\n\nRegular.filter(filter);\n\nmodule.exports = Regular;\n\n\n\nvar handleComputed = (function(){\n  // wrap the computed getter;\n  function wrapGet(get){\n    return function(context){\n      return get.call(context, context.data );\n    }\n  }\n  // wrap the computed setter;\n  function wrapSet(set){\n    return function(context, value){\n      set.call( context, value, context.data );\n      return value;\n    }\n  }\n\n  return function(computed){\n    if(!computed) return;\n    var parsedComputed = {}, handle, pair, type;\n    for(var i in computed){\n      handle = computed[i]\n      type = typeof handle;\n\n      if(handle.type === 'expression'){\n        parsedComputed[i] = handle;\n        continue;\n      }\n      if( type === \"string\" ){\n        parsedComputed[i] = parse.expression(handle)\n      }else{\n        pair = parsedComputed[i] = {type: 'expression'};\n        if(type === \"function\" ){\n          pair.get = wrapGet(handle);\n        }else{\n          if(handle.get) pair.get = wrapGet(handle.get);\n          if(handle.set) pair.set = wrapSet(handle.set);\n        }\n      } \n    }\n    return parsedComputed;\n  }\n})();\n","\nmodule.exports = {\n'BEGIN': '{',\n'END': '}'\n}","var // packages\n  _ = require(\"../util.js\"),\n animate = require(\"../helper/animate.js\"),\n dom = require(\"../dom.js\"),\n Regular = require(\"../Regular.js\");\n\n\nvar // variables\n  rClassName = /^[-\\w]+(\\s[-\\w]+)*$/,\n  rCommaSep = /[\\r\\n\\f ]*,[\\r\\n\\f ]*(?=\\w+\\:)/, //  dont split comma in  Expression\n  rStyles = /^\\{.*\\}$/, //  for Simpilfy\n  rSpace = /\\s+/, //  for Simpilfy\n  WHEN_COMMAND = \"when\",\n  EVENT_COMMAND = \"on\",\n  THEN_COMMAND = \"then\";\n\n/**\n * Animation Plugin\n * @param {Component} Component \n */\n\n\nfunction createSeed(type){\n\n  var steps = [], current = 0, callback = _.noop;\n  var key;\n\n  var out = {\n    type: type,\n    start: function(cb){\n      key = _.uid();\n      if(typeof cb === \"function\") callback = cb;\n      if(current> 0 ){\n        current = 0 ;\n      }else{\n        out.step();\n      }\n      return out.compelete;\n    },\n    compelete: function(){\n      key = null;\n      callback && callback();\n      callback = _.noop;\n      current = 0;\n    },\n    step: function(){\n      if(steps[current]) steps[current ]( out.done.bind(out, key) );\n    },\n    done: function(pkey){\n      if(pkey !== key) return; // means the loop is down\n      if( current < steps.length - 1 ) {\n        current++;\n        out.step();\n      }else{\n        out.compelete();\n      }\n    },\n    push: function(step){\n      steps.push(step)\n    }\n  }\n\n  return out;\n}\n\nRegular._addProtoInheritCache(\"animation\")\n\n\n// builtin animation\nRegular.animation({\n  \"wait\": function( step ){\n    var timeout = parseInt( step.param ) || 0\n    return function(done){\n      // _.log(\"delay \" + timeout)\n      setTimeout( done, timeout );\n    }\n  },\n  \"class\": function(step){\n    var tmp = step.param.split(\",\"),\n      className = tmp[0] || \"\",\n      mode = parseInt(tmp[1]) || 1;\n\n    return function(done){\n      // _.log(className)\n      animate.startClassAnimate( step.element, className , done, mode );\n    }\n  },\n  \"call\": function(step){\n    var fn = this.$expression(step.param).get, self = this;\n    return function(done){\n      // _.log(step.param, 'call')\n      fn(self);\n      self.$update();\n      done()\n    }\n  },\n  \"emit\": function(step){\n    var param = step.param;\n    var tmp = param.split(\",\"),\n      evt = tmp[0] || \"\",\n      args = tmp[1]? this.$expression(tmp[1]).get: null;\n\n    if(!evt) throw \"you shoud specified a eventname in emit command\";\n\n    var self = this;\n    return function(done){\n      self.$emit(evt, args? args(self) : undefined);\n      done();\n    }\n  },\n  // style: left {10}px,\n  style: function(step){\n    var styles = {}, \n      param = step.param,\n      pairs = param.split(\",\"), valid;\n    pairs.forEach(function(pair){\n      pair = pair.trim();\n      if(pair){\n        var tmp = pair.split( rSpace ),\n          name = tmp.shift(),\n          value = tmp.join(\" \");\n\n        if( !name || !value ) throw \"invalid style in command: style\";\n        styles[name] = value;\n        valid = true;\n      }\n    })\n\n    return function(done){\n      if(valid){\n        animate.startStyleAnimate(step.element, styles, done);\n      }else{\n        done();\n      }\n    }\n  }\n})\n\n\n\n// hancdle the r-animation directive\n// el : the element to process\n// value: the directive value\nfunction processAnimate( element, value ){\n  value = value.trim();\n\n  var composites = value.split(\";\"), \n    composite, context = this, seeds = [], seed, destroies = [], destroy,\n    command, param , current = 0, tmp, animator, self = this;\n\n  function reset( type ){\n    seed && seeds.push( seed )\n    seed = createSeed( type );\n  }\n\n  function whenCallback(start, value){\n    if( !!value ) start()\n  }\n\n  function animationDestroy(element){\n    return function(){\n      delete element.onenter;\n      delete element.onleave;\n    } \n  }\n\n  for( var i = 0, len = composites.length; i < len; i++ ){\n\n    composite = composites[i];\n    tmp = composite.split(\":\");\n    command = tmp[0] && tmp[0].trim();\n    param = tmp[1] && tmp[1].trim();\n\n    if( !command ) continue;\n\n    if( command === WHEN_COMMAND ){\n      reset(\"when\");\n      this.$watch(param, whenCallback.bind( this, seed.start ) );\n      continue;\n    }\n\n    if( command === EVENT_COMMAND){\n      reset(param);\n      if( param === \"leave\" ){\n        element.onleave = seed.start;\n        destroies.push( animationDestroy(element) );\n      }else if( param === \"enter\" ){\n        element.onenter = seed.start;\n        destroies.push( animationDestroy(element) );\n      }else{\n        if( (\"on\" + param) in element){ // if dom have the event , we use dom event\n          destroies.push(this._handleEvent( element, param, seed.start ));\n        }else{ // otherwise, we use component event\n          this.$on(param, seed.start);\n          destroies.push(this.$off.bind(this, param, seed.start));\n        }\n      }\n      continue\n    }\n\n    var animator =  Regular.animation(command) \n    if( animator && seed ){\n      seed.push(\n        animator.call(this,{\n          element: element,\n          done: seed.done,\n          param: param \n        })\n      )\n    }else{\n      throw \"you need start with `on` or `event` in r-animation\";\n    }\n  }\n\n  if(destroies.length){\n    return function(){\n      destroies.forEach(function(destroy){\n        destroy();\n      })\n    }\n  }\n}\n\n\nRegular.directive( \"r-animation\", processAnimate)\nRegular.directive( \"r-sequence\", processAnimate)\n\n","// Regular\nvar _ = require(\"../util.js\");\nvar dom = require(\"../dom.js\");\nvar animate = require(\"../helper/animate.js\");\nvar Regular = require(\"../Regular.js\");\n\n\n\nrequire(\"./event.js\");\nrequire(\"./form.js\");\n\n\n// **warn**: class inteplation will override this directive \n\nRegular.directive('r-class', function(elem, value){\n  this.$watch(value, function(nvalue){\n    var className = ' '+ elem.className.replace(/\\s+/g, ' ') +' ';\n    for(var i in nvalue) if(nvalue.hasOwnProperty(i)){\n      className = className.replace(' ' + i + ' ',' ');\n      if(nvalue[i] === true){\n        className += i+' ';\n      }\n    }\n    elem.className = className.trim();\n  },true);\n\n});\n\n// **warn**: style inteplation will override this directive \n\nRegular.directive('r-style', function(elem, value){\n  this.$watch(value, function(nvalue){\n    for(var i in nvalue) if(nvalue.hasOwnProperty(i)){\n      dom.css(elem, i, nvalue[i]);\n    }\n  },true);\n});\n\n// when expression is evaluate to true, the elem will add display:none\n// Example: <div r-hide={{items.length > 0}}></div>\n\nRegular.directive('r-hide', function(elem, value){\n  var preBool = null, compelete;\n  this.$watch(value, function(nvalue){\n    var bool = !!nvalue;\n    if(bool === preBool) return; \n    preBool = bool;\n    if(bool){\n      if(elem.onleave){\n        compelete = elem.onleave(function(){\n          elem.style.display = \"none\"\n          compelete = null;\n        })\n      }else{\n        elem.style.display = \"none\"\n      }\n      \n    }else{\n      if(compelete) compelete();\n      elem.style.display = \"\";\n      if(elem.onenter){\n        elem.onenter();\n      }\n    }\n  });\n\n});\n\n// unescaped inteplation. xss is not be protect\nRegular.directive('r-html', function(elem, value){\n  this.$watch(value, function(nvalue){\n    nvalue = nvalue || \"\";\n    dom.html(elem, nvalue)\n  }, {force: true});\n});\n\n\n\n\n\n\n\n\n\n","/**\n * event directive  bundle\n *\n */\nvar _ = require(\"../util.js\");\nvar dom = require(\"../dom.js\");\nvar Regular = require(\"../Regular.js\");\n\nRegular._addProtoInheritCache(\"event\");\n\nRegular.event(\"enter\", function(elem, fire) {\n  _.log(\"on-enter will be removed in 0.4.0\", \"error\");\n  function update( ev ) {\n    if ( ev.which === 13 ) {\n      ev.preventDefault();\n      fire(ev);\n    }\n  }\n  dom.on( elem, \"keypress\", update );\n\n  return function() {\n    dom.off( elem, \"keypress\", update );\n  }\n})\n\n\nRegular.directive( /^on-\\w+$/, function( elem, value, name , attrs) {\n  if ( !name || !value ) return;\n  var type = name.split(\"-\")[1];\n  return this._handleEvent( elem, type, value, attrs );\n});\n// TODO.\n/**\n- $('dx').delegate()\n*/\nRegular.directive( /^delegate-\\w+$/, function( elem, value, name, attrs ) {\n  var root = this.$root;\n  var _delegates = root._delegates || ( root._delegates = {} );\n  if ( !name || !value ) return;\n  var type = name.split(\"-\")[1];\n  var fire = _.handleEvent.call(this, value, type);\n\n  function delegateEvent(ev){\n    matchParent(ev, _delegates[type]);\n  }\n\n  if( !_delegates[type] ){\n    _delegates[type] = [];\n\n    root.$on( \"$inject\", function( newParent ){\n      var preParent = this.parentNode;\n      if( preParent ){\n        dom.off(preParent, type, delegateEvent);\n      }\n      dom.on(newParent, type, delegateEvent);\n    })\n\n    root.$on(\"$destroy\", function(){\n      if(root.parentNode) dom.off(root.parentNode, type, delegateEvent)\n      root._delegates[type] = null;\n    })\n  }\n  var delegate = {\n    element: elem,\n    fire: fire\n  }\n  _delegates[type].push( delegate );\n\n  return function(){\n    var delegates = _delegates[type];\n    if(!delegates || !delegates.length) return;\n    for( var i = 0, len = delegates.length; i < len; i++ ){\n      if( delegates[i] === delegate ) delegates.splice(i, 1);\n    }\n  }\n\n});\n\n\nfunction matchParent(ev , delegates){\n  var target = ev.target;\n  while(target && target !== dom.doc){\n    for( var i = 0, len = delegates.length; i < len; i++ ){\n      if(delegates[i].element === target){\n        delegates[i].fire(ev);\n      }\n    }\n    target = target.parentNode;\n  }\n}","// Regular\nvar _ = require(\"../util.js\");\nvar dom = require(\"../dom.js\");\nvar Regular = require(\"../Regular.js\");\n\nvar modelHandlers = {\n  \"text\": initText,\n  \"select\": initSelect,\n  \"checkbox\": initCheckBox,\n  \"radio\": initRadio\n}\n\n\n// @TODO\n\n\n// two-way binding with r-model\n// works on input, textarea, checkbox, radio, select\n\nRegular.directive(\"r-model\", function(elem, value){\n  var tag = elem.tagName.toLowerCase();\n  var sign = tag;\n  if(sign === \"input\") sign = elem.type || \"text\";\n  else if(sign === \"textarea\") sign = \"text\";\n  if(typeof value === \"string\") value = this.$expression(value);\n\n  if( modelHandlers[sign] ) return modelHandlers[sign].call(this, elem, value);\n  else if(tag === \"input\"){\n    return modelHandlers.text.call(this, elem, value);\n  }\n});\n\n\n\n// binding <select>\n\nfunction initSelect( elem, parsed){\n  var self = this;\n  var wc =this.$watch(parsed, function(newValue){\n    var children = _.slice(elem.getElementsByTagName('option'))\n    children.forEach(function(node, index){\n      if(node.value == newValue){\n        elem.selectedIndex = index;\n      }\n    })\n  });\n\n  function handler(){\n    parsed.set(self, this.value);\n    wc.last = this.value;\n    self.$update();\n  }\n\n  dom.on(elem, \"change\", handler);\n  \n  if(parsed.get(self) === undefined && elem.value){\n     parsed.set(self, elem.value);\n  }\n  return function destroy(){\n    dom.off(elem, \"change\", handler);\n  }\n}\n\n// input,textarea binding\n\nfunction initText(elem, parsed){\n  var self = this;\n  var wc = this.$watch(parsed, function(newValue){\n    if(elem.value !== newValue) elem.value = newValue == null? \"\": \"\" + newValue;\n  });\n\n  // @TODO to fixed event\n  var handler = function handler(ev){\n    var that = this;\n    if(ev.type==='cut' || ev.type==='paste'){\n      _.nextTick(function(){\n        var value = that.value\n        parsed.set(self, value);\n        wc.last = value;\n        self.$update();\n      })\n    }else{\n        var value = that.value\n        parsed.set(self, value);\n        wc.last = value;\n        self.$update();\n    }\n  };\n\n  if(dom.msie !== 9 && \"oninput\" in dom.tNode ){\n    elem.addEventListener(\"input\", handler );\n  }else{\n    dom.on(elem, \"paste\", handler)\n    dom.on(elem, \"keyup\", handler)\n    dom.on(elem, \"cut\", handler)\n    dom.on(elem, \"change\", handler)\n  }\n  if(parsed.get(self) === undefined && elem.value){\n     parsed.set(self, elem.value);\n  }\n  return function destroy(){\n    if(dom.msie !== 9 && \"oninput\" in dom.tNode ){\n      elem.removeEventListener(\"input\", handler );\n    }else{\n      dom.off(elem, \"paste\", handler)\n      dom.off(elem, \"keyup\", handler)\n      dom.off(elem, \"cut\", handler)\n      dom.off(elem, \"change\", handler)\n    }\n  }\n}\n\n\n// input:checkbox  binding\n\nfunction initCheckBox(elem, parsed){\n  var self = this;\n  var watcher = this.$watch(parsed, function(newValue){\n    dom.attr(elem, 'checked', !!newValue);\n  });\n\n  var handler = function handler(){\n    var value = this.checked;\n    parsed.set(self, value);\n    watcher.last = value;\n    self.$update();\n  }\n  if(parsed.set) dom.on(elem, \"change\", handler)\n\n  if(parsed.get(self) === undefined){\n    parsed.set(self, !!elem.checked);\n  }\n\n  return function destroy(){\n    if(parsed.set) dom.off(elem, \"change\", handler)\n  }\n}\n\n\n// input:radio binding\n\nfunction initRadio(elem, parsed){\n  var self = this;\n  var wc = this.$watch(parsed, function( newValue ){\n    if(newValue == elem.value) elem.checked = true;\n    else elem.checked = false;\n  });\n\n\n  var handler = function handler(){\n    var value = this.value;\n    parsed.set(self, value);\n    self.$update();\n  }\n  if(parsed.set) dom.on(elem, \"change\", handler)\n  // beacuse only after compile(init), the dom structrue is exsit. \n  if(parsed.get(self) === undefined){\n    if(elem.checked) {\n      parsed.set(self, elem.value);\n    }\n  }\n\n  return function destroy(){\n    if(parsed.set) dom.off(elem, \"change\", handler)\n  }\n}\n","\n// thanks for angular && mootools for some concise&cross-platform  implemention\n// =====================================\n\n// The MIT License\n// Copyright (c) 2010-2014 Google, Inc. http://angularjs.org\n\n// ---\n// license: MIT-style license. http://mootools.net\n\n\nvar dom = module.exports;\nvar env = require(\"./env.js\");\nvar _ = require(\"./util\");\nvar tNode = document.createElement('div')\nvar addEvent, removeEvent;\nvar noop = function(){}\n\nvar namespaces = {\n  html: \"http://www.w3.org/1999/xhtml\",\n  svg: \"http://www.w3.org/2000/svg\"\n}\n\ndom.body = document.body;\n\ndom.doc = document;\n\n// camelCase\nfunction camelCase(str){\n  return (\"\" + str).replace(/-\\D/g, function(match){\n    return match.charAt(1).toUpperCase();\n  });\n}\n\n\ndom.tNode = tNode;\n\nif(tNode.addEventListener){\n  addEvent = function(node, type, fn) {\n    node.addEventListener(type, fn, false);\n  }\n  removeEvent = function(node, type, fn) {\n    node.removeEventListener(type, fn, false) \n  }\n}else{\n  addEvent = function(node, type, fn) {\n    node.attachEvent('on' + type, fn);\n  }\n  removeEvent = function(node, type, fn) {\n    node.detachEvent('on' + type, fn); \n  }\n}\n\n\ndom.msie = parseInt((/msie (\\d+)/.exec(navigator.userAgent.toLowerCase()) || [])[1]);\nif (isNaN(dom.msie)) {\n  dom.msie = parseInt((/trident\\/.*; rv:(\\d+)/.exec(navigator.userAgent.toLowerCase()) || [])[1]);\n}\n\ndom.find = function(sl){\n  if(document.querySelector) {\n    try{\n      return document.querySelector(sl);\n    }catch(e){\n\n    }\n  }\n  if(sl.indexOf('#')!==-1) return document.getElementById( sl.slice(1) );\n}\n\ndom.inject = function(node, refer, position){\n\n  position = position || 'bottom';\n\n  if(Array.isArray(node)){\n    var tmp = node;\n    node = dom.fragment();\n    for(var i = 0,len = tmp.length; i < len ;i++){\n      node.appendChild(tmp[i]);\n    }\n  }\n\n  var firstChild, next;\n  switch(position){\n    case 'bottom':\n      refer.appendChild( node );\n      break;\n    case 'top':\n      if( firstChild = refer.firstChild ){\n        refer.insertBefore( node, refer.firstChild );\n      }else{\n        refer.appendChild( node );\n      }\n      break;\n    case 'after':\n      if( next = refer.nextSibling ){\n        next.parentNode.insertBefore( node, next );\n      }else{\n        refer.parentNode.appendChild( node );\n      }\n      break;\n    case 'before':\n      refer.parentNode.insertBefore( node, refer );\n  }\n}\n\n\ndom.id = function(id){\n  return document.getElementById(id);\n}\n\n// createElement \ndom.create = function(type, ns, attrs){\n  if(ns === 'svg'){\n    if(!env.svg) throw Error('the env need svg support')\n    ns = namespaces.svg;\n  }\n  return !ns? document.createElement(type): document.createElementNS(ns, type);\n}\n\n// documentFragment\ndom.fragment = function(){\n  return document.createDocumentFragment();\n}\n\n\n\nvar specialAttr = {\n  'class': function(node, value){\n    ('className' in node && (node.namespaceURI === namespaces.html || !node.namespaceURI)) ?\n      node.className = (value || '') : node.setAttribute('class', value);\n  },\n  'for': function(node, value){\n    ('htmlFor' in node) ? node.htmlFor = value : node.setAttribute('for', value);\n  },\n  'style': function(node, value){\n    (node.style) ? node.style.cssText = value : node.setAttribute('style', value);\n  },\n  'value': function(node, value){\n    node.value = (value != null) ? value : '';\n  }\n}\n\n\n// attribute Setter & Getter\ndom.attr = function(node, name, value){\n  if (_.isBooleanAttr(name)) {\n    if (typeof value !== 'undefined') {\n      if (!!value) {\n        node[name] = true;\n        node.setAttribute(name, name);\n        // lt ie7 . the javascript checked setting is in valid\n        //http://bytes.com/topic/javascript/insights/799167-browser-quirk-dynamically-appended-checked-checkbox-does-not-appear-checked-ie\n        if(dom.msie && dom.msie <=7 ) node.defaultChecked = true\n      } else {\n        node[name] = false;\n        node.removeAttribute(name);\n      }\n    } else {\n      return (node[name] ||\n               (node.attributes.getNamedItem(name)|| noop).specified) ? name : undefined;\n    }\n  } else if (typeof (value) !== 'undefined') {\n    // if in specialAttr;\n    if(specialAttr[name]) specialAttr[name](node, value);\n    else if(value === null) node.removeAttribute(name)\n    else node.setAttribute(name, value);\n  } else if (node.getAttribute) {\n    // the extra argument \"2\" is to get the right thing for a.href in IE, see jQuery code\n    // some elements (e.g. Document) don't have get attribute, so return undefined\n    var ret = node.getAttribute(name, 2);\n    // normalize non-existing attributes to undefined (as jQuery)\n    return ret === null ? undefined : ret;\n  }\n}\n\n\ndom.on = function(node, type, handler){\n  var types = type.split(' ');\n  handler.real = function(ev){\n    var $event = new Event(ev);\n    $event.origin = node;\n    handler.call(node, $event);\n  }\n  types.forEach(function(type){\n    type = fixEventName(node, type);\n    addEvent(node, type, handler.real);\n  });\n}\ndom.off = function(node, type, handler){\n  var types = type.split(' ');\n  handler = handler.real || handler;\n  types.forEach(function(type){\n    type = fixEventName(node, type);\n    removeEvent(node, type, handler);\n  })\n}\n\n\ndom.text = (function (){\n  var map = {};\n  if (dom.msie && dom.msie < 9) {\n    map[1] = 'innerText';    \n    map[3] = 'nodeValue';    \n  } else {\n    map[1] = map[3] = 'textContent';\n  }\n  \n  return function (node, value) {\n    var textProp = map[node.nodeType];\n    if (value == null) {\n      return textProp ? node[textProp] : '';\n    }\n    node[textProp] = value;\n  }\n})();\n\n\ndom.html = function( node, html ){\n  if(typeof html === \"undefined\"){\n    return node.innerHTML;\n  }else{\n    node.innerHTML = html;\n  }\n}\n\ndom.replace = function(node, replaced){\n  if(replaced.parentNode) replaced.parentNode.replaceChild(node, replaced);\n}\n\ndom.remove = function(node){\n  if(node.parentNode) node.parentNode.removeChild(node);\n}\n\n// css Settle & Getter from angular\n// =================================\n// it isnt computed style \ndom.css = function(node, name, value){\n  if( _.typeOf(name) === \"object\" ){\n    for(var i in name){\n      if( name.hasOwnProperty(i) ){\n        dom.css( node, i, name[i] );\n      }\n    }\n    return;\n  }\n  if ( typeof value !== \"undefined\" ) {\n\n    name = camelCase(name);\n    if(name) node.style[name] = value;\n\n  } else {\n\n    var val;\n    if (dom.msie <= 8) {\n      // this is some IE specific weirdness that jQuery 1.6.4 does not sure why\n      val = node.currentStyle && node.currentStyle[name];\n      if (val === '') val = 'auto';\n    }\n    val = val || node.style[name];\n    if (dom.msie <= 8) {\n      val = val === '' ? undefined : val;\n    }\n    return  val;\n  }\n}\n\ndom.addClass = function(node, className){\n  var current = node.className || \"\";\n  if ((\" \" + current + \" \").indexOf(\" \" + className + \" \") === -1) {\n    node.className = current? ( current + \" \" + className ) : className;\n  }\n}\n\ndom.delClass = function(node, className){\n  var current = node.className || \"\";\n  node.className = (\" \" + current + \" \").replace(\" \" + className + \" \", \" \").trim();\n}\n\ndom.hasClass = function(node, className){\n  var current = node.className || \"\";\n  return (\" \" + current + \" \").indexOf(\" \" + className + \" \") !== -1;\n}\n\n\n\n// simple Event wrap\n\n//http://stackoverflow.com/questions/11068196/ie8-ie7-onchange-event-is-emited-only-after-repeated-selection\nfunction fixEventName(elem, name){\n  return (name === 'change'  &&  dom.msie < 9 && \n      (elem && elem.tagName && elem.tagName.toLowerCase()==='input' && \n        (elem.type === 'checkbox' || elem.type === 'radio')\n      )\n    )? 'click': name;\n}\n\nvar rMouseEvent = /^(?:click|dblclick|contextmenu|DOMMouseScroll|mouse(?:\\w+))$/\nvar doc = document;\ndoc = (!doc.compatMode || doc.compatMode === 'CSS1Compat') ? doc.documentElement : doc.body;\nfunction Event(ev){\n  ev = ev || window.event;\n  if(ev._fixed) return ev;\n  this.event = ev;\n  this.target = ev.target || ev.srcElement;\n\n  var type = this.type = ev.type;\n  var button = this.button = ev.button;\n\n  // if is mouse event patch pageX\n  if(rMouseEvent.test(type)){ //fix pageX\n    this.pageX = (ev.pageX != null) ? ev.pageX : ev.clientX + doc.scrollLeft;\n    this.pageY = (ev.pageX != null) ? ev.pageY : ev.clientY + doc.scrollTop;\n    if (type === 'mouseover' || type === 'mouseout'){// fix relatedTarget\n      var related = ev.relatedTarget || ev[(type === 'mouseover' ? 'from' : 'to') + 'Element'];\n      while (related && related.nodeType === 3) related = related.parentNode;\n      this.relatedTarget = related;\n    }\n  }\n  // if is mousescroll\n  if (type === 'DOMMouseScroll' || type === 'mousewheel'){\n    // ff ev.detail: 3    other ev.wheelDelta: -120\n    this.wheelDelta = (ev.wheelDelta) ? ev.wheelDelta / 120 : -(ev.detail || 0) / 3;\n  }\n  \n  // fix which\n  this.which = ev.which || ev.keyCode;\n  if( !this.which && button !== undefined){\n    // http://api.jquery.com/event.which/ use which\n    this.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );\n  }\n  this._fixed = true;\n}\n\n_.extend(Event.prototype, {\n  immediateStop: _.isFalse,\n  stop: function(){\n    this.preventDefault().stopPropagation();\n  },\n  preventDefault: function(){\n    if (this.event.preventDefault) this.event.preventDefault();\n    else this.event.returnValue = false;\n    return this;\n  },\n  stopPropagation: function(){\n    if (this.event.stopPropagation) this.event.stopPropagation();\n    else this.event.cancelBubble = true;\n    return this;\n  },\n  stopImmediatePropagation: function(){\n    if(this.event.stopImmediatePropagation) this.event.stopImmediatePropagation();\n  }\n})\n\n\ndom.nextFrame = (function(){\n    var request = window.requestAnimationFrame ||\n                  window.webkitRequestAnimationFrame ||\n                  window.mozRequestAnimationFrame|| \n                  function(callback){\n                    setTimeout(callback, 16)\n                  }\n\n    var cancel = window.cancelAnimationFrame ||\n                 window.webkitCancelAnimationFrame ||\n                 window.mozCancelAnimationFrame ||\n                 window.webkitCancelRequestAnimationFrame ||\n                 function(tid){\n                    clearTimeout(tid)\n                 }\n  \n  return function(callback){\n    var id = request(callback);\n    return function(){ cancel(id); }\n  }\n})();\n\n// 3ks for angular's raf  service\nvar k;\ndom.nextReflow = function(callback){\n  dom.nextFrame(function(){\n    k = document.body.offsetWidth;\n    callback();\n  })\n}\n\n\n\n","// some fixture test;\n// ---------------\nvar _ = require('./util');\nexports.svg = (function(){\n  return typeof document !== \"undefined\" && document.implementation.hasFeature( \"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\" );\n})();\n\n\nexports.browser = typeof document !== \"undefined\" && document.nodeType;\n// whether have component in initializing\nexports.exprCache = _.cache(1000);\nexports.isRunning = false;\n","var _ = require('./util');\nvar combine = require('./helper/combine')\n\nfunction Group(list){\n  this.children = list || [];\n}\n\n\n_.extend(Group.prototype, {\n  destroy: function(first){\n    combine.destroy(this.children, first);\n    if(this.ondestroy) this.ondestroy();\n    this.children = null;\n  },\n  get: function(i){\n    return this.children[i]\n  },\n  push: function(item){\n    this.children.push( item );\n  }\n\n})\n\n\n\nmodule.exports = Group;\n\n\n","var _ = require(\"../util\");\nvar dom  = require(\"../dom.js\");\nvar animate = {};\nvar env = require(\"../env.js\");\n\n\nvar \n  transitionEnd = 'transitionend', \n  animationEnd = 'animationend', \n  transitionProperty = 'transition', \n  animationProperty = 'animation';\n\nif(!('ontransitionend' in window)){\n  if('onwebkittransitionend' in window) {\n    \n    // Chrome/Saf (+ Mobile Saf)/Android\n    transitionEnd += ' webkitTransitionEnd';\n    transitionProperty = 'webkitTransition'\n  } else if('onotransitionend' in dom.tNode || navigator.appName === 'Opera') {\n\n    // Opera\n    transitionEnd += ' oTransitionEnd';\n    transitionProperty = 'oTransition';\n  }\n}\nif(!('onanimationend' in window)){\n  if ('onwebkitanimationend' in window){\n    // Chrome/Saf (+ Mobile Saf)/Android\n    animationEnd += ' webkitAnimationEnd';\n    animationProperty = 'webkitAnimation';\n\n  }else if ('onoanimationend' in dom.tNode){\n    // Opera\n    animationEnd += ' oAnimationEnd';\n    animationProperty = 'oAnimation';\n  }\n}\n\n/**\n * inject node with animation\n * @param  {[type]} node      [description]\n * @param  {[type]} refer     [description]\n * @param  {[type]} direction [description]\n * @return {[type]}           [description]\n */\nanimate.inject = function( node, refer ,direction, callback ){\n  callback = callback || _.noop;\n  if( Array.isArray(node) ){\n    var fragment = dom.fragment();\n    var count=0;\n\n    for(var i = 0,len = node.length;i < len; i++ ){\n      fragment.appendChild(node[i]); \n    }\n    dom.inject(fragment, refer, direction);\n\n    // if all nodes is done, we call the callback\n    var enterCallback = function (){\n      count++;\n      if( count === len ) callback();\n    }\n    if(len === count) callback();\n    for( i = 0; i < len; i++ ){\n      if(node[i].onenter){\n        node[i].onenter(enterCallback);\n      }else{\n        enterCallback();\n      }\n    }\n  }else{\n    dom.inject( node, refer, direction );\n    if(node.onenter){\n      node.onenter(callback)\n    }else{\n      callback();\n    }\n  }\n}\n\n/**\n * remove node with animation\n * @param  {[type]}   node     [description]\n * @param  {Function} callback [description]\n * @return {[type]}            [description]\n */\nanimate.remove = function(node, callback){\n  if(node.onleave){\n    node.onleave(function(){\n      removeDone(node, callback)\n    })\n  }else{\n    removeDone(node, callback)\n  }\n}\n\nvar removeDone = function (node, callback){\n    dom.remove(node);\n    callback && callback();\n}\n\n\n\nanimate.startClassAnimate = function ( node, className,  callback, mode ){\n  var activeClassName, timeout, tid, onceAnim;\n  if( (!animationEnd && !transitionEnd) || env.isRunning ){\n    return callback();\n  }\n\n  onceAnim = _.once(function onAnimateEnd(){\n    if(tid) clearTimeout(tid);\n\n    if(mode === 2) {\n      dom.delClass(node, activeClassName);\n    }\n    if(mode !== 3){ // mode hold the class\n      dom.delClass(node, className);\n    }\n    dom.off(node, animationEnd, onceAnim)\n    dom.off(node, transitionEnd, onceAnim)\n\n    callback();\n\n  });\n  if(mode === 2){ // auto removed\n    dom.addClass( node, className );\n\n    activeClassName = className.split(/\\s+/).map(function(name){\n       return name + '-active';\n    }).join(\" \");\n\n    dom.nextReflow(function(){\n      dom.addClass( node, activeClassName );\n      timeout = getMaxTimeout( node );\n      tid = setTimeout( onceAnim, timeout );\n    });\n\n  }else{\n\n    dom.nextReflow(function(){\n      dom.addClass( node, className );\n      timeout = getMaxTimeout( node );\n      tid = setTimeout( onceAnim, timeout );\n    });\n\n  }\n\n\n  dom.on( node, animationEnd, onceAnim )\n  dom.on( node, transitionEnd, onceAnim )\n  return onceAnim;\n}\n\n\nanimate.startStyleAnimate = function(node, styles, callback){\n  var timeout, onceAnim, tid;\n\n  dom.nextReflow(function(){\n    dom.css( node, styles );\n    timeout = getMaxTimeout( node );\n    tid = setTimeout( onceAnim, timeout );\n  });\n\n\n  onceAnim = _.once(function onAnimateEnd(){\n    if(tid) clearTimeout(tid);\n\n    dom.off(node, animationEnd, onceAnim)\n    dom.off(node, transitionEnd, onceAnim)\n\n    callback();\n\n  });\n\n  dom.on( node, animationEnd, onceAnim )\n  dom.on( node, transitionEnd, onceAnim )\n\n  return onceAnim;\n}\n\n\n/**\n * get maxtimeout\n * @param  {Node} node \n * @return {[type]}   [description]\n */\nfunction getMaxTimeout(node){\n  var timeout = 0,\n    tDuration = 0,\n    tDelay = 0,\n    aDuration = 0,\n    aDelay = 0,\n    ratio = 5 / 3,\n    styles ;\n\n  if(window.getComputedStyle){\n\n    styles = window.getComputedStyle(node),\n    tDuration = getMaxTime( styles[transitionProperty + 'Duration']) || tDuration;\n    tDelay = getMaxTime( styles[transitionProperty + 'Delay']) || tDelay;\n    aDuration = getMaxTime( styles[animationProperty + 'Duration']) || aDuration;\n    aDelay = getMaxTime( styles[animationProperty + 'Delay']) || aDelay;\n    timeout = Math.max( tDuration+tDelay, aDuration + aDelay );\n\n  }\n  return timeout * 1000 * ratio;\n}\n\nfunction getMaxTime(str){\n\n  var maxTimeout = 0, time;\n\n  if(!str) return 0;\n\n  str.split(\",\").forEach(function(str){\n\n    time = parseFloat(str);\n    if( time > maxTimeout ) maxTimeout = time;\n\n  });\n\n  return maxTimeout;\n}\n\nmodule.exports = animate;","// some nested  operation in ast \n// --------------------------------\n\nvar dom = require(\"../dom.js\");\n\nvar combine = module.exports = {\n\n  // get the initial dom in object\n  node: function(item){\n    var children,node;\n    if(item.element) return item.element;\n    if(typeof item.node === \"function\") return item.node();\n    if(typeof item.nodeType === \"number\") return item;\n    if(item.group) return combine.node(item.group)\n    if(children = item.children){\n      if(children.length === 1){\n        \n        return combine.node(children[0]);\n      }\n      var nodes = [];\n      for(var i = 0, len = children.length; i < len; i++ ){\n        node = combine.node(children[i]);\n        if(Array.isArray(node)){\n          nodes.push.apply(nodes, node)\n        }else{\n          nodes.push(node)\n        }\n      }\n      return nodes;\n    }\n  },\n\n  // get the last dom in object(for insertion operation)\n  last: function(item){\n    var children = item.children;\n\n    if(typeof item.last === \"function\") return item.last();\n    if(typeof item.nodeType === \"number\") return item;\n\n    if(children && children.length) return combine.last(children[children.length - 1]);\n    if(item.group) return combine.last(item.group);\n\n  },\n\n  destroy: function(item, first){\n    if(!item) return;\n    if(Array.isArray(item)){\n      for(var i = 0, len = item.length; i < len; i++ ){\n        combine.destroy(item[i], first);\n      }\n    }\n    var children = item.children;\n    if(typeof item.destroy === \"function\") return item.destroy(first);\n    if(typeof item.nodeType === \"number\" && first)  dom.remove(item);\n    if(children && children.length){\n      combine.destroy(children, true);\n      item.children = null;\n    }\n  }\n\n}","// http://stackoverflow.com/questions/1354064/how-to-convert-characters-to-html-entities-using-plain-javascript\nvar entities = {\n  'quot':34, \n  'amp':38, \n  'apos':39, \n  'lt':60, \n  'gt':62, \n  'nbsp':160, \n  'iexcl':161, \n  'cent':162, \n  'pound':163, \n  'curren':164, \n  'yen':165, \n  'brvbar':166, \n  'sect':167, \n  'uml':168, \n  'copy':169, \n  'ordf':170, \n  'laquo':171, \n  'not':172, \n  'shy':173, \n  'reg':174, \n  'macr':175, \n  'deg':176, \n  'plusmn':177, \n  'sup2':178, \n  'sup3':179, \n  'acute':180, \n  'micro':181, \n  'para':182, \n  'middot':183, \n  'cedil':184, \n  'sup1':185, \n  'ordm':186, \n  'raquo':187, \n  'frac14':188, \n  'frac12':189, \n  'frac34':190, \n  'iquest':191, \n  'Agrave':192, \n  'Aacute':193, \n  'Acirc':194, \n  'Atilde':195, \n  'Auml':196, \n  'Aring':197, \n  'AElig':198, \n  'Ccedil':199, \n  'Egrave':200, \n  'Eacute':201, \n  'Ecirc':202, \n  'Euml':203, \n  'Igrave':204, \n  'Iacute':205, \n  'Icirc':206, \n  'Iuml':207, \n  'ETH':208, \n  'Ntilde':209, \n  'Ograve':210, \n  'Oacute':211, \n  'Ocirc':212, \n  'Otilde':213, \n  'Ouml':214, \n  'times':215, \n  'Oslash':216, \n  'Ugrave':217, \n  'Uacute':218, \n  'Ucirc':219, \n  'Uuml':220, \n  'Yacute':221, \n  'THORN':222, \n  'szlig':223, \n  'agrave':224, \n  'aacute':225, \n  'acirc':226, \n  'atilde':227, \n  'auml':228, \n  'aring':229, \n  'aelig':230, \n  'ccedil':231, \n  'egrave':232, \n  'eacute':233, \n  'ecirc':234, \n  'euml':235, \n  'igrave':236, \n  'iacute':237, \n  'icirc':238, \n  'iuml':239, \n  'eth':240, \n  'ntilde':241, \n  'ograve':242, \n  'oacute':243, \n  'ocirc':244, \n  'otilde':245, \n  'ouml':246, \n  'divide':247, \n  'oslash':248, \n  'ugrave':249, \n  'uacute':250, \n  'ucirc':251, \n  'uuml':252, \n  'yacute':253, \n  'thorn':254, \n  'yuml':255, \n  'fnof':402, \n  'Alpha':913, \n  'Beta':914, \n  'Gamma':915, \n  'Delta':916, \n  'Epsilon':917, \n  'Zeta':918, \n  'Eta':919, \n  'Theta':920, \n  'Iota':921, \n  'Kappa':922, \n  'Lambda':923, \n  'Mu':924, \n  'Nu':925, \n  'Xi':926, \n  'Omicron':927, \n  'Pi':928, \n  'Rho':929, \n  'Sigma':931, \n  'Tau':932, \n  'Upsilon':933, \n  'Phi':934, \n  'Chi':935, \n  'Psi':936, \n  'Omega':937, \n  'alpha':945, \n  'beta':946, \n  'gamma':947, \n  'delta':948, \n  'epsilon':949, \n  'zeta':950, \n  'eta':951, \n  'theta':952, \n  'iota':953, \n  'kappa':954, \n  'lambda':955, \n  'mu':956, \n  'nu':957, \n  'xi':958, \n  'omicron':959, \n  'pi':960, \n  'rho':961, \n  'sigmaf':962, \n  'sigma':963, \n  'tau':964, \n  'upsilon':965, \n  'phi':966, \n  'chi':967, \n  'psi':968, \n  'omega':969, \n  'thetasym':977, \n  'upsih':978, \n  'piv':982, \n  'bull':8226, \n  'hellip':8230, \n  'prime':8242, \n  'Prime':8243, \n  'oline':8254, \n  'frasl':8260, \n  'weierp':8472, \n  'image':8465, \n  'real':8476, \n  'trade':8482, \n  'alefsym':8501, \n  'larr':8592, \n  'uarr':8593, \n  'rarr':8594, \n  'darr':8595, \n  'harr':8596, \n  'crarr':8629, \n  'lArr':8656, \n  'uArr':8657, \n  'rArr':8658, \n  'dArr':8659, \n  'hArr':8660, \n  'forall':8704, \n  'part':8706, \n  'exist':8707, \n  'empty':8709, \n  'nabla':8711, \n  'isin':8712, \n  'notin':8713, \n  'ni':8715, \n  'prod':8719, \n  'sum':8721, \n  'minus':8722, \n  'lowast':8727, \n  'radic':8730, \n  'prop':8733, \n  'infin':8734, \n  'ang':8736, \n  'and':8743, \n  'or':8744, \n  'cap':8745, \n  'cup':8746, \n  'int':8747, \n  'there4':8756, \n  'sim':8764, \n  'cong':8773, \n  'asymp':8776, \n  'ne':8800, \n  'equiv':8801, \n  'le':8804, \n  'ge':8805, \n  'sub':8834, \n  'sup':8835, \n  'nsub':8836, \n  'sube':8838, \n  'supe':8839, \n  'oplus':8853, \n  'otimes':8855, \n  'perp':8869, \n  'sdot':8901, \n  'lceil':8968, \n  'rceil':8969, \n  'lfloor':8970, \n  'rfloor':8971, \n  'lang':9001, \n  'rang':9002, \n  'loz':9674, \n  'spades':9824, \n  'clubs':9827, \n  'hearts':9829, \n  'diams':9830, \n  'OElig':338, \n  'oelig':339, \n  'Scaron':352, \n  'scaron':353, \n  'Yuml':376, \n  'circ':710, \n  'tilde':732, \n  'ensp':8194, \n  'emsp':8195, \n  'thinsp':8201, \n  'zwnj':8204, \n  'zwj':8205, \n  'lrm':8206, \n  'rlm':8207, \n  'ndash':8211, \n  'mdash':8212, \n  'lsquo':8216, \n  'rsquo':8217, \n  'sbquo':8218, \n  'ldquo':8220, \n  'rdquo':8221, \n  'bdquo':8222, \n  'dagger':8224, \n  'Dagger':8225, \n  'permil':8240, \n  'lsaquo':8249, \n  'rsaquo':8250, \n  'euro':8364\n}\n\n\n\nmodule.exports  = entities;","// simplest event emitter 60 lines\n// ===============================\nvar slice = [].slice, _ = require(\"../util.js\");\nvar API = {\n    $on: function(event, fn) {\n        if(typeof event === \"object\"){\n            for (var i in event) {\n                this.$on(i, event[i]);\n            }\n        }else{\n            // @patch: for list\n            var context = this;\n            var handles = context._handles || (context._handles = {}),\n                calls = handles[event] || (handles[event] = []);\n            calls.push(fn);\n        }\n        return this;\n    },\n    $off: function(event, fn) {\n        var context = this;\n        if(!context._handles) return;\n        if(!event) this._handles = {};\n        var handles = context._handles,\n            calls;\n\n        if (calls = handles[event]) {\n            if (!fn) {\n                handles[event] = [];\n                return context;\n            }\n            for (var i = 0, len = calls.length; i < len; i++) {\n                if (fn === calls[i]) {\n                    calls.splice(i, 1);\n                    return context;\n                }\n            }\n        }\n        return context;\n    },\n    // bubble event\n    $emit: function(event){\n        // @patch: for list\n        var context = this;\n        var handles = context._handles, calls, args, type;\n        if(!event) return;\n        var args = slice.call(arguments, 1);\n        var type = event;\n\n        if(!handles) return context;\n        if(calls = handles[type.slice(1)]){\n            for (var j = 0, len = calls.length; j < len; j++) {\n                calls[j].apply(context, args)\n            }\n        }\n        if (!(calls = handles[type])) return context;\n        for (var i = 0, len = calls.length; i < len; i++) {\n            calls[i].apply(context, args)\n        }\n        // if(calls.length) context.$update();\n        return context;\n    },\n    // capture  event\n    $broadcast: function(){\n        \n    }\n}\n// container class\nfunction Event() {\n  if (arguments.length) this.$on.apply(this, arguments);\n}\n_.extend(Event.prototype, API)\n\nEvent.mixTo = function(obj){\n  obj = typeof obj === \"function\" ? obj.prototype : obj;\n  _.extend(obj, API)\n}\nmodule.exports = Event;","// (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n// Backbone may be freely distributed under the MIT license.\n// For all details and documentation:\n// http://backbonejs.org\n\n// klass: a classical JS OOP façade\n// https://github.com/ded/klass\n// License MIT (c) Dustin Diaz 2014\n  \n// inspired by backbone's extend and klass\nvar _ = require(\"../util.js\"),\n  fnTest = /xy/.test(function(){\"xy\";}) ? /\\bsupr\\b/:/.*/,\n  isFn = function(o){return typeof o === \"function\"};\n\n\nfunction wrap(k, fn, supro) {\n  return function () {\n    var tmp = this.supr;\n    this.supr = supro[k];\n    var ret = fn.apply(this, arguments);\n    this.supr = tmp;\n    return ret;\n  }\n}\n\nfunction process( what, o, supro ) {\n  for ( var k in o ) {\n    if (o.hasOwnProperty(k)) {\n\n      what[k] = isFn( o[k] ) && isFn( supro[k] ) && \n        fnTest.test( o[k] ) ? wrap(k, o[k], supro) : o[k];\n    }\n  }\n}\n\n// if the property is [\"events\", \"data\", \"computed\"] , we should merge them\nvar merged = [\"events\", \"data\", \"computed\"], mlen = merged.length;\nmodule.exports = function extend(o){\n  o = o || {};\n  var supr = this, proto,\n    supro = supr && supr.prototype || {};\n\n  if(typeof o === 'function'){\n    proto = o.prototype;\n    o.implement = implement;\n    o.extend = extend;\n    return o;\n  } \n  \n  function fn() {\n    supr.apply(this, arguments);\n  }\n\n  proto = _.createProto(fn, supro);\n\n  function implement(o){\n    // we need merge the merged property\n    var len = mlen;\n    for(;len--;){\n      var prop = merged[len];\n      if(o.hasOwnProperty(prop) && proto.hasOwnProperty(prop)){\n        _.extend(proto[prop], o[prop], true) \n        delete o[prop];\n      }\n    }\n\n\n    process(proto, o, supro); \n    return this;\n  }\n\n\n\n  fn.implement = implement\n  fn.implement(o)\n  if(supr.__after__) supr.__after__.call(fn, supr, o);\n  fn.extend = extend;\n  return fn;\n}\n\n","\nvar f = module.exports = {};\n\n// json:  two way \n//  - get: JSON.stringify\n//  - set: JSON.parse\n//  - example: `{ title|json }`\nf.json = {\n  get: function( value ){\n    return typeof JSON !== 'undefined'? JSON.stringify(value): value;\n  },\n  set: function( value ){\n    return typeof JSON !== 'undefined'? JSON.parse(value) : value;\n  }\n}\n\n// last: one-way\n//  - get: return the last item in list\n//  - example: `{ list|last }`\nf.last = function(arr){\n  return arr && arr[arr.length - 1];\n}\n\n// average: one-way\n//  - get: copute the average of the list\n//  - example: `{ list| average: \"score\" }`\nf.average = function(array, key){\n  array = array || [];\n  return array.length? f.total(array, key)/ array.length : 0;\n}\n\n\n// total: one-way\n//  - get: copute the total of the list\n//  - example: `{ list| average: \"score\" }`\nf.total = function(array, key){\n  var total = 0;\n  if(!array) return;\n  array.forEach(function( item ){\n    total += key? item[key] : item;\n  })\n  return total;\n}\n\n// var basicSortFn = function(a, b){return b - a}\n\n// f.sort = function(array, key, reverse){\n//   var type = typeof key, sortFn; \n//   switch(type){\n//     case 'function': sortFn = key; break;\n//     case 'string': sortFn = function(a, b){};break;\n//     default:\n//       sortFn = basicSortFn;\n//   }\n//   // need other refernce.\n//   return array.slice().sort(function(a,b){\n//     return reverse? -sortFn(a, b): sortFn(a, b);\n//   })\n//   return array\n// }\n\n\n","var exprCache = require('../env').exprCache;\nvar _ = require(\"../util\");\nvar Parser = require(\"../parser/Parser.js\");\nmodule.exports = {\n  expression: function(expr, simple){\n    // @TODO cache\n    if( typeof expr === 'string' && ( expr = expr.trim() ) ){\n      expr = exprCache.get( expr ) || exprCache.set( expr, new Parser( expr, { mode: 2, expression: true } ).expression() )\n    }\n    if(expr) return expr;\n  },\n  parse: function(template){\n    return new Parser(template).parse();\n  }\n}\n\n","// shim for es5\nvar slice = [].slice;\nvar tstr = ({}).toString;\n\nfunction extend(o1, o2 ){\n  for(var i in o2) if( o1[i] === undefined){\n    o1[i] = o2[i]\n  }\n}\n\n// String proto ;\nextend(String.prototype, {\n  trim: function(){\n    return this.replace(/^\\s+|\\s+$/g, '');\n  }\n});\n\n\n// Array proto;\nextend(Array.prototype, {\n  indexOf: function(obj, from){\n    from = from || 0;\n    for (var i = from, len = this.length; i < len; i++) {\n      if (this[i] === obj) return i;\n    }\n    return -1;\n  },\n  forEach: function(callback, context){\n    for (var i = 0, len = this.length; i < len; i++) {\n      callback.call(context, this[i], i, this);\n    }\n  },\n  filter: function(callback, context){\n    var res = [];\n    for (var i = 0, length = this.length; i < length; i++) {\n      var pass = callback.call(context, this[i], i, this);\n      if(pass) res.push(this[i]);\n    }\n    return res;\n  },\n  map: function(callback, context){\n    var res = [];\n    for (var i = 0, length = this.length; i < length; i++) {\n      res.push(callback.call(context, this[i], i, this));\n    }\n    return res;\n  }\n});\n\n// Function proto;\nextend(Function.prototype, {\n  bind: function(context){\n    var fn = this;\n    var preArgs = slice.call(arguments, 1);\n    return function(){\n      var args = preArgs.concat(slice.call(arguments));\n      return fn.apply(context, args);\n    }\n  }\n})\n\n// Object\nextend(Object, {\n  keys: function(obj){\n    var keys = [];\n    for(var i in obj) if(obj.hasOwnProperty(i)){\n      keys.push(i);\n    }\n    return keys;\n  } \n})\n\n// Date\nextend(Date, {\n  now: function(){\n    return +new Date;\n  }\n})\n// Array\nextend(Array, {\n  isArray: function(arr){\n    return tstr.call(arr) === \"[object Array]\";\n  }\n})\n","var _ = require('../util.js');\nvar parseExpression = require('./parse.js').expression;\n\n\nfunction Watcher(){}\n\nvar methods = {\n  $watch: function(expr, fn, options){\n    var get, once, test, rlen, extra = this.__ext__; //records length\n    if(!this._watchers) this._watchers = [];\n\n    options = options || {};\n    if(options === true){\n       options = { deep: true }\n    }\n    var uid = _.uid('w_');\n    if(Array.isArray(expr)){\n      var tests = [];\n      for(var i = 0,len = expr.length; i < len; i++){\n          tests.push(this.$expression(expr[i]).get)\n      }\n      var prev = [];\n      test = function(context){\n        var equal = true;\n        for(var i =0, len = tests.length; i < len; i++){\n          var splice = tests[i](context, extra);\n          if(!_.equals(splice, prev[i])){\n             equal = false;\n             prev[i] = _.clone(splice);\n          }\n        }\n        return equal? false: prev;\n      }\n    }else{\n      expr = this._touchExpr( parseExpression(expr) );\n      get = expr.get;\n      once = expr.once;\n    }\n\n    var watcher = {\n      id: uid, \n      get: get, \n      fn: fn, \n      once: once, \n      force: options.force,\n      test: test,\n      deep: options.deep,\n      last: options.sync? get(this): undefined\n    }\n    \n    this._watchers.push( watcher );\n\n    rlen = this._records && this._records.length;\n    if(rlen) this._records[rlen-1].push(uid)\n    // init state.\n    if(options.init === true){\n      this.$phase = 'digest';\n      this._checkSingleWatch( watcher, this._watchers.length-1 );\n      this.$phase = null;\n    }\n    return watcher;\n  },\n  $unwatch: function(uid){\n    uid = uid.uid || uid;\n    if(!this._watchers) this._watchers = [];\n    if(Array.isArray(uid)){\n      for(var i =0, len = uid.length; i < len; i++){\n        this.$unwatch(uid[i]);\n      }\n    }else{\n      var watchers = this._watchers, watcher, wlen;\n      if(!uid || !watchers || !(wlen = watchers.length)) return;\n      for(;wlen--;){\n        watcher = watchers[wlen];\n        if(watcher && watcher.id === uid ){\n          watchers.splice(wlen, 1);\n        }\n      }\n    }\n  },\n  $expression: function(value){\n    return this._touchExpr(parseExpression(value))\n  },\n  /**\n   * the whole digest loop ,just like angular, it just a dirty-check loop;\n   * @param  {String} path  now regular process a pure dirty-check loop, but in parse phase, \n   *                  Regular's parser extract the dependencies, in future maybe it will change to dirty-check combine with path-aware update;\n   * @return {Void}   \n   */\n\n  $digest: function(){\n    if(this.$phase === 'digest' || this._mute) return;\n    this.$phase = 'digest';\n    var dirty = false, n =0;\n    while(dirty = this._digest()){\n\n      if((++n) > 20){ // max loop\n        throw 'there may a circular dependencies reaches' \n      }\n    }\n    if( n > 0 && this.$emit) this.$emit(\"$update\");\n    this.$phase = null;\n  },\n  // private digest logic\n  _digest: function(){\n    // if(this.context) return this.context.$digest();\n    // if(this.$emit) this.$emit('digest');\n    var watchers = this._watchers;\n    var dirty = false, children, watcher, watcherDirty;\n    if(watchers && watchers.length){\n      for(var i = 0, len = watchers.length;i < len; i++){\n        watcher = watchers[i];\n        watcherDirty = this._checkSingleWatch(watcher, i);\n        if(watcherDirty) dirty = true;\n      }\n    }\n    // check children's dirty.\n    children = this._children;\n    if(children && children.length){\n      for(var m = 0, mlen = children.length; m < mlen; m++){\n        if(children[m]._digest()) dirty = true;\n      }\n    }\n    return dirty;\n  },\n  // check a single one watcher \n  _checkSingleWatch: function(watcher, i){\n    var dirty = false;\n    if(!watcher) return;\n    if(watcher.test) { //multi \n      var result = watcher.test(this);\n      if(result){\n        dirty = true;\n        watcher.fn.apply(this, result)\n      }\n    }else{\n\n      var now = watcher.get(this);\n      var last = watcher.last;\n      var eq = true;\n\n      if(_.typeOf( now ) === 'object' && watcher.deep){\n        if(!watcher.last){\n           eq = false;\n         }else{\n          for(var j in now){\n            if(watcher.last[j] !== now[j]){\n              eq = false;\n              break;\n            }\n          }\n          if(eq !== false){\n            for(var n in last){\n              if(last[n] !== now[n]){\n                eq = false;\n                break;\n              }\n            }\n          }\n        }\n      }else{\n        eq = _.equals(now, watcher.last);\n      }\n      if(eq === false || watcher.force){ // in some case. if undefined, we must force digest.\n        eq = false;\n        watcher.force = null;\n        dirty = true;\n        watcher.fn.call(this, now, watcher.last);\n        if(typeof now !== 'object'|| watcher.deep){\n          watcher.last = _.clone(now);\n        }else{\n          watcher.last = now;\n        }\n      }else{ // if eq == true\n        if( _.typeOf(eq) === 'array' && eq.length ){\n          watcher.last = _.clone(now);\n          watcher.fn.call(this, now, eq);\n          dirty = true;\n        }else{\n          eq = true;\n        }\n      }\n      // @TODO\n      if(dirty && watcher.once) this._watchers.splice(i, 1);\n\n      return dirty;\n    }\n  },\n\n  /**\n   * **tips**: whatever param you passed in $update, after the function called, dirty-check(digest) phase will enter;\n   * \n   * @param  {Function|String|Expression} path  \n   * @param  {Whatever} value optional, when path is Function, the value is ignored\n   * @return {this}     this \n   */\n  $set: function(path, value){\n    if(path != null){\n      var type = _.typeOf(path);\n      if( type === 'string' || path.type === 'expression' ){\n        path = this.$expression(path);\n        path.set(this, value);\n      }else if(type === 'function'){\n        path.call(this, this.data);\n      }else{\n        for(var i in path) {\n          this.$set(i, path[i])\n        }\n      }\n    }\n  },\n  $get: function(expr)  {\n    return this.$expression(expr).get(this);\n  },\n  $update: function(){\n    this.$set.apply(this, arguments);\n    var rootParent = this;\n\n    do{\n      if(rootParent.data.isolate || !rootParent.$parent) break;\n      rootParent = rootParent.$parent;\n    } while(rootParent)\n\n    rootParent.$digest();\n  },\n  // auto collect watchers for logic-control.\n  _record: function(){\n    if(!this._records) this._records = [];\n    this._records.push([]);\n  },\n  _release: function(){\n    return this._records.pop();\n  }\n}\n\n\n_.extend(Watcher.prototype, methods)\n\n\nWatcher.mixTo = function(obj){\n  obj = typeof obj === \"function\" ? obj.prototype : obj;\n  return _.extend(obj, methods)\n}\n\nmodule.exports = Watcher;","var env =  require(\"./env.js\");\nvar config = require(\"./config\"); \nvar Regular = module.exports = require(\"./Regular.js\");\nvar Parser = Regular.Parser;\nvar Lexer = Regular.Lexer;\n\nif(env.browser){\n    require(\"./directive/base.js\");\n    require(\"./directive/animation.js\");\n    require(\"./module/timeout.js\");\n    Regular.dom = require(\"./dom.js\");\n}\nRegular.env = env;\nRegular.util = require(\"./util.js\");\nRegular.parse = function(str, options){\n  options = options || {};\n\n  if(options.BEGIN || options.END){\n    if(options.BEGIN) config.BEGIN = options.BEGIN;\n    if(options.END) config.END = options.END;\n    Lexer.setup();\n  }\n  var ast = new Parser(str).parse();\n  return !options.stringify? ast : JSON.stringify(ast);\n}\n\n","var Regular = require(\"../Regular.js\");\n\n/**\n * Timeout Module\n * @param {Component} Component \n */\nfunction TimeoutModule(Component){\n\n  Component.implement({\n    /**\n     * just like setTimeout, but will enter digest automately\n     * @param  {Function} fn    \n     * @param  {Number}   delay \n     * @return {Number}   timeoutid\n     */\n    $timeout: function(fn, delay){\n      delay = delay || 0;\n      return setTimeout(function(){\n        fn.call(this);\n        this.$update(); //enter digest\n      }.bind(this), delay);\n    },\n    /**\n     * just like setInterval, but will enter digest automately\n     * @param  {Function} fn    \n     * @param  {Number}   interval \n     * @return {Number}   intervalid\n     */\n    $interval: function(fn, interval){\n      interval = interval || 1000/60;\n      return setInterval(function(){\n        fn.call(this);\n        this.$update(); //enter digest\n      }.bind(this), interval);\n    }\n  });\n}\n\n\nRegular.plugin('timeout', TimeoutModule);\nRegular.plugin('$timeout', TimeoutModule);","var _ = require(\"../util.js\");\nvar config = require(\"../config.js\");\n\n// some custom tag  will conflict with the Lexer progress\nvar conflictTag = {\"}\": \"{\", \"]\": \"[\"}, map1, map2;\n// some macro for lexer\nvar macro = {\n  'NAME': /(?:[:_A-Za-z][-\\.:_0-9A-Za-z]*)/,\n  'IDENT': /[\\$_A-Za-z][_0-9A-Za-z\\$]*/,\n  'SPACE': /[\\r\\n\\f ]/\n}\n\n\nvar test = /a|(b)/.exec(\"a\");\nvar testSubCapure = test && test[1] === undefined? \n  function(str){ return str !== undefined }\n  :function(str){return !!str};\n\nfunction wrapHander(handler){\n  return function(all){\n    return {type: handler, value: all }\n  }\n}\n\nfunction Lexer(input, opts){\n  if(conflictTag[config.END]){\n    this.markStart = conflictTag[config.END];\n    this.markEnd = config.END;\n  }\n\n  this.input = (input||\"\").trim();\n  this.opts = opts || {};\n  this.map = this.opts.mode !== 2?  map1: map2;\n  this.states = [\"INIT\"];\n  if(opts && opts.expression){\n     this.states.push(\"JST\");\n     this.expression = true;\n  }\n}\n\nvar lo = Lexer.prototype\n\n\nlo.lex = function(str){\n  str = (str || this.input).trim();\n  var tokens = [], split, test,mlen, token, state;\n  this.input = str, \n  this.marks = 0;\n  // init the pos index\n  this.index=0;\n  var i = 0;\n  while(str){\n    i++\n    state = this.state();\n    split = this.map[state] \n    test = split.TRUNK.exec(str);\n    if(!test){\n      this.error('Unrecoginized Token');\n    }\n    mlen = test[0].length;\n    str = str.slice(mlen)\n    token = this._process.call(this, test, split, str)\n    if(token) tokens.push(token)\n    this.index += mlen;\n    // if(state == 'TAG' || state == 'JST') str = this.skipspace(str);\n  }\n\n  tokens.push({type: 'EOF'});\n\n  return tokens;\n}\n\nlo.error = function(msg){\n  throw \"Parse Error: \" + msg +  ':\\n' + _.trackErrorPos(this.input, this.index);\n}\n\nlo._process = function(args, split,str){\n  // console.log(args.join(\",\"), this.state())\n  var links = split.links, marched = false, token;\n\n  for(var len = links.length, i=0;i<len ;i++){\n    var link = links[i],\n      handler = link[2],\n      index = link[0];\n    // if(args[6] === '>' && index === 6) console.log('haha')\n    if(testSubCapure(args[index])) {\n      marched = true;\n      if(handler){\n        token = handler.apply(this, args.slice(index, index + link[1]))\n        if(token)  token.pos = this.index;\n      }\n      break;\n    }\n  }\n  if(!marched){ // in ie lt8 . sub capture is \"\" but ont \n    switch(str.charAt(0)){\n      case \"<\":\n        this.enter(\"TAG\");\n        break;\n      default:\n        this.enter(\"JST\");\n        break;\n    }\n  }\n  return token;\n}\nlo.enter = function(state){\n  this.states.push(state)\n  return this;\n}\n\nlo.state = function(){\n  var states = this.states;\n  return states[states.length-1];\n}\n\nlo.leave = function(state){\n  var states = this.states;\n  if(!state || states[states.length-1] === state) states.pop()\n}\n\n\nLexer.setup = function(){\n  macro.END = config.END;\n  macro.BEGIN = config.BEGIN;\n  //\n  map1 = genMap([\n    // INIT\n    rules.ENTER_JST,\n    rules.ENTER_TAG,\n    rules.TEXT,\n\n    //TAG\n    rules.TAG_NAME,\n    rules.TAG_OPEN,\n    rules.TAG_CLOSE,\n    rules.TAG_PUNCHOR,\n    rules.TAG_ENTER_JST,\n    rules.TAG_UNQ_VALUE,\n    rules.TAG_STRING,\n    rules.TAG_SPACE,\n    rules.TAG_COMMENT,\n\n    // JST\n    rules.JST_OPEN,\n    rules.JST_CLOSE,\n    rules.JST_COMMENT,\n    rules.JST_EXPR_OPEN,\n    rules.JST_IDENT,\n    rules.JST_SPACE,\n    rules.JST_LEAVE,\n    rules.JST_NUMBER,\n    rules.JST_PUNCHOR,\n    rules.JST_STRING,\n    rules.JST_COMMENT\n    ])\n\n  // ignored the tag-relative token\n  map2 = genMap([\n    // INIT no < restrict\n    rules.ENTER_JST2,\n    rules.TEXT,\n    // JST\n    rules.JST_COMMENT,\n    rules.JST_OPEN,\n    rules.JST_CLOSE,\n    rules.JST_EXPR_OPEN,\n    rules.JST_IDENT,\n    rules.JST_SPACE,\n    rules.JST_LEAVE,\n    rules.JST_NUMBER,\n    rules.JST_PUNCHOR,\n    rules.JST_STRING,\n    rules.JST_COMMENT\n    ])\n}\n\n\nfunction genMap(rules){\n  var rule, map = {}, sign;\n  for(var i = 0, len = rules.length; i < len ; i++){\n    rule = rules[i];\n    sign = rule[2] || 'INIT';\n    ( map[sign] || (map[sign] = {rules:[], links:[]}) ).rules.push(rule);\n  }\n  return setup(map);\n}\n\nfunction setup(map){\n  var split, rules, trunks, handler, reg, retain, rule;\n  function replaceFn(all, one){\n    return typeof macro[one] === 'string'? \n      _.escapeRegExp(macro[one]) \n      : String(macro[one]).slice(1,-1);\n  }\n\n  for(var i in map){\n\n    split = map[i];\n    split.curIndex = 1;\n    rules = split.rules;\n    trunks = [];\n\n    for(var j = 0,len = rules.length; j<len; j++){\n      rule = rules[j]; \n      reg = rule[0];\n      handler = rule[1];\n\n      if(typeof handler === 'string'){\n        handler = wrapHander(handler);\n      }\n      if(_.typeOf(reg) === 'regexp') reg = reg.toString().slice(1, -1);\n\n      reg = reg.replace(/\\{(\\w+)\\}/g, replaceFn)\n      retain = _.findSubCapture(reg) + 1; \n      split.links.push([split.curIndex, retain, handler]); \n      split.curIndex += retain;\n      trunks.push(reg);\n    }\n    split.TRUNK = new RegExp(\"^(?:(\" + trunks.join(\")|(\") + \"))\")\n  }\n  return map;\n}\n\nvar rules = {\n\n  // 1. INIT\n  // ---------------\n\n  // mode1's JST ENTER RULE\n  ENTER_JST: [/[^\\x00<]*?(?={BEGIN})/, function(all){\n    this.enter('JST');\n    if(all) return {type: 'TEXT', value: all}\n  }],\n\n  // mode2's JST ENTER RULE\n  ENTER_JST2: [/[^\\x00]*?(?={BEGIN})/, function(all){\n    this.enter('JST');\n    if(all) return {type: 'TEXT', value: all}\n  }],\n\n  ENTER_TAG: [/[^\\x00<>]*?(?=<)/, function(all){ \n    this.enter('TAG');\n    if(all) return {type: 'TEXT', value: all}\n  }],\n\n  TEXT: [/[^\\x00]+/, 'TEXT'],\n\n  // 2. TAG\n  // --------------------\n  TAG_NAME: [/{NAME}/, 'NAME', 'TAG'],\n  TAG_UNQ_VALUE: [/[^\\{}&\"'=><`\\r\\n\\f ]+/, 'UNQ', 'TAG'],\n\n  TAG_OPEN: [/<({NAME})\\s*/, function(all, one){\n    return {type: 'TAG_OPEN', value: one}\n  }, 'TAG'],\n  TAG_CLOSE: [/<\\/({NAME})[\\r\\n\\f ]*>/, function(all, one){\n    this.leave();\n    return {type: 'TAG_CLOSE', value: one }\n  }, 'TAG'],\n\n    // mode2's JST ENTER RULE\n  TAG_ENTER_JST: [/(?={BEGIN})/, function(){\n    this.enter('JST');\n  }, 'TAG'],\n\n\n  TAG_PUNCHOR: [/[\\>\\/=&]/, function(all){\n    if(all === '>') this.leave();\n    return {type: all, value: all }\n  }, 'TAG'],\n  TAG_STRING:  [ /'([^']*)'|\"([^\"]*)\"/, function(all, one, two){ //\"'\n    var value = one || two || \"\";\n\n    return {type: 'STRING', value: value}\n  }, 'TAG'],\n\n  TAG_SPACE: [/{SPACE}+/, null, 'TAG'],\n  TAG_COMMENT: [/<\\!--([^\\x00]*?)--\\>/, null ,'TAG'],\n\n  // 3. JST\n  // -------------------\n\n  JST_OPEN: ['{BEGIN}#{SPACE}*({IDENT})', function(all, name){\n    return {\n      type: 'OPEN',\n      value: name\n    }\n  }, 'JST'],\n  JST_LEAVE: [/{END}/, function(all){\n    if(this.markEnd === all && this.expression) return {type: this.markEnd, value: this.markEnd};\n    if(!this.markEnd || !this.marks ){\n      this.firstEnterStart = false;\n      this.leave('JST');\n      return {type: 'END'}\n    }else{\n      this.marks--;\n      return {type: this.markEnd, value: this.markEnd}\n    }\n  }, 'JST'],\n  JST_CLOSE: [/{BEGIN}\\s*\\/({IDENT})\\s*{END}/, function(all, one){\n    this.leave('JST');\n    return {\n      type: 'CLOSE',\n      value: one\n    }\n  }, 'JST'],\n  JST_COMMENT: [/{BEGIN}\\!([^\\x00]*?)\\!{END}/, function(){\n    this.leave();\n  }, 'JST'],\n  JST_EXPR_OPEN: ['{BEGIN}',function(all, one){\n    if(all === this.markStart){\n      if(this.expression) return { type: this.markStart, value: this.markStart };\n      if(this.firstEnterStart || this.marks){\n        this.marks++\n        this.firstEnterStart = false;\n        return { type: this.markStart, value: this.markStart };\n      }else{\n        this.firstEnterStart = true;\n      }\n    }\n    return {\n      type: 'EXPR_OPEN',\n      escape: false\n    }\n\n  }, 'JST'],\n  JST_IDENT: ['{IDENT}', 'IDENT', 'JST'],\n  JST_SPACE: [/[ \\r\\n\\f]+/, null, 'JST'],\n  JST_PUNCHOR: [/[=!]?==|[-=><+*\\/%\\!]?\\=|\\|\\||&&|\\@\\(|\\.\\.|[<\\>\\[\\]\\(\\)\\-\\|\\{}\\+\\*\\/%?:\\.!,]/, function(all){\n    return { type: all, value: all }\n  },'JST'],\n\n  JST_STRING:  [ /'([^']*)'|\"([^\"]*)\"/, function(all, one, two){ //\"'\n    return {type: 'STRING', value: one || two || \"\"}\n  }, 'JST'],\n  JST_NUMBER: [/(?:[0-9]*\\.[0-9]+|[0-9]+)(e\\d+)?/, function(all){\n    return {type: 'NUMBER', value: parseFloat(all, 10)};\n  }, 'JST']\n}\n\n\n// setup when first config\nLexer.setup();\n\n\n\nmodule.exports = Lexer;\n","var _ = require(\"../util.js\");\n\nvar config = require(\"../config.js\");\nvar node = require(\"./node.js\");\nvar Lexer = require(\"./Lexer.js\");\nvar varName = _.varName;\nvar ctxName = _.ctxName;\nvar extName = _.extName;\nvar isPath = _.makePredicate(\"STRING IDENT NUMBER\");\nvar isKeyWord = _.makePredicate(\"true false undefined null this Array Date JSON Math NaN RegExp decodeURI decodeURIComponent encodeURI encodeURIComponent parseFloat parseInt Object\");\n\n\n\n\nfunction Parser(input, opts){\n  opts = opts || {};\n\n  this.input = input;\n  this.tokens = new Lexer(input, opts).lex();\n  this.pos = 0;\n  this.noComputed =  opts.noComputed;\n  this.length = this.tokens.length;\n}\n\n\nvar op = Parser.prototype;\n\n\nop.parse = function(){\n  this.pos = 0;\n  var res= this.program();\n  if(this.ll().type === 'TAG_CLOSE'){\n    this.error(\"You may got a unclosed Tag\")\n  }\n  return res;\n}\n\nop.ll =  function(k){\n  k = k || 1;\n  if(k < 0) k = k + 1;\n  var pos = this.pos + k - 1;\n  if(pos > this.length - 1){\n      return this.tokens[this.length-1];\n  }\n  return this.tokens[pos];\n}\n  // lookahead\nop.la = function(k){\n  return (this.ll(k) || '').type;\n}\n\nop.match = function(type, value){\n  var ll;\n  if(!(ll = this.eat(type, value))){\n    ll  = this.ll();\n    this.error('expect [' + type + (value == null? '':':'+ value) + ']\" -> got \"[' + ll.type + (value==null? '':':'+ll.value) + ']', ll.pos)\n  }else{\n    return ll;\n  }\n}\n\nop.error = function(msg, pos){\n  msg =  \"Parse Error: \" + msg +  ':\\n' + _.trackErrorPos(this.input, typeof pos === 'number'? pos: this.ll().pos||0);\n  throw new Error(msg);\n}\n\nop.next = function(k){\n  k = k || 1;\n  this.pos += k;\n}\nop.eat = function(type, value){\n  var ll = this.ll();\n  if(typeof type !== 'string'){\n    for(var len = type.length ; len--;){\n      if(ll.type === type[len]) {\n        this.next();\n        return ll;\n      }\n    }\n  }else{\n    if( ll.type === type && (typeof value === 'undefined' || ll.value === value) ){\n       this.next();\n       return ll;\n    }\n  }\n  return false;\n}\n\n// program\n//  :EOF\n//  | (statement)* EOF\nop.program = function(){\n  var statements = [],  ll = this.ll();\n  while(ll.type !== 'EOF' && ll.type !=='TAG_CLOSE'){\n\n    statements.push(this.statement());\n    ll = this.ll();\n  }\n  // if(ll.type === 'TAG_CLOSE') this.error(\"You may have unmatched Tag\")\n  return statements;\n}\n\n// statement\n//  : xml\n//  | jst\n//  | text\nop.statement = function(){\n  var ll = this.ll();\n  switch(ll.type){\n    case 'NAME':\n    case 'TEXT':\n      var text = ll.value;\n      this.next();\n      while(ll = this.eat(['NAME', 'TEXT'])){\n        text += ll.value;\n      }\n      return node.text(text);\n    case 'TAG_OPEN':\n      return this.xml();\n    case 'OPEN': \n      return this.directive();\n    case 'EXPR_OPEN':\n      return this.interplation();\n    case 'PART_OPEN':\n      return this.template();\n    default:\n      this.error('Unexpected token: '+ this.la())\n  }\n}\n\n// xml \n// stag statement* TAG_CLOSE?(if self-closed tag)\nop.xml = function(){\n  var name, attrs, children, selfClosed;\n  name = this.match('TAG_OPEN').value;\n  attrs = this.attrs();\n  selfClosed = this.eat('/')\n  this.match('>');\n  if( !selfClosed && !_.isVoidTag(name) ){\n    children = this.program();\n    if(!this.eat('TAG_CLOSE', name)) this.error('expect </'+name+'> got'+ 'no matched closeTag')\n  }\n  return node.element(name, attrs, children);\n}\n\n// xentity\n//  -rule(wrap attribute)\n//  -attribute\n//\n// __example__\n//  name = 1 |  \n//  ng-hide |\n//  on-click={{}} | \n//  {{#if name}}on-click={{xx}}{{#else}}on-tap={{}}{{/if}}\n\nop.xentity = function(ll){\n  var name = ll.value, value;\n  if(ll.type === 'NAME'){\n    if( this.eat(\"=\") ) value = this.attvalue();\n    return node.attribute( name, value );\n  }else{\n    if( name !== 'if') this.error(\"current version. ONLY RULE #if #else #elseif is valid in tag, the rule #\" + name + ' is invalid');\n    return this['if'](true);\n  }\n\n}\n\n// stag     ::=    '<' Name (S attr)* S? '>'  \n// attr    ::=     Name Eq attvalue\nop.attrs = function(isAttribute){\n  var eat\n  if(!isAttribute){\n    eat = [\"NAME\", \"OPEN\"]\n  }else{\n    eat = [\"NAME\"]\n  }\n\n  var attrs = [], ll;\n  while (ll = this.eat(eat)){\n    attrs.push(this.xentity( ll ))\n  }\n  return attrs;\n}\n\n// attvalue\n//  : STRING  \n//  | NAME\nop.attvalue = function(){\n  var ll = this.ll();\n  switch(ll.type){\n    case \"NAME\":\n    case \"UNQ\":\n    case \"STRING\":\n      this.next();\n      var value = ll.value;\n      if(~value.indexOf(config.BEGIN) && ~value.indexOf(config.END)){\n        var constant = true;\n        var parsed = new Parser(value, { mode: 2 }).parse();\n        if(parsed.length === 1 && parsed[0].type === 'expression') return parsed[0];\n        var body = [];\n        parsed.forEach(function(item){\n          if(!item.constant) constant=false;\n          // silent the mutiple inteplation\n            body.push(item.body || \"'\" + item.text.replace(/'/g, \"\\\\'\") + \"'\");        \n        });\n        body = \"[\" + body.join(\",\") + \"].join('')\";\n        value = node.expression(body, null, constant);\n      }\n      return value;\n    case \"EXPR_OPEN\":\n      return this.interplation();\n    default:\n      this.error('Unexpected token: '+ this.la())\n  }\n}\n\n\n// {{#}}\nop.directive = function(){\n  var name = this.ll().value;\n  this.next();\n  if(typeof this[name] === 'function'){\n    return this[name]()\n  }else{\n    this.error('Undefined directive['+ name +']');\n  }\n}\n\n// {{}}\nop.interplation = function(){\n  this.match('EXPR_OPEN');\n  var res = this.expression(true);\n  this.match('END');\n  return res;\n}\n\n// {{~}}\nop.include = function(){\n  var content = this.expression();\n  this.match('END');\n  return node.template(content);\n}\n\n// {{#if}}\nop[\"if\"] = function(tag){\n  var test = this.expression();\n  var consequent = [], alternate=[];\n\n  var container = consequent;\n  var statement = !tag? \"statement\" : \"attrs\";\n\n  this.match('END');\n\n  var ll, close;\n  while( ! (close = this.eat('CLOSE')) ){\n    ll = this.ll();\n    if( ll.type === 'OPEN' ){\n      switch( ll.value ){\n        case 'else':\n          container = alternate;\n          this.next();\n          this.match( 'END' );\n          break;\n        case 'elseif':\n          this.next();\n          alternate.push( this[\"if\"](tag) );\n          return node['if']( test, consequent, alternate );\n        default:\n          container.push( this[statement](true) );\n      }\n    }else{\n      container.push(this[statement](true));\n    }\n  }\n  // if statement not matched\n  if(close.value !== \"if\") this.error('Unmatched if directive')\n  return node[\"if\"](test, consequent, alternate);\n}\n\n\n// @mark   mustache syntax have natrure dis, canot with expression\n// {{#list}}\nop.list = function(){\n  // sequence can be a list or hash\n  var sequence = this.expression(), variable, ll;\n  var consequent = [], alternate=[];\n  var container = consequent;\n\n  this.match('IDENT', 'as');\n\n  variable = this.match('IDENT').value;\n\n  this.match('END');\n\n  while( !(ll = this.eat('CLOSE')) ){\n    if(this.eat('OPEN', 'else')){\n      container =  alternate;\n      this.match('END');\n    }else{\n      container.push(this.statement());\n    }\n  }\n  if(ll.value !== 'list') this.error('expect ' + 'list got ' + '/' + ll.value + ' ', ll.pos );\n  return node.list(sequence, variable, consequent, alternate);\n}\n\n\nop.expression = function(){\n  var expression;\n  if(this.eat('@(')){ //once bind\n    expression = this.expr();\n    expression.once = true;\n    this.match(')')\n  }else{\n    expression = this.expr();\n  }\n  return expression;\n}\n\nop.expr = function(){\n  this.depend = [];\n\n  var buffer = this.filter()\n\n  var body = buffer.get || buffer;\n  var setbody = buffer.set;\n  return node.expression(body, setbody, !this.depend.length);\n}\n\n\n// filter\n// assign ('|' filtername[':' args]) * \nop.filter = function(){\n  var left = this.assign();\n  var ll = this.eat('|');\n  var buffer = [], setBuffer, prefix,\n    attr = \"t\", \n    set = left.set, get, \n    tmp = \"\";\n\n  if(ll){\n    if(set) setBuffer = [];\n\n    prefix = \"(function(\" + attr + \"){\";\n\n    do{\n      tmp = attr + \" = \" + ctxName + \"._f_('\" + this.match('IDENT').value+ \"' ).get.call( \"+_.ctxName +\",\" + attr ;\n      if(this.eat(':')){\n        tmp +=\", \"+ this.arguments(\"|\").join(\",\") + \");\"\n      }else{\n        tmp += ');'\n      }\n      buffer.push(tmp);\n      setBuffer && setBuffer.unshift( tmp.replace(\" ).get.call\", \" ).set.call\") );\n\n    }while(ll = this.eat('|'));\n    buffer.push(\"return \" + attr );\n    setBuffer && setBuffer.push(\"return \" + attr);\n\n    get =  prefix + buffer.join(\"\") + \"})(\"+left.get+\")\";\n    // we call back to value.\n    if(setBuffer){\n      // change _ss__(name, _p_) to _s__(name, filterFn(_p_));\n      set = set.replace(_.setName, \n        prefix + setBuffer.join(\"\") + \"})(\"+　_.setName　+\")\" );\n\n    }\n    // the set function is depend on the filter definition. if it have set method, the set will work\n    return this.getset(get, set);\n  }\n  return left;\n}\n\n// assign\n// left-hand-expr = condition\nop.assign = function(){\n  var left = this.condition(), ll;\n  if(ll = this.eat(['=', '+=', '-=', '*=', '/=', '%='])){\n    if(!left.set) this.error('invalid lefthand expression in assignment expression');\n    return this.getset( left.set.replace( \",\" + _.setName, \",\" + this.condition().get ).replace(\"'='\", \"'\"+ll.type+\"'\"), left.set);\n    // return this.getset('(' + left.get + ll.type  + this.condition().get + ')', left.set);\n  }\n  return left;\n}\n\n// or\n// or ? assign : assign\nop.condition = function(){\n\n  var test = this.or();\n  if(this.eat('?')){\n    return this.getset([test.get + \"?\", \n      this.assign().get, \n      this.match(\":\").type, \n      this.assign().get].join(\"\"));\n  }\n\n  return test;\n}\n\n// and\n// and && or\nop.or = function(){\n\n  var left = this.and();\n\n  if(this.eat('||')){\n    return this.getset(left.get + '||' + this.or().get);\n  }\n\n  return left;\n}\n// equal\n// equal && and\nop.and = function(){\n\n  var left = this.equal();\n\n  if(this.eat('&&')){\n    return this.getset(left.get + '&&' + this.and().get);\n  }\n  return left;\n}\n// relation\n// \n// equal == relation\n// equal != relation\n// equal === relation\n// equal !== relation\nop.equal = function(){\n  var left = this.relation(), ll;\n  // @perf;\n  if( ll = this.eat(['==','!=', '===', '!=='])){\n    return this.getset(left.get + ll.type + this.equal().get);\n  }\n  return left\n}\n// relation < additive\n// relation > additive\n// relation <= additive\n// relation >= additive\n// relation in additive\nop.relation = function(){\n  var left = this.additive(), ll;\n  // @perf\n  if(ll = (this.eat(['<', '>', '>=', '<=']) || this.eat('IDENT', 'in') )){\n    return this.getset(left.get + ll.value + this.relation().get);\n  }\n  return left\n}\n// additive :\n// multive\n// additive + multive\n// additive - multive\nop.additive = function(){\n  var left = this.multive() ,ll;\n  if(ll= this.eat(['+','-']) ){\n    return this.getset(left.get + ll.value + this.additive().get);\n  }\n  return left\n}\n// multive :\n// unary\n// multive * unary\n// multive / unary\n// multive % unary\nop.multive = function(){\n  var left = this.range() ,ll;\n  if( ll = this.eat(['*', '/' ,'%']) ){\n    return this.getset(left.get + ll.type + this.multive().get);\n  }\n  return left;\n}\n\nop.range = function(){\n  var left = this.unary(), ll, right;\n\n  if(ll = this.eat('..')){\n    right = this.unary();\n    var body = \n      \"(function(start,end){var res = [],step=end>start?1:-1; for(var i = start; end>start?i <= end: i>=end; i=i+step){res.push(i); } return res })(\"+left.get+\",\"+right.get+\")\"\n    return this.getset(body);\n  }\n\n  return left;\n}\n\n\n\n// lefthand\n// + unary\n// - unary\n// ~ unary\n// ! unary\nop.unary = function(){\n  var ll;\n  if(ll = this.eat(['+','-','~', '!'])){\n    return this.getset('(' + ll.type + this.unary().get + ')') ;\n  }else{\n    return this.member()\n  }\n}\n\n// call[lefthand] :\n// member args\n// member [ expression ]\n// member . ident  \n\nop.member = function(base, last, pathes, prevBase){\n  var ll, path, extValue;\n\n\n  var onlySimpleAccessor = false;\n  if(!base){ //first\n    path = this.primary();\n    var type = typeof path;\n    if(type === 'string'){ \n      pathes = [];\n      pathes.push( path );\n      last = path;\n      extValue = extName + \".\" + path\n      base = ctxName + \"._sg_('\" + path + \"', \" + varName + \", \" + extName + \")\";\n      onlySimpleAccessor = true;\n    }else{ //Primative Type\n      if(path.get === 'this'){\n        base = ctxName;\n        pathes = ['this'];\n      }else{\n        pathes = null;\n        base = path.get;\n      }\n    }\n  }else{ // not first enter\n    if(typeof last === 'string' && isPath( last) ){ // is valid path\n      pathes.push(last);\n    }else{\n      if(pathes && pathes.length) this.depend.push(pathes);\n      pathes = null;\n    }\n  }\n  if(ll = this.eat(['[', '.', '('])){\n    switch(ll.type){\n      case '.':\n          // member(object, property, computed)\n        var tmpName = this.match('IDENT').value;\n        prevBase = base;\n        if( this.la() !== \"(\" ){ \n          base = ctxName + \"._sg_('\" + tmpName + \"', \" + base + \")\";\n        }else{\n          base += \"['\" + tmpName + \"']\";\n        }\n        return this.member( base, tmpName, pathes,  prevBase);\n      case '[':\n          // member(object, property, computed)\n        path = this.assign();\n        prevBase = base;\n        if( this.la() !== \"(\" ){ \n        // means function call, we need throw undefined error when call function\n        // and confirm that the function call wont lose its context\n          base = ctxName + \"._sg_(\" + path.get + \", \" + base + \")\";\n        }else{\n          base += \"[\" + path.get + \"]\";\n        }\n        this.match(']')\n        return this.member(base, path, pathes, prevBase);\n      case '(':\n        // call(callee, args)\n        var args = this.arguments().join(',');\n        base =  base+\"(\" + args +\")\";\n        this.match(')')\n        return this.member(base, null, pathes);\n    }\n  }\n  if( pathes && pathes.length ) this.depend.push( pathes );\n  var res =  {get: base};\n  if(last){\n    res.set = ctxName + \"._ss_(\" + \n        (last.get? last.get : \"'\"+ last + \"'\") + \n        \",\"+ _.setName + \",\"+ \n        (prevBase?prevBase:_.varName) + \n        \", '=', \"+ ( onlySimpleAccessor? 1 : 0 ) + \")\";\n  \n  }\n  return res;\n}\n\n/**\n * \n */\nop.arguments = function(end){\n  end = end || ')'\n  var args = [];\n  do{\n    if(this.la() !== end){\n      args.push(this.assign().get)\n    }\n  }while( this.eat(','));\n  return args\n}\n\n\n// primary :\n// this \n// ident\n// literal\n// array\n// object\n// ( expression )\n\nop.primary = function(){\n  var ll = this.ll();\n  switch(ll.type){\n    case \"{\":\n      return this.object();\n    case \"[\":\n      return this.array();\n    case \"(\":\n      return this.paren();\n    // literal or ident\n    case 'STRING':\n      this.next();\n      return this.getset(\"'\" + ll.value + \"'\")\n    case 'NUMBER':\n      this.next();\n      return this.getset(\"\"+ll.value);\n    case \"IDENT\":\n      this.next();\n      if(isKeyWord(ll.value)){\n        return this.getset( ll.value );\n      }\n      return ll.value;\n    default: \n      this.error('Unexpected Token: ' + ll.type);\n  }\n}\n\n// object\n//  {propAssign [, propAssign] * [,]}\n\n// propAssign\n//  prop : assign\n\n// prop\n//  STRING\n//  IDENT\n//  NUMBER\n\nop.object = function(){\n  var code = [this.match('{').type];\n\n  var ll = this.eat( ['STRING', 'IDENT', 'NUMBER'] );\n  while(ll){\n    code.push(\"'\" + ll.value + \"'\" + this.match(':').type);\n    var get = this.assign().get;\n    code.push(get);\n    ll = null;\n    if(this.eat(\",\") && (ll = this.eat(['STRING', 'IDENT', 'NUMBER'])) ) code.push(\",\");\n  }\n  code.push(this.match('}').type);\n  return {get: code.join(\"\")}\n}\n\n// array\n// [ assign[,assign]*]\nop.array = function(){\n  var code = [this.match('[').type], item;\n  if( this.eat(\"]\") ){\n\n     code.push(\"]\");\n  } else {\n    while(item = this.assign()){\n      code.push(item.get);\n      if(this.eat(',')) code.push(\",\");\n      else break;\n    }\n    code.push(this.match(']').type);\n  }\n  return {get: code.join(\"\")};\n}\n\n// '(' expression ')'\nop.paren = function(){\n  this.match('(');\n  var res = this.filter()\n  res.get = '(' + res.get + ')';\n  this.match(')');\n  return res;\n}\n\nop.getset = function(get, set){\n  return {\n    get: get,\n    set: set\n  }\n}\n\n\n\nmodule.exports = Parser;\n","module.exports = {\n  element: function(name, attrs, children){\n    return {\n      type: 'element',\n      tag: name,\n      attrs: attrs,\n      children: children\n    }\n  },\n  attribute: function(name, value){\n    return {\n      type: 'attribute',\n      name: name,\n      value: value\n    }\n  },\n  \"if\": function(test, consequent, alternate){\n    return {\n      type: 'if',\n      test: test,\n      consequent: consequent,\n      alternate: alternate\n    }\n  },\n  list: function(sequence, variable, body){\n    return {\n      type: 'list',\n      sequence: sequence,\n      variable: variable,\n      body: body\n    }\n  },\n  expression: function( body, setbody, constant ){\n    return {\n      type: \"expression\",\n      body: body,\n      constant: constant || false,\n      setbody: setbody || false\n    }\n  },\n  text: function(text){\n    return {\n      type: \"text\",\n      text: text\n    }\n  },\n  template: function(template){\n    return {\n      type: 'template',\n      content: template\n    }\n  }\n}\n","require('./helper/shim.js');\nvar _  = module.exports;\nvar entities = require('./helper/entities.js');\nvar slice = [].slice;\nvar o2str = ({}).toString;\nvar win = typeof window !=='undefined'? window: global;\n\n\n_.noop = function(){};\n_.uid = (function(){\n  var _uid=0;\n  return function(){\n    return _uid++;\n  }\n})();\n\n_.varName = 'd';\n_.setName = 'p_';\n_.ctxName = 'c';\n_.extName = 'e';\n\n_.rWord = /^[\\$\\w]+$/;\n_.rSimpleAccessor = /^[\\$\\w]+(\\.[\\$\\w]+)*$/;\n\n_.nextTick = typeof setImmediate === 'function'? \n  setImmediate.bind(win) : \n  function(callback) {\n    setTimeout(callback, 0) \n  }\n\n\n\n_.prefix = \"var \" + _.varName + \"=\" + _.ctxName + \".data;\" +  _.extName  + \"=\" + _.extName + \"||'';\";\n\n\n_.slice = function(obj, start, end){\n  var res = [];\n  for(var i = start || 0, len = end || obj.length; i < len; i++){\n    var item = obj[i];\n    res.push(item)\n  }\n  return res;\n}\n\n_.typeOf = function (o) {\n  return o == null ? String(o) : o2str.call(o).slice(8, -1).toLowerCase();\n}\n\n\n_.extend = function( o1, o2, override ){\n  if(_.typeOf(override) === 'array'){\n   for(var i = 0, len = override.length; i < len; i++ ){\n    var key = override[i];\n    o1[key] = o2[key];\n   } \n  }else{\n    for(var i in o2){\n      if( typeof o1[i] === \"undefined\" || override === true ){\n        o1[i] = o2[i]\n      }\n    }\n  }\n  return o1;\n}\n\n_.makePredicate = function makePredicate(words, prefix) {\n    if (typeof words === \"string\") {\n        words = words.split(\" \");\n    }\n    var f = \"\",\n    cats = [];\n    out: for (var i = 0; i < words.length; ++i) {\n        for (var j = 0; j < cats.length; ++j){\n          if (cats[j][0].length === words[i].length) {\n              cats[j].push(words[i]);\n              continue out;\n          }\n        }\n        cats.push([words[i]]);\n    }\n    function compareTo(arr) {\n        if (arr.length === 1) return f += \"return str === '\" + arr[0] + \"';\";\n        f += \"switch(str){\";\n        for (var i = 0; i < arr.length; ++i){\n           f += \"case '\" + arr[i] + \"':\";\n        }\n        f += \"return true}return false;\";\n    }\n\n    // When there are more than three length categories, an outer\n    // switch first dispatches on the lengths, to save on comparisons.\n    if (cats.length > 3) {\n        cats.sort(function(a, b) {\n            return b.length - a.length;\n        });\n        f += \"switch(str.length){\";\n        for (var i = 0; i < cats.length; ++i) {\n            var cat = cats[i];\n            f += \"case \" + cat[0].length + \":\";\n            compareTo(cat);\n        }\n        f += \"}\";\n\n        // Otherwise, simply generate a flat `switch` statement.\n    } else {\n        compareTo(words);\n    }\n    return new Function(\"str\", f);\n}\n\n\n_.trackErrorPos = (function (){\n  // linebreak\n  var lb = /\\r\\n|[\\n\\r\\u2028\\u2029]/g;\n  function findLine(lines, pos){\n    var tmpLen = 0;\n    for(var i = 0,len = lines.length; i < len; i++){\n      var lineLen = (lines[i] || \"\").length;\n      if(tmpLen + lineLen > pos) return {num: i, line: lines[i], start: pos - tmpLen};\n      // 1 is for the linebreak\n      tmpLen = tmpLen + lineLen + 1;\n    }\n    \n  }\n  return function(input, pos){\n    if(pos > input.length-1) pos = input.length-1;\n    lb.lastIndex = 0;\n    var lines = input.split(lb);\n    var line = findLine(lines,pos);\n    var len = line.line.length;\n\n    var min = line.start - 10;\n    if(min < 0) min = 0;\n\n    var max = line.start + 10;\n    if(max > len) max = len;\n\n    var remain = line.line.slice(min, max);\n    var prefix = (line.num+1) + \"> \" + (min > 0? \"...\" : \"\")\n    var postfix = max < len ? \"...\": \"\";\n\n    return prefix + remain + postfix + \"\\n\" + new Array(line.start + prefix.length + 1).join(\" \") + \"^\";\n  }\n})();\n\n\nvar ignoredRef = /\\((\\?\\!|\\?\\:|\\?\\=)/g;\n_.findSubCapture = function (regStr) {\n  var left = 0,\n    right = 0,\n    len = regStr.length,\n    ignored = regStr.match(ignoredRef); // ignored uncapture\n  if(ignored) ignored = ignored.length\n  else ignored = 0;\n  for (; len--;) {\n    var letter = regStr.charAt(len);\n    if (len === 0 || regStr.charAt(len - 1) !== \"\\\\\" ) { \n      if (letter === \"(\") left++;\n      if (letter === \")\") right++;\n    }\n  }\n  if (left !== right) throw \"RegExp: \"+ regStr + \"'s bracket is not marched\";\n  else return left - ignored;\n};\n\n\n_.escapeRegExp = function( str){// Credit: XRegExp 0.6.1 (c) 2007-2008 Steven Levithan <http://stevenlevithan.com/regex/xregexp/> MIT License\n  return str.replace(/[-[\\]{}()*+?.\\\\^$|,#\\s]/g, function(match){\n    return '\\\\' + match;\n  });\n};\n\n\nvar rEntity = new RegExp(\"&(\" + Object.keys(entities).join('|') + ');', 'gi');\n\n_.convertEntity = function(chr){\n\n  return (\"\" + chr).replace(rEntity, function(all, capture){\n    return String.fromCharCode(entities[capture])\n  });\n\n}\n\n\n// simple get accessor\n\n_.createObject = function(o, props){\n    function Foo() {}\n    Foo.prototype = o;\n    var res = new Foo;\n    if(props) _.extend(res, props);\n    return res;\n}\n\n_.createProto = function(fn, o){\n    function Foo() { this.constructor = fn;}\n    Foo.prototype = o;\n    return (fn.prototype = new Foo());\n}\n\n\n/**\nclone\n*/\n_.clone = function clone(obj){\n    var type = _.typeOf(obj);\n    if(type === 'array'){\n      var cloned = [];\n      for(var i=0,len = obj.length; i< len;i++){\n        cloned[i] = obj[i]\n      }\n      return cloned;\n    }\n    if(type === 'object'){\n      var cloned = {};\n      for(var i in obj) if(obj.hasOwnProperty(i)){\n        cloned[i] = obj[i];\n      }\n      return cloned;\n    }\n    return obj;\n  }\n\n\n_.equals = function(now, old){\n  if( Array.isArray(now) ){\n    var splices = ld(now, old||[]);\n    return splices;\n  }\n  var type = typeof now;\n  if(type === 'number' && typeof old === 'number'&& isNaN(now) && isNaN(old)) return true\n  return now === old;\n}\n\n\n//Levenshtein_distance\n//=================================================\n//1. http://en.wikipedia.org/wiki/Levenshtein_distance\n//2. github.com:polymer/observe-js\n\nvar ld = (function(){\n  function equals(a,b){\n    return a === b;\n  }\n  function ld(array1, array2){\n    var n = array1.length;\n    var m = array2.length;\n    var matrix = [];\n    for(var i = 0; i <= n; i++){\n      matrix.push([i]);\n    }\n    for(var j=1;j<=m;j++){\n      matrix[0][j]=j;\n    }\n    for(var i = 1; i <= n; i++){\n      for(var j = 1; j <= m; j++){\n        if(equals(array1[i-1], array2[j-1])){\n          matrix[i][j] = matrix[i-1][j-1];\n        }else{\n          matrix[i][j] = Math.min(\n            matrix[i-1][j]+1, //delete\n            matrix[i][j-1]+1//add\n            )\n        }\n      }\n    }\n    return matrix;\n  }\n  function whole(arr2, arr1) {\n      var matrix = ld(arr1, arr2)\n      var n = arr1.length;\n      var i = n;\n      var m = arr2.length;\n      var j = m;\n      var edits = [];\n      var current = matrix[i][j];\n      while(i>0 || j>0){\n      // the last line\n        if (i === 0) {\n          edits.unshift(3);\n          j--;\n          continue;\n        }\n        // the last col\n        if (j === 0) {\n          edits.unshift(2);\n          i--;\n          continue;\n        }\n        var northWest = matrix[i - 1][j - 1];\n        var west = matrix[i - 1][j];\n        var north = matrix[i][j - 1];\n\n        var min = Math.min(north, west, northWest);\n\n        if (min === west) {\n          edits.unshift(2); //delete\n          i--;\n          current = west;\n        } else if (min === northWest ) {\n          if (northWest === current) {\n            edits.unshift(0); //no change\n          } else {\n            edits.unshift(1); //update\n            current = northWest;\n          }\n          i--;\n          j--;\n        } else {\n          edits.unshift(3); //add\n          j--;\n          current = north;\n        }\n      }\n      var LEAVE = 0;\n      var ADD = 3;\n      var DELELE = 2;\n      var UPDATE = 1;\n      var n = 0;m=0;\n      var steps = [];\n      var step = {index: null, add:0, removed:[]};\n\n      for(var i=0;i<edits.length;i++){\n        if(edits[i] > 0 ){ // NOT LEAVE\n          if(step.index === null){\n            step.index = m;\n          }\n        } else { //LEAVE\n          if(step.index != null){\n            steps.push(step)\n            step = {index: null, add:0, removed:[]};\n          }\n        }\n        switch(edits[i]){\n          case LEAVE:\n            n++;\n            m++;\n            break;\n          case ADD:\n            step.add++;\n            m++;\n            break;\n          case DELELE:\n            step.removed.push(arr1[n])\n            n++;\n            break;\n          case UPDATE:\n            step.add++;\n            step.removed.push(arr1[n])\n            n++;\n            m++;\n            break;\n        }\n      }\n      if(step.index != null){\n        steps.push(step)\n      }\n      return steps\n    }\n    return whole;\n  })();\n\n\n\n_.throttle = function throttle(func, wait){\n  var wait = wait || 100;\n  var context, args, result;\n  var timeout = null;\n  var previous = 0;\n  var later = function() {\n    previous = +new Date;\n    timeout = null;\n    result = func.apply(context, args);\n    context = args = null;\n  };\n  return function() {\n    var now = + new Date;\n    var remaining = wait - (now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      clearTimeout(timeout);\n      timeout = null;\n      previous = now;\n      result = func.apply(context, args);\n      context = args = null;\n    } else if (!timeout) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n};\n\n// hogan escape\n// ==============\n_.escape = (function(){\n  var rAmp = /&/g,\n      rLt = /</g,\n      rGt = />/g,\n      rApos = /\\'/g,\n      rQuot = /\\\"/g,\n      hChars = /[&<>\\\"\\']/;\n\n  return function(str) {\n    return hChars.test(str) ?\n      str\n        .replace(rAmp, '&amp;')\n        .replace(rLt, '&lt;')\n        .replace(rGt, '&gt;')\n        .replace(rApos, '&#39;')\n        .replace(rQuot, '&quot;') :\n      str;\n  }\n})();\n\n_.cache = function(max){\n  max = max || 1000;\n  var keys = [],\n      cache = {};\n  return {\n    set: function(key, value) {\n      if (keys.length > this.max) {\n        cache[keys.shift()] = undefined;\n      }\n      // \n      if(cache[key] === undefined){\n        keys.push(key);\n      }\n      cache[key] = value;\n      return value;\n    },\n    get: function(key) {\n      if (key === undefined) return cache;\n      return cache[key];\n    },\n    max: max,\n    len:function(){\n      return keys.length;\n    }\n  };\n}\n\n// // setup the raw Expression\n// _.touchExpression = function(expr){\n//   if(expr.type === 'expression'){\n//   }\n//   return expr;\n// }\n\n\n// handle the same logic on component's `on-*` and element's `on-*`\n// return the fire object\n_.handleEvent = function(value, type ){\n  var self = this, evaluate;\n  if(value.type === 'expression'){ // if is expression, go evaluated way\n    evaluate = value.get;\n  }\n  if(evaluate){\n    return function fire(obj){\n      self.data.$event = obj;\n      var res = evaluate(self);\n      if(res === false && obj && obj.preventDefault) obj.preventDefault();\n      self.data.$event = undefined;\n      self.$update();\n    }\n  }else{\n    return function fire(){\n      var args = slice.call(arguments)      \n      args.unshift(value);\n      self.$emit.apply(self, args);\n      self.$update();\n    }\n  }\n}\n\n// only call once\n_.once = function(fn){\n  var time = 0;\n  return function(){\n    if( time++ === 0) fn.apply(this, arguments);\n  }\n}\n\n\n\n_.log = function(msg, type){\n  if(typeof console !== \"undefined\")  console[type || \"log\"](msg);\n}\n\n\n\n\n//http://www.w3.org/html/wg/drafts/html/master/single-page.html#void-elements\n_.isVoidTag = _.makePredicate(\"area base br col embed hr img input keygen link menuitem meta param source track wbr r-content\");\n_.isBooleanAttr = _.makePredicate('selected checked disabled readOnly required open autofocus controls autoplay compact loop defer multiple');\n\n_.isFalse - function(){return false}\n_.isTrue - function(){return true}\n\n\n_.assert = function(test, msg){\n  if(!test) throw msg;\n}\n\n","var node = require(\"./parser/node.js\");\nvar dom = require(\"./dom.js\");\nvar animate = require(\"./helper/animate.js\");\nvar Group = require('./group.js');\nvar _ = require('./util');\nvar combine = require('./helper/combine.js');\n\nvar walkers = module.exports = {};\n\nwalkers.list = function(ast, options){\n\n  var Regular = walkers.Regular;  \n  var placeholder = document.createComment(\"Regular list\"),\n    namespace = options.namespace,\n    extra = options.extra;\n  var self = this;\n  var group = new Group();\n  group.push(placeholder);\n  var indexName = ast.variable + '_index';\n  var variable = ast.variable;\n\n  function update(newValue, splices){\n    if(!newValue) {\n      newValue = [];\n      splices = _.equals(newValue, splices);\n    }\n    \n    if(!splices || !splices.length) return;\n    var cur = placeholder;\n    var m = 0, len = newValue.length,\n      mIndex = splices[0].index;\n\n    for(var i = 0; i < splices.length; i++){ //init\n      var splice = splices[i];\n      var index = splice.index; // beacuse we use a comment for placeholder\n\n      for(var k = m; k < index; k++){ // no change\n        var sect = group.get( k + 1 );\n        sect.data[indexName] = k;\n      }\n      for(var j = 0, jlen = splice.removed.length; j< jlen; j++){ //removed\n        var removed = group.children.splice( index + 1, 1)[0];\n        removed.destroy(true);\n      }\n\n      for(var o = index; o < index + splice.add; o++){ //add\n        // prototype inherit\n        var item = newValue[o];\n        var data = {};\n        data[indexName] = o;\n        data[variable] = item;\n\n        _.extend(data, extra);\n        var section = self.$compile(ast.body, {\n          extra: data,\n          namespace:namespace,\n          record: true,\n          outer: options.outer\n        })\n        section.data = data;\n        // autolink\n        var insert =  combine.last(group.get(o));\n        if(insert.parentNode){\n          animate.inject(combine.node(section),insert, 'after');\n        }\n        // insert.parentNode.insertBefore(combine.node(section), insert.nextSibling);\n        group.children.splice( o + 1 , 0, section);\n      }\n      m = index + splice.add - splice.removed.length;\n      m  = m < 0? 0 : m;\n\n    }\n    if(m < len){\n      for(var i = m; i < len; i++){\n        var pair = group.get(i + 1);\n        pair.data[indexName] = i;\n      }\n    }\n  }\n\n  this.$watch(ast.sequence, update, { init: true });\n  return group;\n}\n// {#include }\nwalkers.template = function(ast, options){\n  var content = ast.content, compiled;\n  var placeholder = document.createComment('inlcude');\n  var compiled, namespace = options.namespace, extra = options.extra;\n  // var fragment = dom.fragment();\n  // fragment.appendChild(placeholder);\n  var group = new Group();\n  group.push(placeholder);\n  if(content){\n    var self = this;\n    this.$watch(content, function(value){\n      if( compiled = group.get(1)){\n        compiled.destroy(true); \n        group.children.pop();\n      }\n      group.push( compiled =  self.$compile(value, {record: true, outer: options.outer,namespace: namespace, extra: extra}) ); \n      if(placeholder.parentNode) animate.inject(combine.node(compiled), placeholder, 'before')\n    }, {\n      init: true\n    });\n  }\n  return group;\n};\n\n\n// how to resolve this problem\nvar ii = 0;\nwalkers['if'] = function(ast, options){\n  var self = this, consequent, alternate, extra = options.extra;\n  if(options && options.element){ // attribute inteplation\n    var update = function(nvalue){\n      if(!!nvalue){\n        if(alternate) combine.destroy(alternate)\n        if(ast.consequent) consequent = self.$compile(ast.consequent, {record: true, element: options.element , extra:extra});\n      }else{\n        if(consequent) combine.destroy(consequent)\n        if(ast.alternate) alternate = self.$compile(ast.alternate, {record: true, element: options.element, extra: extra});\n      }\n    }\n    this.$watch(ast.test, update, { force: true });\n    return {\n      destroy: function(){\n        if(consequent) combine.destroy(consequent);\n        else if(alternate) combine.destroy(alternate);\n      }\n    }\n  }\n\n  var test, consequent, alternate, node;\n  var placeholder = document.createComment(\"Regular if\" + ii++);\n  var group = new Group();\n  group.push(placeholder);\n  var preValue = null, namespace= options.namespace;\n\n\n  var update = function (nvalue, old){\n    var value = !!nvalue;\n    if(value === preValue) return;\n    preValue = value;\n    if(group.children[1]){\n      group.children[1].destroy(true);\n      group.children.pop();\n    }\n    if(value){ //true\n      if(ast.consequent && ast.consequent.length){\n        consequent = self.$compile( ast.consequent , {record:true, outer: options.outer,namespace: namespace, extra:extra })\n        // placeholder.parentNode && placeholder.parentNode.insertBefore( node, placeholder );\n        group.push(consequent);\n        if(placeholder.parentNode){\n          animate.inject(combine.node(consequent), placeholder, 'before');\n        }\n      }\n    }else{ //false\n      if(ast.alternate && ast.alternate.length){\n        alternate = self.$compile(ast.alternate, {record:true, outer: options.outer,namespace: namespace, extra:extra});\n        group.push(alternate);\n        if(placeholder.parentNode){\n          animate.inject(combine.node(alternate), placeholder, 'before');\n        }\n      }\n    }\n  }\n  this.$watch(ast.test, update, {force: true, init: true});\n\n  return group;\n}\n\n\nwalkers.expression = function(ast, options){\n  var node = document.createTextNode(\"\");\n  this.$watch(ast, function(newval){\n    dom.text(node, \"\" + (newval == null? \"\": \"\" + newval) );\n  })\n  return node;\n}\nwalkers.text = function(ast, options){\n  var node = document.createTextNode(_.convertEntity(ast.text));\n  return node;\n}\n\n\n\nvar eventReg = /^on-(.+)$/\n\n/**\n * walkers element (contains component)\n */\nwalkers.element = function(ast, options){\n  var attrs = ast.attrs, \n    component, self = this,\n    Constructor=this.constructor,\n    children = ast.children,\n    namespace = options.namespace, ref, group, \n    extra = options.extra,\n    isolate = 0,\n    Component = Constructor.component(ast.tag);\n\n\n  if(ast.tag === 'svg') namespace = \"svg\";\n\n\n\n\n  if(Component){\n    var data = {},events;\n    for(var i = 0, len = attrs.length; i < len; i++){\n      var attr = attrs[i];\n      var value = this._touchExpr(attr.value || \"\");\n      \n      var name = attr.name;\n      var etest = name.match(eventReg);\n      // bind event proxy\n      if(etest){\n        events = events || {};\n        events[etest[1]] = _.handleEvent.call(this, value, etest[1]);\n        continue;\n      }\n\n      if(value.type !== 'expression'){\n        data[attr.name] = value;\n      }else{\n        data[attr.name] = value.get(self); \n      }\n      if( attr.name === 'ref'  && value != null){\n        ref = value.type === 'expression'? value.get(self): value;\n      }\n      if( attr.name === 'isolate'){\n        // 1: stop: composite -> parent\n        // 2. stop: composite <- parent\n        // 3. stop 1 and 2: composite <-> parent\n        // 0. stop nothing (defualt)\n        isolate = value.type === 'expression'? value.get(self): parseInt(value || 3, 10);\n        data.isolate = isolate;\n      }\n\n\n    }\n\n    var config = { \n      data: data, \n      events: events, \n      $parent: this,\n      $outer: options.outer,\n      namespace: namespace, \n      $root: this.$root,\n      $body: ast.children\n    }\n\n    var component = new Component(config);\n    if(ref &&  self.$refs) self.$refs[ref] = component;\n    for(var i = 0, len = attrs.length; i < len; i++){\n      var attr = attrs[i];\n      var value = attr.value||\"\";\n      if(value.type === 'expression' && attr.name.indexOf('on-')===-1){\n        value = self._touchExpr(value);\n        // use bit operate to control scope\n        if( !(isolate & 2) ) \n          this.$watch(value, component.$update.bind(component, attr.name))\n        if( value.set && !(isolate & 1 ) ) \n          // sync the data. it force the component don't trigger attr.name's first dirty echeck\n          component.$watch(attr.name, self.$update.bind(self, value), {sync: true});\n      }\n    }\n    if(ref){\n      component.$on('destroy', function(){\n        if(self.$refs) self.$refs[ref] = null;\n      })\n    }\n    return component;\n  }\n  else if( ast.tag === 'r-content' && this._getTransclude ){\n    return this._getTransclude();\n  }\n  \n  if(children && children.length){\n    group = this.$compile(children, {outer: options.outer,namespace: namespace, extra: extra });\n  }\n\n  var element = dom.create(ast.tag, namespace, attrs);\n  // context element\n\n  var child;\n\n  if(group && !_.isVoidTag(ast.tag)){\n    dom.inject( combine.node(group) , element)\n  }\n\n  // sort before\n  attrs.sort(function(a1, a2){\n    var d1 = Constructor.directive(a1.name),\n      d2 = Constructor.directive(a2.name);\n    if(d1 && d2) return (d2.priority || 1) - (d1.priority || 1);\n    if(d1) return 1;\n    if(d2) return -1;\n    if(a2.name === \"type\") return 1;\n    return -1;\n  })\n  // may distinct with if else\n  var destroies = walkAttributes.call(this, attrs, element, extra);\n\n\n\n  var res  = {\n    type: \"element\",\n    group: group,\n    node: function(){\n      return element;\n    },\n    last: function(){\n      return element;\n    },\n    destroy: function(first){\n      if( first ){\n        animate.remove( element, group? group.destroy.bind( group ): _.noop );\n      }else if(group) {\n        group.destroy();\n      }\n      // destroy ref\n      if( destroies.length ) {\n        destroies.forEach(function( destroy ){\n          if( destroy ){\n            if( typeof destroy.destroy === 'function' ){\n              destroy.destroy()\n            }else{\n              destroy();\n            }\n          }\n        })\n      }\n    }\n  }\n  return res;\n}\n\nfunction walkAttributes(attrs, element, extra){\n  var bindings = []\n  for(var i = 0, len = attrs.length; i < len; i++){\n    var binding = this._walk(attrs[i], {element: element, fromElement: true, attrs: attrs, extra: extra})\n    if(binding) bindings.push(binding);\n  }\n  return bindings;\n}\n\nwalkers.attribute = function(ast ,options){\n  var attr = ast;\n  var Component = this.constructor;\n  var self = this;\n  var element = options.element;\n  var name = attr.name,\n    value = attr.value || \"\", directive = Component.directive(name);\n\n  value = this._touchExpr(value);\n\n\n  if(directive && directive.link){\n    var binding = directive.link.call(self, element, value, name, options.attrs);\n    if(typeof binding === 'function') binding = {destroy: binding}; \n    return binding;\n  }else{\n    if( name === 'ref'  && value != null && options.fromElement){\n      var ref = value.type === 'expression'? value.get(self): value;\n      var refs = this.$refs;\n      if(refs){\n        refs[ref] = element\n        return {\n          destroy: function(){\n            refs[ref] = null;\n          }\n        }\n      }\n    }\n    if(value.type === 'expression' ){\n\n      this.$watch(value, function(nvalue, old){\n        dom.attr(element, name, nvalue);\n      }, {init: true});\n    }else{\n      if(_.isBooleanAttr(name)){\n        dom.attr(element, name, true);\n      }else{\n        dom.attr(element, name, value);\n      }\n    }\n    if(!options.fromElement){\n      return {\n        destroy: function(){\n          dom.attr(element, name, null);\n        }\n      }\n    }\n  }\n\n}\n\n","/*!\n  * Reqwest! A general purpose XHR connection manager\n  * license MIT (c) Dustin Diaz 2014\n  * https://github.com/ded/reqwest\n  */\n\n!function (name, context, definition) {\n  if (typeof module != 'undefined' && module.exports) module.exports = definition()\n  else if (typeof define == 'function' && define.amd) define(definition)\n  else context[name] = definition()\n}('reqwest', this, function () {\n\n  var win = window\n    , doc = document\n    , httpsRe = /^http/\n    , protocolRe = /(^\\w+):\\/\\//\n    , twoHundo = /^(20\\d|1223)$/ //http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n    , byTag = 'getElementsByTagName'\n    , readyState = 'readyState'\n    , contentType = 'Content-Type'\n    , requestedWith = 'X-Requested-With'\n    , head = doc[byTag]('head')[0]\n    , uniqid = 0\n    , callbackPrefix = 'reqwest_' + (+new Date())\n    , lastValue // data stored by the most recent JSONP callback\n    , xmlHttpRequest = 'XMLHttpRequest'\n    , xDomainRequest = 'XDomainRequest'\n    , noop = function () {}\n\n    , isArray = typeof Array.isArray == 'function'\n        ? Array.isArray\n        : function (a) {\n            return a instanceof Array\n          }\n\n    , defaultHeaders = {\n          'contentType': 'application/x-www-form-urlencoded'\n        , 'requestedWith': xmlHttpRequest\n        , 'accept': {\n              '*':  'text/javascript, text/html, application/xml, text/xml, */*'\n            , 'xml':  'application/xml, text/xml'\n            , 'html': 'text/html'\n            , 'text': 'text/plain'\n            , 'json': 'application/json, text/javascript'\n            , 'js':   'application/javascript, text/javascript'\n          }\n      }\n\n    , xhr = function(o) {\n        // is it x-domain\n        if (o['crossOrigin'] === true) {\n          var xhr = win[xmlHttpRequest] ? new XMLHttpRequest() : null\n          if (xhr && 'withCredentials' in xhr) {\n            return xhr\n          } else if (win[xDomainRequest]) {\n            return new XDomainRequest()\n          } else {\n            throw new Error('Browser does not support cross-origin requests')\n          }\n        } else if (win[xmlHttpRequest]) {\n          return new XMLHttpRequest()\n        } else {\n          return new ActiveXObject('Microsoft.XMLHTTP')\n        }\n      }\n    , globalSetupOptions = {\n        dataFilter: function (data) {\n          return data\n        }\n      }\n\n  function succeed(r) {\n    var protocol = protocolRe.exec(r.url);\n    protocol = (protocol && protocol[1]) || window.location.protocol;\n    return httpsRe.test(protocol) ? twoHundo.test(r.request.status) : !!r.request.response;\n  }\n\n  function handleReadyState(r, success, error) {\n    return function () {\n      // use _aborted to mitigate against IE err c00c023f\n      // (can't read props on aborted request objects)\n      if (r._aborted) return error(r.request)\n      if (r._timedOut) return error(r.request, 'Request is aborted: timeout')\n      if (r.request && r.request[readyState] == 4) {\n        r.request.onreadystatechange = noop\n        if (succeed(r)) success(r.request)\n        else\n          error(r.request)\n      }\n    }\n  }\n\n  function setHeaders(http, o) {\n    var headers = o['headers'] || {}\n      , h\n\n    headers['Accept'] = headers['Accept']\n      || defaultHeaders['accept'][o['type']]\n      || defaultHeaders['accept']['*']\n\n    var isAFormData = typeof FormData === 'function' && (o['data'] instanceof FormData);\n    // breaks cross-origin requests with legacy browsers\n    if (!o['crossOrigin'] && !headers[requestedWith]) headers[requestedWith] = defaultHeaders['requestedWith']\n    if (!headers[contentType] && !isAFormData) headers[contentType] = o['contentType'] || defaultHeaders['contentType']\n    for (h in headers)\n      headers.hasOwnProperty(h) && 'setRequestHeader' in http && http.setRequestHeader(h, headers[h])\n  }\n\n  function setCredentials(http, o) {\n    if (typeof o['withCredentials'] !== 'undefined' && typeof http.withCredentials !== 'undefined') {\n      http.withCredentials = !!o['withCredentials']\n    }\n  }\n\n  function generalCallback(data) {\n    lastValue = data\n  }\n\n  function urlappend (url, s) {\n    return url + (/\\?/.test(url) ? '&' : '?') + s\n  }\n\n  function handleJsonp(o, fn, err, url) {\n    var reqId = uniqid++\n      , cbkey = o['jsonpCallback'] || 'callback' // the 'callback' key\n      , cbval = o['jsonpCallbackName'] || reqwest.getcallbackPrefix(reqId)\n      , cbreg = new RegExp('((^|\\\\?|&)' + cbkey + ')=([^&]+)')\n      , match = url.match(cbreg)\n      , script = doc.createElement('script')\n      , loaded = 0\n      , isIE10 = navigator.userAgent.indexOf('MSIE 10.0') !== -1\n\n    if (match) {\n      if (match[3] === '?') {\n        url = url.replace(cbreg, '$1=' + cbval) // wildcard callback func name\n      } else {\n        cbval = match[3] // provided callback func name\n      }\n    } else {\n      url = urlappend(url, cbkey + '=' + cbval) // no callback details, add 'em\n    }\n\n    win[cbval] = generalCallback\n\n    script.type = 'text/javascript'\n    script.src = url\n    script.async = true\n    if (typeof script.onreadystatechange !== 'undefined' && !isIE10) {\n      // need this for IE due to out-of-order onreadystatechange(), binding script\n      // execution to an event listener gives us control over when the script\n      // is executed. See http://jaubourg.net/2010/07/loading-script-as-onclick-handler-of.html\n      script.htmlFor = script.id = '_reqwest_' + reqId\n    }\n\n    script.onload = script.onreadystatechange = function () {\n      if ((script[readyState] && script[readyState] !== 'complete' && script[readyState] !== 'loaded') || loaded) {\n        return false\n      }\n      script.onload = script.onreadystatechange = null\n      script.onclick && script.onclick()\n      // Call the user callback with the last value stored and clean up values and scripts.\n      fn(lastValue)\n      lastValue = undefined\n      head.removeChild(script)\n      loaded = 1\n    }\n\n    // Add the script to the DOM head\n    head.appendChild(script)\n\n    // Enable JSONP timeout\n    return {\n      abort: function () {\n        script.onload = script.onreadystatechange = null\n        err({}, 'Request is aborted: timeout', {})\n        lastValue = undefined\n        head.removeChild(script)\n        loaded = 1\n      }\n    }\n  }\n\n  function getRequest(fn, err) {\n    var o = this.o\n      , method = (o['method'] || 'GET').toUpperCase()\n      , url = typeof o === 'string' ? o : o['url']\n      // convert non-string objects to query-string form unless o['processData'] is false\n      , data = (o['processData'] !== false && o['data'] && typeof o['data'] !== 'string')\n        ? reqwest.toQueryString(o['data'])\n        : (o['data'] || null)\n      , http\n      , sendWait = false\n\n    // if we're working on a GET request and we have data then we should append\n    // query string to end of URL and not post data\n    if ((o['type'] == 'jsonp' || method == 'GET') && data) {\n      url = urlappend(url, data)\n      data = null\n    }\n\n    if (o['type'] == 'jsonp') return handleJsonp(o, fn, err, url)\n\n    // get the xhr from the factory if passed\n    // if the factory returns null, fall-back to ours\n    http = (o.xhr && o.xhr(o)) || xhr(o)\n\n    http.open(method, url, o['async'] === false ? false : true)\n    setHeaders(http, o)\n    setCredentials(http, o)\n    if (win[xDomainRequest] && http instanceof win[xDomainRequest]) {\n        http.onload = fn\n        http.onerror = err\n        // NOTE: see\n        // http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/30ef3add-767c-4436-b8a9-f1ca19b4812e\n        http.onprogress = function() {}\n        sendWait = true\n    } else {\n      http.onreadystatechange = handleReadyState(this, fn, err)\n    }\n    o['before'] && o['before'](http)\n    if (sendWait) {\n      setTimeout(function () {\n        http.send(data)\n      }, 200)\n    } else {\n      http.send(data)\n    }\n    return http\n  }\n\n  function Reqwest(o, fn) {\n    this.o = o\n    this.fn = fn\n\n    init.apply(this, arguments)\n  }\n\n  function setType(header) {\n    // json, javascript, text/plain, text/html, xml\n    if (header.match('json')) return 'json'\n    if (header.match('javascript')) return 'js'\n    if (header.match('text')) return 'html'\n    if (header.match('xml')) return 'xml'\n  }\n\n  function init(o, fn) {\n\n    this.url = typeof o == 'string' ? o : o['url']\n    this.timeout = null\n\n    // whether request has been fulfilled for purpose\n    // of tracking the Promises\n    this._fulfilled = false\n    // success handlers\n    this._successHandler = function(){}\n    this._fulfillmentHandlers = []\n    // error handlers\n    this._errorHandlers = []\n    // complete (both success and fail) handlers\n    this._completeHandlers = []\n    this._erred = false\n    this._responseArgs = {}\n\n    var self = this\n\n    fn = fn || function () {}\n\n    if (o['timeout']) {\n      this.timeout = setTimeout(function () {\n        timedOut()\n      }, o['timeout'])\n    }\n\n    if (o['success']) {\n      this._successHandler = function () {\n        o['success'].apply(o, arguments)\n      }\n    }\n\n    if (o['error']) {\n      this._errorHandlers.push(function () {\n        o['error'].apply(o, arguments)\n      })\n    }\n\n    if (o['complete']) {\n      this._completeHandlers.push(function () {\n        o['complete'].apply(o, arguments)\n      })\n    }\n\n    function complete (resp) {\n      o['timeout'] && clearTimeout(self.timeout)\n      self.timeout = null\n      while (self._completeHandlers.length > 0) {\n        self._completeHandlers.shift()(resp)\n      }\n    }\n\n    function success (resp) {\n      var type = o['type'] || resp && setType(resp.getResponseHeader('Content-Type')) // resp can be undefined in IE\n      resp = (type !== 'jsonp') ? self.request : resp\n      // use global data filter on response text\n      var filteredResponse = globalSetupOptions.dataFilter(resp.responseText, type)\n        , r = filteredResponse\n      try {\n        resp.responseText = r\n      } catch (e) {\n        // can't assign this in IE<=8, just ignore\n      }\n      if (r) {\n        switch (type) {\n        case 'json':\n          try {\n            resp = win.JSON ? win.JSON.parse(r) : eval('(' + r + ')')\n          } catch (err) {\n            return error(resp, 'Could not parse JSON in response', err)\n          }\n          break\n        case 'js':\n          resp = eval(r)\n          break\n        case 'html':\n          resp = r\n          break\n        case 'xml':\n          resp = resp.responseXML\n              && resp.responseXML.parseError // IE trololo\n              && resp.responseXML.parseError.errorCode\n              && resp.responseXML.parseError.reason\n            ? null\n            : resp.responseXML\n          break\n        }\n      }\n\n      self._responseArgs.resp = resp\n      self._fulfilled = true\n      fn(resp)\n      self._successHandler(resp)\n      while (self._fulfillmentHandlers.length > 0) {\n        resp = self._fulfillmentHandlers.shift()(resp)\n      }\n\n      complete(resp)\n    }\n\n    function timedOut() {\n      self._timedOut = true\n      self.request.abort()      \n    }\n\n    function error(resp, msg, t) {\n      resp = self.request\n      self._responseArgs.resp = resp\n      self._responseArgs.msg = msg\n      self._responseArgs.t = t\n      self._erred = true\n      while (self._errorHandlers.length > 0) {\n        self._errorHandlers.shift()(resp, msg, t)\n      }\n      complete(resp)\n    }\n\n    this.request = getRequest.call(this, success, error)\n  }\n\n  Reqwest.prototype = {\n    abort: function () {\n      this._aborted = true\n      this.request.abort()\n    }\n\n  , retry: function () {\n      init.call(this, this.o, this.fn)\n    }\n\n    /**\n     * Small deviation from the Promises A CommonJs specification\n     * http://wiki.commonjs.org/wiki/Promises/A\n     */\n\n    /**\n     * `then` will execute upon successful requests\n     */\n  , then: function (success, fail) {\n      success = success || function () {}\n      fail = fail || function () {}\n      if (this._fulfilled) {\n        this._responseArgs.resp = success(this._responseArgs.resp)\n      } else if (this._erred) {\n        fail(this._responseArgs.resp, this._responseArgs.msg, this._responseArgs.t)\n      } else {\n        this._fulfillmentHandlers.push(success)\n        this._errorHandlers.push(fail)\n      }\n      return this\n    }\n\n    /**\n     * `always` will execute whether the request succeeds or fails\n     */\n  , always: function (fn) {\n      if (this._fulfilled || this._erred) {\n        fn(this._responseArgs.resp)\n      } else {\n        this._completeHandlers.push(fn)\n      }\n      return this\n    }\n\n    /**\n     * `fail` will execute when the request fails\n     */\n  , fail: function (fn) {\n      if (this._erred) {\n        fn(this._responseArgs.resp, this._responseArgs.msg, this._responseArgs.t)\n      } else {\n        this._errorHandlers.push(fn)\n      }\n      return this\n    }\n  , 'catch': function (fn) {\n      return this.fail(fn)\n    }\n  }\n\n  function reqwest(o, fn) {\n    return new Reqwest(o, fn)\n  }\n\n  // normalize newline variants according to spec -> CRLF\n  function normalize(s) {\n    return s ? s.replace(/\\r?\\n/g, '\\r\\n') : ''\n  }\n\n  function serial(el, cb) {\n    var n = el.name\n      , t = el.tagName.toLowerCase()\n      , optCb = function (o) {\n          // IE gives value=\"\" even where there is no value attribute\n          // 'specified' ref: http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-862529273\n          if (o && !o['disabled'])\n            cb(n, normalize(o['attributes']['value'] && o['attributes']['value']['specified'] ? o['value'] : o['text']))\n        }\n      , ch, ra, val, i\n\n    // don't serialize elements that are disabled or without a name\n    if (el.disabled || !n) return\n\n    switch (t) {\n    case 'input':\n      if (!/reset|button|image|file/i.test(el.type)) {\n        ch = /checkbox/i.test(el.type)\n        ra = /radio/i.test(el.type)\n        val = el.value\n        // WebKit gives us \"\" instead of \"on\" if a checkbox has no value, so correct it here\n        ;(!(ch || ra) || el.checked) && cb(n, normalize(ch && val === '' ? 'on' : val))\n      }\n      break\n    case 'textarea':\n      cb(n, normalize(el.value))\n      break\n    case 'select':\n      if (el.type.toLowerCase() === 'select-one') {\n        optCb(el.selectedIndex >= 0 ? el.options[el.selectedIndex] : null)\n      } else {\n        for (i = 0; el.length && i < el.length; i++) {\n          el.options[i].selected && optCb(el.options[i])\n        }\n      }\n      break\n    }\n  }\n\n  // collect up all form elements found from the passed argument elements all\n  // the way down to child elements; pass a '<form>' or form fields.\n  // called with 'this'=callback to use for serial() on each element\n  function eachFormElement() {\n    var cb = this\n      , e, i\n      , serializeSubtags = function (e, tags) {\n          var i, j, fa\n          for (i = 0; i < tags.length; i++) {\n            fa = e[byTag](tags[i])\n            for (j = 0; j < fa.length; j++) serial(fa[j], cb)\n          }\n        }\n\n    for (i = 0; i < arguments.length; i++) {\n      e = arguments[i]\n      if (/input|select|textarea/i.test(e.tagName)) serial(e, cb)\n      serializeSubtags(e, [ 'input', 'select', 'textarea' ])\n    }\n  }\n\n  // standard query string style serialization\n  function serializeQueryString() {\n    return reqwest.toQueryString(reqwest.serializeArray.apply(null, arguments))\n  }\n\n  // { 'name': 'value', ... } style serialization\n  function serializeHash() {\n    var hash = {}\n    eachFormElement.apply(function (name, value) {\n      if (name in hash) {\n        hash[name] && !isArray(hash[name]) && (hash[name] = [hash[name]])\n        hash[name].push(value)\n      } else hash[name] = value\n    }, arguments)\n    return hash\n  }\n\n  // [ { name: 'name', value: 'value' }, ... ] style serialization\n  reqwest.serializeArray = function () {\n    var arr = []\n    eachFormElement.apply(function (name, value) {\n      arr.push({name: name, value: value})\n    }, arguments)\n    return arr\n  }\n\n  reqwest.serialize = function () {\n    if (arguments.length === 0) return ''\n    var opt, fn\n      , args = Array.prototype.slice.call(arguments, 0)\n\n    opt = args.pop()\n    opt && opt.nodeType && args.push(opt) && (opt = null)\n    opt && (opt = opt.type)\n\n    if (opt == 'map') fn = serializeHash\n    else if (opt == 'array') fn = reqwest.serializeArray\n    else fn = serializeQueryString\n\n    return fn.apply(null, args)\n  }\n\n  reqwest.toQueryString = function (o, trad) {\n    var prefix, i\n      , traditional = trad || false\n      , s = []\n      , enc = encodeURIComponent\n      , add = function (key, value) {\n          // If value is a function, invoke it and return its value\n          value = ('function' === typeof value) ? value() : (value == null ? '' : value)\n          s[s.length] = enc(key) + '=' + enc(value)\n        }\n    // If an array was passed in, assume that it is an array of form elements.\n    if (isArray(o)) {\n      for (i = 0; o && i < o.length; i++) add(o[i]['name'], o[i]['value'])\n    } else {\n      // If traditional, encode the \"old\" way (the way 1.3.2 or older\n      // did it), otherwise encode params recursively.\n      for (prefix in o) {\n        if (o.hasOwnProperty(prefix)) buildParams(prefix, o[prefix], traditional, add)\n      }\n    }\n\n    // spaces should be + according to spec\n    return s.join('&').replace(/%20/g, '+')\n  }\n\n  function buildParams(prefix, obj, traditional, add) {\n    var name, i, v\n      , rbracket = /\\[\\]$/\n\n    if (isArray(obj)) {\n      // Serialize array item.\n      for (i = 0; obj && i < obj.length; i++) {\n        v = obj[i]\n        if (traditional || rbracket.test(prefix)) {\n          // Treat each array item as a scalar.\n          add(prefix, v)\n        } else {\n          buildParams(prefix + '[' + (typeof v === 'object' ? i : '') + ']', v, traditional, add)\n        }\n      }\n    } else if (obj && obj.toString() === '[object Object]') {\n      // Serialize object item.\n      for (name in obj) {\n        buildParams(prefix + '[' + name + ']', obj[name], traditional, add)\n      }\n\n    } else {\n      // Serialize scalar item.\n      add(prefix, obj)\n    }\n  }\n\n  reqwest.getcallbackPrefix = function () {\n    return callbackPrefix\n  }\n\n  // jQuery and Zepto compatibility, differences can be remapped here so you can call\n  // .ajax.compat(options, callback)\n  reqwest.compat = function (o, fn) {\n    if (o) {\n      o['type'] && (o['method'] = o['type']) && delete o['type']\n      o['dataType'] && (o['type'] = o['dataType'])\n      o['jsonpCallback'] && (o['jsonpCallbackName'] = o['jsonpCallback']) && delete o['jsonpCallback']\n      o['jsonp'] && (o['jsonpCallback'] = o['jsonp'])\n    }\n    return new Reqwest(o, fn)\n  }\n\n  reqwest.ajaxSetup = function (options) {\n    options = options || {}\n    for (var k in options) {\n      globalSetupOptions[k] = options[k]\n    }\n  }\n\n  return reqwest\n});\n","'use strict';\n\nvar Regular = require(\"regularjs\");\nvar filter = require(\"./filter.js\");\n\nvar dom = Regular.dom; \n\nvar Component = Regular.extend({\n\t// request\n\t$request: function(){}\n})\n.filter(filter)\n.directive({\n\t// if expression evaluated to true then addClass z-crt.\n\t// otherwise, remove it\n\t// <li z-crt={this.$state.current.name==='app.test.exam.choice'}>\n\t\"z-crt\": function(elem, value){\n\tthis.$watch(value, function(val){\n\t\tdom[val? 'addClass': 'delClass'](elem, 'z-crt');\n\t})\n\t},\n\t\"q-render\": function(elem, value){\n\tthis.$watch(value, function(val){\n\t\tif(val) elem.innerHTML = qs.render(val)\n\t})\n\t}\n})\n\nmodule.exports = Component;","'use strict';\n\nvar filter = {};\n\nfilter.format = function() {\n    function fix(str) {\n        str = '' + (String(str) || '');\n        return str.length <= 1? '0' + str : str;\n    }\n    var maps = {\n        'yyyy': function(date){return date.getFullYear()},\n        'MM': function(date){return fix(date.getMonth() + 1); },\n        'dd': function(date){ return fix(date.getDate()) },\n        'HH': function(date){return fix(date.getHours()) },\n        'mm': function(date){ return fix(date.getMinutes())},\n        'ss': function(date){ return fix(date.getSeconds())}\n    }\n\n    var trunk = new RegExp(Object.keys(maps).join('|'),'g');\n    return function(value, format){\n        if(!value){return '';}\n        format = format || 'yyyy-MM-dd HH:mm';\n        value = new Date(value);\n\n        return format.replace(trunk, function(capture){\n            return maps[capture]? maps[capture](value): '';\n        });\n    }\n}();\n\nfilter.average = function(array, key) {\n    array = array || [];\n    return array.length? filter.total(array, key) / array.length : 0;\n}\nfilter.total = function(array, key) {\n    var total = 0;\n    if(!array) return;\n    array.forEach(function( item ){\n        total += key? item[key] : item;\n    })\n    return total;\n}\n\nfilter.filter = function(array, filterFn) {\n    if(!array || !array.length) return;\n    return array.filter(function(item, index){\n        return filterFn(item, index);\n    })\n}\n\nmodule.exports = filter;","'use strict';\n\nvar reqwest = require('reqwest');\nvar request = {};\n//var Progress = require('../component/progress/progress.rglc');\n//var progress = new Progress();\nrequest.request = function(opt) {\n  var noop = function(){};\n  var olderror = opt.error || noop,\n      oldsuccess = opt.success || noop;\n\n  if(opt.method && opt.method.toLowerCase() === 'post'){\n    opt.contentType = 'application/json'\n  }\n\n  if(opt.contentType === 'application/json' || opt.headers && opt.headers.contentType === 'application/json') {\n    opt.data = JSON.stringify(opt.data);\n  }\n  if(!opt.method || opt.method === 'get') {\n    if(opt.data) opt.data.timestamp = +new Date;\n    else opt.data = {timestamp: +new Date}\n  }\n  //opt.progress && progress.start();\n  opt.success = function(json) {\n    //opt.progress && progress.end();\n    oldsuccess.apply(this, arguments);\n    //router.go('app.forbidden');\n  }\n  opt.error = function(json) {\n    //opt.progress && progress.end(true);\n    olderror.apply(this, arguments);\n  }\n  reqwest(opt);\n}\n\nmodule.exports = request;","'use strict';\n\nvar Component = require('./component.js');\nvar _ = require('./util.js');\n\n/**\n * @class SourceComponent\n * @extend Component\n * @param {object}                  options.service                 数据服务\n */\nvar SourceComponent = Component.extend({\n    service: null,\n    /**\n     * @protected\n     */\n    config: function() {\n        _.extend(this.data, {\n            source: []\n        });\n\n        if(this.data.service)\n            this.service = this.data.service;\n\n        if(this.service)\n            this.$updateSource();\n\n        this.supr();\n    },\n    /**\n     * @method getParams 返回请求时需要的参数\n     * @protected\n     * @return {object}\n     */\n    getParams: function() {\n        return {};\n    },\n    /**\n     * @method $updateSource 从service中更新数据源\n     * @public\n     * @return {SourceComponent} this\n     */\n    $updateSource: function() {\n        this.service.getList(this.getParams(), function(data) {\n            if(data.code != 200 && !data.success)\n                return alert(data.result);\n\n            this.$update('source', data.result);\n        }.bind(this));\n        return this;\n    }\n});\n\nmodule.exports = SourceComponent;","'use strict';\n\nvar Regular = require('regularjs');\n\nvar _ = {\n    extend: function(o1, o2, override) {\n        for(var i in o2)\n            if(override || o1[i] === undefined)\n                o1[i] = o2[i]\n        return o1;\n    },\n    dom: Regular.dom,\n    multiline: function(func) {\n        var reg = /^function\\s*\\(\\)\\s*\\{\\s*\\/\\*+\\s*([\\s\\S]*)\\s*\\*+\\/\\s*\\}$/;\n        return reg.exec(func)[1];\n    }\n}\n\nmodule.exports = _;","module.exports=\"\"","/**\n * ------------------------------------------------------------\n * Editor    编辑器\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\n'use strict';\n\nvar Component = require('../base/component.js');\nvar template = require('./editor.html');\nvar _ = require('../base/util.js');\n\n/**\n * @class Editor\n * @extend Component\n * @param {object}                  options.data                    绑定属性 | Binding Properties\n * @param {string='提示'}           options.data.title              对话框标题 | Title of Dialog\n * @param {string=''}               options.data.content            对话框内容\n * @param {string|boolean=true}     options.data.okButton           是否显示确定按钮。值为`string`时显示该段文字。\n * @param {string|boolean=false}    options.data.cancelButton       是否显示取消按钮。值为`string`时显示该段文字。\n * @param {number=null}             options.data.width              对话框宽度。值为否定时宽度为CSS设置的宽度。\n * @param {function}                options.ok                      当点击确定的时候执行\n * @param {function}                options.cancel                  当点击取消的时候执行\n */\nvar Editor = Component.extend({\n    name: 'modal',\n    template: template,\n    /**\n     * @protected\n     */\n    config: function() {\n        _.extend(this.data, {\n            title: '提示',\n            content: '',\n            okButton: true,\n            cancelButton: false,\n            width: null\n        });\n        this.supr();\n    },\n    /**\n     * @protected\n     */\n    init: function() {\n        this.supr();\n        // 证明不是内嵌组件\n        if(this.$root === this)\n            this.$inject(document.body);\n    },\n    /**\n     * @method close(result) 关闭模态对话框\n     * @public\n     * @param  {boolean} result 点击确定还是取消\n     * @return {void}\n     */\n    close: function(result) {\n        /**\n         * @event close 关闭对话框时触发\n         * @property {boolean} result 点击了确定还是取消\n         */\n        this.$emit('close', {\n            result: result\n        });\n        result ? this.ok() : this.cancel();\n        this.destroy();\n    },\n    /**\n     * @override\n     */\n    ok: function() {\n        /**\n         * @event ok 确定对话框时触发\n         */\n        this.$emit('ok');\n    },\n    /**\n     * @override\n     */\n    cancel: function() {\n        /**\n         * @event close 取消对话框时触发\n         */\n        this.$emit('cancel');\n    }\n});\n\nmodule.exports = Editor;\n","module.exports=\"<div class=\\\"m-editor\\\">    <div class=\\\"editor_preview\\\" r-html={this.getHTML()}></div>    <ul class=\\\"m-toolbar\\\">        <li><a title=\\\"加粗\\\"><i class=\\\"u-icon u-icon-bold\\\"></i></a></li>        <li><a title=\\\"斜体\\\"><i class=\\\"u-icon u-icon-italic\\\"></i></a></li>        <li class=\\\"seperator\\\"></li>        <li><a title=\\\"引用\\\"><i class=\\\"u-icon u-icon-quote\\\"></i></a></li>        <li><a title=\\\"无序列表\\\"><i class=\\\"u-icon u-icon-list-ul\\\"></i></a></li>        <li><a title=\\\"有序列表\\\"><i class=\\\"u-icon u-icon-list-ol\\\"></i></a></li>        <li class=\\\"seperator\\\"></li>        <li><a title=\\\"链接\\\"><i class=\\\"u-icon u-icon-link\\\"></i></a></li>        <li><a title=\\\"图片\\\"><i class=\\\"u-icon u-icon-image\\\"></i></a></li>        <li><a title=\\\"公式\\\">∑</a></li>    </ul>    <textarea class=\\\"editor_textarea\\\" r-model={content}></textarea></div>\"","/**\n * ------------------------------------------------------------\n * MarkEditor 编辑器\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\n'use strict';\n\nvar Component = require('../base/component.js');\nvar template = require('./markEditor.html');\nvar _ = require('../base/util.js');\n\nvar marked = require('marked');\n\n/**\n * @class MarkEditor\n * @extend Component\n * @param {object}                  options.data                    绑定属性 | Binding Properties\n * @param {string='提示'}           options.data.title              对话框标题 | Title of Dialog\n * @param {string=''}               options.data.content            编辑器内容\n * @param {string|boolean=true}     options.data.okButton           是否显示确定按钮。值为`string`时显示该段文字。\n * @param {string|boolean=false}    options.data.cancelButton       是否显示取消按钮。值为`string`时显示该段文字。\n * @param {number=null}             options.data.width              对话框宽度。值为否定时宽度为CSS设置的宽度。\n * @param {function}                options.ok                      当点击确定的时候执行\n * @param {function}                options.cancel                  当点击取消的时候执行\n */\nvar MarkEditor = Component.extend({\n    name: 'markEditor',\n    template: template,\n    /**\n     * @protected\n     */\n    config: function() {\n        _.extend(this.data, {\n            content: ''\n        });\n        this.supr();\n    },\n    getHTML: function() {\n        return marked(this.data.content);\n    }\n    /**\n     * @protected\n     */\n    // init: function() {\n    //     this.supr();\n    // }\n});\n\nmodule.exports = MarkEditor;\n","module.exports=\"<div class=\\\"m-modal {@(class)}\\\">    <div class=\\\"modal_dialog\\\" {#if width}style=\\\"width: {width}px\\\"{/if}>        <div class=\\\"modal_hd\\\">            <a class=\\\"modal_close\\\" on-click={this.close(!cancelButton)}><i class=\\\"u-icon u-icon-close\\\"></i></a>            <h3 class=\\\"modal_title\\\">{title}</h3>        </div>        <div class=\\\"modal_bd\\\">            {content}        </div>        <div class=\\\"modal_ft\\\">            {#if okButton}            <button class=\\\"u-btn u-btn-primary\\\" on-click={this.close(true)}>{okButton === true ? \\'确定\\' : okButton}</button>            {/if}            {#if cancelButton}            <button class=\\\"u-btn\\\" on-click={this.close(false)}>{cancelButton === true ? \\'取消\\' : cancelButton}</button>            {/if}        </div>    </div></div>\"","/**\n * ------------------------------------------------------------\n * Modal     模态对话框\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\n'use strict';\n\nvar Component = require('../base/component.js');\nvar template = require('./modal.html');\nvar _ = require('../base/util.js');\n\n/**\n * @class Modal\n * @extend Component\n * @param {object}                  options.data                    绑定属性 | Binding Properties\n * @param {string='提示'}           options.data.title              对话框标题 | Title of Dialog\n * @param {string=''}               options.data.content            对话框内容\n * @param {string|boolean=true}     options.data.okButton           是否显示确定按钮。值为`string`时显示该段文字。\n * @param {string|boolean=false}    options.data.cancelButton       是否显示取消按钮。值为`string`时显示该段文字。\n * @param {number=null}             options.data.width              对话框宽度。值为否定时宽度为CSS设置的宽度。\n * @param {string=''}               options.data.class              补充class\n * @param {function}                options.ok                      当点击确定的时候执行\n * @param {function}                options.cancel                  当点击取消的时候执行\n */\nvar Modal = Component.extend({\n    name: 'modal',\n    template: template,\n    /**\n     * @protected\n     */\n    config: function() {\n        _.extend(this.data, {\n            title: '提示',\n            content: '',\n            okButton: true,\n            cancelButton: false,\n            width: null\n        });\n        this.supr();\n    },\n    /**\n     * @protected\n     */\n    init: function() {\n        this.supr();\n        // 证明不是内嵌组件\n        if(this.$root === this)\n            this.$inject(document.body);\n    },\n    /**\n     * @method close(result) 关闭模态对话框\n     * @public\n     * @param  {boolean} result 点击确定还是取消\n     * @return {void}\n     */\n    close: function(result) {\n        /**\n         * @event close 关闭对话框时触发\n         * @property {boolean} result 点击了确定还是取消\n         */\n        this.$emit('close', {\n            result: result\n        });\n        result ? this.ok() : this.cancel();\n        this.destroy();\n    },\n    /**\n     * @override\n     */\n    ok: function() {\n        /**\n         * @event ok 确定对话框时触发\n         */\n        this.$emit('ok');\n    },\n    /**\n     * @override\n     */\n    cancel: function() {\n        /**\n         * @event close 取消对话框时触发\n         */\n        this.$emit('cancel');\n    }\n});\n\n/**\n * @method alert([content][,title]) 弹出一个alert对话框。关闭时始终触发确定事件。\n * @static\n * @param  {string=''} content 对话框内容\n * @param  {string='提示'} title 对话框标题\n * @return {void}\n */\nModal.alert = function(content, title) {\n    var modal = new Modal({\n        data: {\n            content: content,\n            title: title\n        }\n    });\n    return modal;\n}\n\n/**\n * @method confirm([content][,title]) 弹出一个confirm对话框\n * @static\n * @param  {string=''} content 对话框内容\n * @param  {string='提示'} title 对话框标题\n * @return {void}\n */\nModal.confirm = function(content, title) {\n    var modal = new Modal({\n        data: {\n            content: content,\n            title: title,\n            cancelButton: true\n        }\n    });\n    return modal;\n}\n\nmodule.exports = Modal;\n","module.exports=\"<ul class=\\\"m-pager {@(class)}\\\">    <li class=\\\"pager_prev\\\" r-class={ {\\'z-dis\\' : current <= 1} } on-click={this.select(current - 1)}><a>上一页</a></li>    {#if total - middle > side * 2 + 1}        {#list 1..side as i}        <li r-class={ {\\'z-crt\\': current == i} } on-click={this.select(i)}><a>{i}</a></li>        {/list}        {#if begin > side + 1}<li>...</li>{/if}        {#list begin..end as i}        <li r-class={ {\\'z-crt\\': current == i} } on-click={this.select(i)}><a>{i}</a></li>        {/list}        {#if end < total - side}<li>...</li>{/if}        {#list (total - side + 1)..total as i}        <li r-class={ {\\'z-crt\\': current == i} } on-click={this.select(i)}><a>{i}</a></li>        {/list}    {#else}        {#list 1..total as i}        <li r-class={ {\\'z-crt\\': current == i} } on-click={this.select(i)}><a>{i}</a></li>        {/list}    {/if}    <li class=\\\"pager_next\\\" r-class={ {\\'z-dis\\' : current >= total} } on-click={this.select(current + 1)}><a>下一页</a></li></ul>\"","/**\n * ------------------------------------------------------------\n * Pager     分页\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\nvar Component = require('../base/component.js');\nvar template = require('./pager.html');\nvar _ = require('../base/util.js');\n\n/**\n * @class Pager\n * @extend Component\n * @param {object}                  options.data                    监听数据\n * @param {number=1}                options.data.current            当前页\n * @param {total=11}                options.data.total              总页数\n * @param {middle=5}                options.data.middle             当页数较多时，中间显示的页数\n * @param {side=2}                  options.data.side               当页数较多时，两端各显示的页数\n * @param {boolean=false}           options.data.disabled           是否禁用该组件\n * @param {string=''}               options.data.class              补充class\n */\nvar Pager = Component.extend({\n    name: 'pager',\n    template: template,\n    config: function() {\n        _.extend(this.data, {\n            current: 1,\n            total: 11,\n            middle: 5,\n            side: 2,\n            begin: 1,\n            end: 5,\n            disabled: false\n        });\n        this.supr();\n\n        this.$watch(['current', 'total'], function(current, total) {\n            var show = this.data.middle>>1;\n            var side = this.data.side;\n\n            this.data.begin = current - show;\n            this.data.end = current + show;\n            if(this.data.begin < side + 1)\n                this.data.begin = side + 1;\n            if(this.data.end > total - side)\n                this.data.end = total - side;\n            if(current - this.data.begin <= side)\n                this.data.end = this.data.end + show + this.data.begin - current;\n            if(this.data.end - current <= side)\n                 this.data.begin = this.data.begin - show-current+ this.data.end;\n        });\n    },\n        // var start = ((this.data.total - this.data.middle)>>1) + 1;\n        // var list = [];\n        // for(var i = 0; i < this.data.middle; i++)\n        //     list.push(start + i);\n        // return list;\n    select: function(page) {\n        if(this.data.disabled)\n            return;\n\n        if(page < 1) return;\n        if(page > this.data.total) return;\n        if(page == this.data.current) return;\n\n        this.data.current = page;\n\n        this.$emit('select', {\n            current: this.data.current\n        });\n    }\n});\n\nmodule.exports = Pager;","module.exports=\"<div class=\\\"m-tab {@(class)}\\\">    <ul class=\\\"tab_hd\\\">        {#list source as item}        <li r-class={ {\\'z-crt\\': item == selected, \\'z-dis\\': item.disabled} } on-click={this.select(item)}>{item.name}</li>        {/list}    </ul>    <div class=\\\"tab_bd\\\">        <r-content />    </div></div>\"","/**\n * ------------------------------------------------------------\n * Tab       选项卡\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\n'use strict';\n\nvar Component = require('../base/component.js');\nvar template = require('./tab.html');\nvar _ = require('../base/util.js');\n\n/**\n * @class Tab\n * @extend SourceComponent\n * @param {object}                  options.data                    绑定属性\n * @param {string=''}               options.data.class              补充class\n */\nvar Tab = Component.extend({\n    name: 'tab',\n    template: template,\n    /**\n     * @protected\n     */\n    config: function() {\n        _.extend(this.data, {\n            source: [],\n            selected: null\n        });\n        this.supr();\n    },\n    /**\n     * @method select(item) 选择某一项\n     * @public\n     * @param  {object} item 选择项\n     * @return {void}\n     */\n    select: function(item) {\n        if(item.disabled)\n            return;\n\n        this.data.selected = item;\n        /**\n         * @event select 选择某一项时触发\n         * @property {object} selected 当前选择项\n         */\n        this.$emit('select', {\n            selected: item\n        });\n    }\n});\n\nvar TabPane = Component.extend({\n    name: 'tabPane',\n    template: '<div r-hide={this.$outer.data.selected.tab != this}><r-content></div>',\n    /**\n     * @protected\n     */\n    config: function() { \n        if(this.$outer) {\n            var source = this.$outer.data.source;\n            var item = {\n                name: this.data.name,\n                disabled: this.data.disabled,\n                tab: this\n            };\n            source.push(item);\n\n            if(!this.$outer.data.selected)\n                this.$outer.data.selected = item;\n        }\n    }\n});\n\nmodule.exports = Tab;","module.exports=\"<div class=\\\"u-calendar\\\" r-class={ {\\'z-dis\\': disabled} }>    <div class=\\\"calendar_hd\\\">        <span class=\\\"calendar_prev\\\">            <span class=\\\"calendar_item\\\" on-click={this.addYear(-1)}><i class=\\\"u-icon u-icon-angle-double-left\\\"></i></span>            <span class=\\\"calendar_item\\\" on-click={this.addMonth(-1)}><i class=\\\"u-icon u-icon-angle-left\\\"></i></span>        </span>        <span>{date | format: \\'yyyy-MM\\'}</span>        <span class=\\\"calendar_next\\\">            <span class=\\\"calendar_item\\\" on-click={this.addMonth(1)}><i class=\\\"u-icon u-icon-angle-right\\\"></i></span>            <span class=\\\"calendar_item\\\" on-click={this.addYear(1)}><i class=\\\"u-icon u-icon-angle-double-right\\\"></i></span>        </span>    </div>    <div class=\\\"calendar_bd\\\">        <div class=\\\"calendar_week\\\"><span class=\\\"calendar_item\\\">日</span><span class=\\\"calendar_item\\\">一</span><span class=\\\"calendar_item\\\">二</span><span class=\\\"calendar_item\\\">三</span><span class=\\\"calendar_item\\\">四</span><span class=\\\"calendar_item\\\">五</span><span class=\\\"calendar_item\\\">六</span></div>        <div class=\\\"calendar_day\\\">{#list _days as day}<span class=\\\"calendar_item\\\" r-class={ {\\'z-sel\\': date.toDateString() === day.toDateString(), \\'z-dis\\': day.getMonth() !== date.getMonth()} } on-click={this.select(day)}>{day | format: \\'dd\\'}</span>{/list}</div>    </div></div>\"","/**\n * ------------------------------------------------------------\n * Calendar  日历\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\n'use strict';\n\nvar Component = require('../base/component.js');\nvar template = require('./calendar.html');\nvar _ = require('../base/util.js');\n\n/**\n * @class Calendar\n * @extend Component\n * @param {object}                  options.data                    绑定属性\n * @param {Date=null}               options.data.date               当前选择的日期\n * @param {boolean=false}           options.data.disabled           是否禁用该组件\n */\nvar Calendar = Component.extend({\n    name: 'calendar',\n    template: template,\n    /**\n     * @protected\n     */\n    config: function() {\n        _.extend(this.data, {\n            date: null,\n            disabled: false,\n            _days: []\n        });\n        this.supr();\n\n        this.$watch('date', function(newValue, oldValue) {\n            if(newValue && oldValue && newValue.getFullYear() === oldValue.getFullYear() && newValue.getMonth() === oldValue.getMonth())\n                return;\n\n            this.update();\n        });\n\n        if(!this.data.date)\n            this.goToday();\n    },\n    update: function() {\n        this.data._days = [];\n        \n        var date = this.data.date;\n        var month = date.getMonth();\n        var mfirst = new Date(date); mfirst.setDate(1);\n        var mfirstTime = mfirst.getTime();\n        var nfirst = new Date(mfirst); nfirst.setMonth(month + 1); nfirst.setDate(1);\n        var nfirstTime = nfirst.getTime();\n        var lastTime = nfirstTime + ((7 - nfirst.getDay())%7 - 1)*24*3600*1000;\n        var num = - mfirst.getDay();\n        var tmpTime, tmp;\n        do {\n            tmpTime = mfirstTime + (num++)*24*3600*1000;\n            tmp = new Date(tmpTime);\n            this.data._days.push(tmp);\n        } while(tmpTime < lastTime);\n    },\n    /**\n     * @method addYear(year) 调整年份\n     * @public\n     * @param  {number=0} year 加/减的年份\n     * @return {void}\n     */\n    addYear: function(year) {\n        if(this.data.disabled || !year)\n            return;\n\n        var date = new Date(this.data.date);\n        date.setFullYear(date.getFullYear() + year);\n        this.data.date = date;\n    },\n    /**\n     * @method addMonth(month) 调整月份\n     * @public\n     * @param  {number=0} month 加/减的月份\n     * @return {void}\n     */\n    addMonth: function(month) {\n        if(this.data.disabled || !month)\n            return;\n\n        var date = new Date(this.data.date);\n        date.setMonth(date.getMonth() + month);\n        this.data.date = date;\n    },\n    /**\n     * @method select(date) 选择一个日期\n     * @public\n     * @param  {Date=null} date 选择的日期\n     * @return {void}\n     */\n    select: function(date) {\n        if(this.data.disabled)\n            return;\n\n        this.data.date = new Date(date);\n\n        /**\n         * @event select 选择某一个日期时触发\n         * @property {object} date 当前选择的日期\n         */\n        this.$emit('select', {\n            date: date\n        });\n    },\n    /**\n     * @method goToday() 回到今天\n     * @public\n     * @return {void}\n     */\n    goToday: function() {\n        this.data.date = new Date((new Date().getTime()/(24*3600*1000)>>0)*(24*3600*1000));\n    }\n});\n\nmodule.exports = Calendar;","module.exports=\"<label class=\\\"u-checkex {@(class)}\\\" r-class={ {\\'z-dis\\': disabled, \\'z-chk\\': checked, \\'z-part\\': checked === null, \\'u-checkex-block\\': block} } on-click={this.check(!checked)}><div class=\\\"checkex_box\\\"><i class=\\\"u-icon u-icon-check\\\"></i></div> {name}</label>\"","/**\n * ------------------------------------------------------------\n * CheckEx   多选按钮\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\n'use strict';\n\nvar Component = require('../base/component.js');\nvar template = require('./checkEx.html');\nvar _ = require('../base/util.js');\n\n/**\n * @class CheckEx\n * @extend Component\n * @param {object}                  options.data                    绑定属性\n * @param {string=''}               options.data.name               多选按钮的文字\n * @param {object=null}             options.data.checked            多选按钮的选择状态\n * @param {boolean=false}           options.data.block              是否以block方式显示\n * @param {boolean=false}           options.data.disabled           是否禁用该组件\n * @param {string=''}               options.data.class              补充class\n */\nvar CheckEx = Component.extend({\n    name: 'checkEx',\n    template: template,\n    /**\n     * @protected\n     */\n    config: function() {\n        _.extend(this.data, {\n            name: '',\n            checked: false,\n            block: false,\n            disabled: false\n        });\n        this.supr();\n    },\n    /**\n     * @method check(checked) 改变选中状态\n     * @public\n     * @param  {boolean} checked 选中状态\n     * @return {void}\n     */\n    check: function(checked) {\n        if(this.data.disabled)\n            return;\n\n        this.data.checked = checked;\n        /**\n         * @event check 改变选中状态时触发\n         * @property {boolean} checked 选中状态\n         */\n        this.$emit('check', {\n            checked: checked\n        });\n    }\n});\n\nmodule.exports = CheckEx;","module.exports=\"<div class=\\\"u-unitgroup {@(class)}\\\">    {#list source as item}    <checkEx name={item.name} checked={item.checked} disabled={disabled} block={block} />    {/list}</div>\"","/**\n * ------------------------------------------------------------\n * CheckExGroup 输入扩展\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\n'use strict';\n\nvar CheckGroup = require('./checkGroup.js');\nvar template = require('./checkExGroup.html');\nvar _ = require('../base/util.js');\nvar CheckEx = require('./checkEx.js');\n\n/**\n * @class CheckExGroup\n * @extend CheckGroup\n * @param {object}                  options.data                    绑定属性\n * @param {object[]=[]}             options.data.source             数据源\n * @param {number}                  options.data.source[].id        每项的id\n * @param {string}                  options.data.source[].name      每项的内容\n * @param {boolean=false}           options.data.block              多行显示\n * @param {boolean=false}           options.data.disabled           是否禁用该组件\n * @param {string=''}               options.data.class              补充class\n * @param {object}                  options.service                 数据服务\n */\nvar CheckExGroup = CheckGroup.extend({\n    name: 'checkExGroup',\n    template: template\n});\n\nmodule.exports = CheckExGroup;","module.exports=\"<div class=\\\"u-unitgroup {@(class)}\\\">    {#list source as item}    <label class=\\\"u-checkex\\\" r-class={ {\\'z-dis\\': disabled, \\'u-checkex-block\\': block} }><input type=\\\"checkbox\\\" class=\\\"u-check\\\" r-model={item.checked} disabled={disabled}> {item.name}</label>    {/list}</div>\"","/**\n * ------------------------------------------------------------\n * CheckGroup 多选组\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\n'use strict';\n\nvar SourceComponent = require('../base/sourceComponent.js');\nvar template = require('./checkGroup.html');\nvar _ = require('../base/util.js');\nvar CheckEx = require('./checkEx.js');\n\n/**\n * @class CheckGroup\n * @extend SourceComponent\n * @param {object}                  options.data                    绑定属性\n * @param {object[]=[]}             options.data.source             数据源\n * @param {number}                  options.data.source[].id        每项的id\n * @param {string}                  options.data.source[].name      每项的内容\n * @param {boolean=false}           options.data.block              多行显示\n * @param {boolean=false}           options.data.disabled           是否禁用该组件\n * @param {string=''}               options.data.class              补充class\n * @param {object}                  options.service                 数据服务\n */\nvar CheckGroup = SourceComponent.extend({\n    name: 'checkGroup',\n    template: template,\n    /**\n     * @protected\n     */\n    config: function() {\n        _.extend(this.data, {\n            // @inherited source: [],\n            disabled: false,\n            block: false\n        });\n        this.supr();\n    },\n    /**\n     * @method checkAll(checked) 改变所有多选的选中状态\n     * @public\n     * @param  {object} checked 选中状态\n     * @return {void}\n     */\n    checkAll: function(checked) {\n        this.data.source.forEach(function(item) {\n            item.checked = checked;\n        });\n        this.$update();\n        /**\n         * @event checkAll 改变所有多选的选中状态时触发\n         * @property {object} checked 选中状态\n         */\n        this.$emit('checkAll', {\n            checked: checked\n        });\n    }\n});\n\nmodule.exports = CheckGroup;","module.exports=\"<div class=\\\"u-dropdown u-dropdown-suggest {@(class)}\\\" r-class={ {\\'z-dis\\': disabled} } ref=\\\"element\\\">    <div class=\\\"dropdown_hd\\\">        <input class=\\\"u-input u-input-full\\\" placeholder={placeholder} value={date | format: \\'yyyy-MM-dd\\'} on-focus={this.toggle(true)} on-change={this.change($event)} ref=\\\"input\\\" disabled={disabled} {#if readonly}readonly=\\\"readonly\\\"{/if}>    </div>    <div class=\\\"dropdown_bd\\\" r-hide={!open} r-animation=\\\"on: enter; class: animated fadeInY fast; on: leave; class: animated fadeOutY fast;\\\">        <calendar date={date} on-select={this.select($event.date)} />    </div></div>\"","/**\n * ------------------------------------------------------------\n * DatePicker 日期选择\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\nvar DropDown = require('./dropDown.js');\nvar template = require('./datePicker.html');\nvar _ = require('../base/util.js');\n\nvar filter = require('../base/filter.js');\nvar Calendar = require('./calendar.js');\n\n/**\n * @class DatePicker\n * @extend DropDown\n * @param {object}                  options.data                    绑定属性\n * @param {object=null}             options.data.date               当前选择的日期\n * @param {string='请输入'}         options.data.placeholder        文本框默认文字\n * @param {boolean=false}           options.data.readonly           文本框是否只读\n * @param {boolean=false}           options.data.disabled           是否禁用该组件\n * @param {string=''}               options.data.class              补充class\n */\nvar DatePicker = DropDown.extend({\n    name: 'datePicker',\n    template: template,\n    /**\n     * @protected\n     */\n    config: function() {\n        _.extend(this.data, {\n            // @inherited source: [],\n            // @inherited open: false,\n            placeholder: '请输入',\n            readonly: false,\n            // @inherited disabled: false,\n        });\n        this.supr();\n    },\n    /**\n     * @method select(date) 选择一个日期\n     * @public\n     * @param  {Date=null} date 选择的日期\n     * @return {void}\n     */\n    select: function(date) {\n        /**\n         * @event select 选择某一项时触发\n         * @property {object} date 当前选择项\n         */\n        this.$emit('select', {\n            date: date\n        });\n        this.toggle(false);\n    },\n    change: function($event) {\n        var date = new Date($event.target.value);\n        if(date != 'Invalid Date')\n            this.data.date = date;\n    }\n});\n\nmodule.exports = DatePicker;","module.exports=\"<div class=\\\"u-dropdown u-dropdown-suggest u-dropdown-datetimepicker {@(class)}\\\" r-class={ {\\'z-dis\\': disabled} } ref=\\\"element\\\">    <div class=\\\"dropdown_hd\\\">        <input class=\\\"u-input u-input-full\\\" placeholder={placeholder} value={date | format: \\'yyyy-MM-dd HH:mm\\'} on-focus={this.toggle(true)} on-change={this.change($event)} ref=\\\"input\\\" disabled={disabled} {#if readonly}readonly=\\\"readonly\\\"{/if}>    </div>    <div class=\\\"dropdown_bd\\\" r-hide={!open} r-animation=\\\"on: enter; class: animated fadeInY fast; on: leave; class: animated fadeOutY fast;\\\">        <calendar date={selectedDate} on-select={this.select($event.date)} />        <ul class=\\\"u-listbox\\\">            {#list source as item}            <li on-click={this.select(item)}>{item.name}</li>            {/list}        </ul>    </div></div>\"","/**\n * ------------------------------------------------------------\n * DateTimePicker 日期选择\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\nvar DatePicker = require('./datePicker.js');\nvar template = require('./dateTimePicker.html');\nvar _ = require('../base/util.js');\n\nvar filter = require('../base/filter.js');\n\n/**\n * @class DateTimePicker\n * @extend DatePicker\n * @param {object}                  options.data                    绑定属性\n * @param {object=null}             options.data.date               当前选择的日期\n * @param {string='请输入'}         options.data.placeholder        文本框默认文字\n * @param {boolean=false}           options.data.readonly           文本框是否只读\n * @param {boolean=false}           options.data.disabled           是否禁用该组件\n * @param {string=''}               options.data.class              补充class\n */\nvar DateTimePicker = DatePicker.extend({\n    name: 'dateTimePicker',\n    template: template,\n    config: function() {\n        var source = [];\n        for(var i = 0; i < 10; i++) {\n            source.push({name: '0' + i + ':00'});\n            source.push({name: '0' + i + ':30'});\n        }\n        for(var i = 10; i < 24; i++) {\n            source.push({name: i + ':00'});\n            source.push({name: i + ':30'});\n        }\n        \n        _.extend(this.data, {\n            source: source,\n            // @inherited source: [],\n            // @inherited open: false,\n            // @inherited placeholder: '请输入',\n            // @inherited readonly: false,\n            // @inherited disabled: false,\n            selectedDate: new Date(),\n            selectedTime: ''\n        });\n        this.supr();\n\n        // this.$watch('selected', function(newValue, oldValue) {\n        //     newValue = newValue || new Date();\n        //     this.$refs.calendar.data.selected = newValue;\n\n        //     var time =  filter.format(newValue, newValue.getMinutes()%30 === 0 ? 'HH:mm' : 'HH:00');\n        //     for(var i = 0; i < this.data.source.length; i++) {\n        //         var item = this.data.source[i];   \n        //         if(time === item.name) {\n        //             this.data.selectedTime = item;\n        //             break;\n        //         }\n        //     }\n        // });\n\n        this.$watch(['selectedDate', 'selectedTime'], function(selectedDate, selectedTime) {\n            if(selectedDate && selectedTime) {\n                var date = new Date(this.data.selectedDate);\n                var time = this.data.selectedTime.split(':');\n\n                date.setHours(time[0]);\n                date.setMinutes(time[1]);\n                date.setSeconds(0);\n                date.setMilliseconds(0);\n                \n                this.data.date = date;\n            } else\n                this.data.date = null;\n        });\n    },\n    select: function(item) {\n        /**\n         * @event select 选择某一项时触发\n         * @property {object} date 当前选择项\n         */\n        // this.$emit('select', {\n        //     date: item\n        // });\n\n        if(!(item instanceof Date))\n            this.data.selectedTime = item.name;\n\n        if(!(item instanceof Date) || this.data.selectedTime)\n            this.toggle(false);\n    },\n    change: function($event) {\n        var value = $event.target.value;\n        var date = new Date(value);\n        if(date != 'Invalid Date') {\n            // this.data.date = date;\n            this.data.selectedDate = date;\n            this.data.selectedTime = value.split(' ')[1];\n        }\n    }\n});\n\nmodule.exports = DateTimePicker;","module.exports=\"<div class=\\\"u-dropdown {@(class)}\\\" r-class={ {\\'z-dis\\': disabled} } ref=\\\"element\\\">    <div class=\\\"dropdown_hd\\\">        <a class=\\\"u-btn u-btn-primary\\\" on-click={this.toggle(!open)}>下拉菜单 <i class=\\\"u-icon u-icon-caret-down\\\"></i></a>    </div>    <div class=\\\"dropdown_bd\\\" r-hide={!open} r-animation=\\\"on: enter; class: animated fadeInY fast; on: leave; class: animated fadeOutY fast;\\\">        <ul class=\\\"u-listbox\\\">            {#list source as item}            <li on-click={this.toggle(!open)}><a href=\\\"#\\\">{item.name}</a></li>            {/list}        </ul>    </div></div>\"","/**\n * ------------------------------------------------------------\n * DropDown  下拉菜单\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\nvar SourceComponent = require('../base/sourceComponent.js');\nvar template = require('./dropDown.html');\nvar _ = require('../base/util.js');\n\n/**\n * @class DropDown\n * @extend SourceComponent\n * @param {object}                  options.data                    绑定属性\n * @param {object[]=[]}             options.data.source             数据源\n * @param {number}                  options.data.source[].id        每项的id\n * @param {string}                  options.data.source[].name      每项的内容\n * @param {boolean=false}           options.data.open               当前为展开/收起状态\n * @param {boolean=false}           options.data.disabled           是否禁用该组件\n * @param {string=''}               options.data.class              补充class\n * @param {object}                  options.service                 数据服务\n */\nvar DropDown = SourceComponent.extend({\n    name: 'dropDown',\n    template: template,\n    /**\n     * @protected\n     */\n    config: function() {\n        _.extend(this.data, {\n            // @inherited source: [],\n            open: false,\n            disabled: false\n        });\n        this.supr();\n    },\n    /**\n     * @method toggle(open) 在展开/收起状态之间切换\n     * @public\n     * @param  {boolean} open 展开/收起\n     * @return {void}\n     */\n    toggle: function(open) {\n        if(this.data.disabled)\n            return;\n        \n        this.data.open = open;\n\n        // 根据状态在DropDown.opens列表中添加/删除管理项\n        var index = DropDown.opens.indexOf(this);\n        if(open && index < 0)\n            DropDown.opens.push(this);\n        else if(!open && index >= 0)\n            DropDown.opens.splice(index, 1);\n    }\n});\n\n// 处理点击dropDown之外的地方后的收起事件。\nDropDown.opens = [];\n\n_.dom.on(document.body, 'click', function(e) {\n    DropDown.opens.forEach(function(dropDown) {\n        // 这个地方不能用stopPropagation来处理，因为展开一个dropDown的同时要收起其他dropDown\n        var element = dropDown.$refs.element;\n        var element2 = e.target;\n        while(element2) {\n            if(element == element2)\n                return;\n            element2 = element2.parentElement;\n        }\n        dropDown.toggle(false);\n        dropDown.$update();\n    });\n});\n\nmodule.exports = DropDown;","module.exports=\"<div class=\\\"u-gridview {@(class)}\\\" r-class={ {\\'z-dis\\': disabled} }>    {#list source as item}    <div class=\\\"gridview_item\\\" r-class={ {\\'z-sel\\': selected === item} }>{#if @(itemTemplate)}{#include @(itemTemplate)}{#else}{item.name}{/if}</div>    {/list}</div>\"","/**\n * ------------------------------------------------------------\n * GridView  网格视图\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\n'use strict';\n\nvar SourceComponent = require('../base/sourceComponent.js');\nvar template = require('./gridView.html');\nvar _ = require('../base/util.js');\n\n/**\n * @class GridView\n * @extend SourceComponent\n * @param {object}                  options.data                    绑定属性\n * @param {object[]=[]}             options.data.source             数据源\n * @param {number}                  options.data.source[].id        每项的id\n * @param {string}                  options.data.source[].name      每项的内容\n * @param {string=''}               options.data.class              补充class\n * @param {object}                  options.service                 数据服务\n */\nvar GridView = SourceComponent.extend({\n    name: 'gridView',\n    template: template,\n    /**\n     * @protected\n     */\n    config: function() {\n        _.extend(this.data, {\n            // @inherited source: []\n        });\n        this.supr();\n    }\n});\n\nmodule.exports = GridView;","module.exports=\"<label class=\\\"u-inputex {@(class)}\\\">    <input class=\\\"u-input\\\">    <span class=\\\"u-unit\\\">{unit}</span></label>\"","/**\n * ------------------------------------------------------------\n * InputEx   输入扩展\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\nvar Component = require('../base/component.js');\nvar template = require('./inputEx.html');\nvar _ = require('../base/util.js');\n\n/**\n * @class InputEx\n * @extend Component\n * @param {object}                  options.data                    绑定属性\n * @param {object[]=[]}             options.data.source             数据源\n * @param {number}                  options.data.source[].id        每项的id\n * @param {string}                  options.data.source[].name      每项的内容\n * @param {object=null}             options.data.selected           当前选择项\n * @param {boolean=false}           options.data.disabled           是否禁用该组件\n * @param {string=''}               options.data.class              补充class\n */\nvar InputEx = Component.extend({\n    name: 'inputEx',\n    template: template,\n    /**\n     * @protected\n     */\n    config: function() {\n        _.extend(this.data, {\n            unit: '%',\n            selected: null,\n            disabled: false,\n            multiple: false\n        });\n        this.supr();\n    },\n    /**\n     * @method select(item) 选择某一项\n     * @public\n     * @param  {object} item 选择项\n     * @return {void}\n     */\n    select: function(item) {\n        this.data.selected = item;\n        /**\n         * @event select 选择某一项时触发\n         * @property {object} selected 当前选择项\n         */\n        this.$emit('select', {\n            selected: item\n        });\n    }\n});\n\nmodule.exports = InputEx;","module.exports=\"<ul class=\\\"u-listbox {@(class)}\\\" r-class={ {\\'z-dis\\': disabled} }>    {#list source as item}    <li r-class={ {\\'z-sel\\': selected === item} } on-click={this.select(item)}>{item.name}</li>    {/list}</ul>\"","/**\n * ------------------------------------------------------------\n * ListBox   列表框\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\n'use strict';\n\nvar SourceComponent = require('../base/sourceComponent.js');\nvar template = require('./listBox.html');\nvar _ = require('../base/util.js');\n\n/**\n * @class ListBox\n * @extend SourceComponent\n * @param {object}                  options.data                    绑定属性\n * @param {object[]=[]}             options.data.source             数据源\n * @param {number}                  options.data.source[].id        每项的id\n * @param {string}                  options.data.source[].name      每项的内容\n * @param {object=null}             options.data.selected           当前选择项\n * @param {boolean=false}           options.data.disabled           是否禁用该组件\n * @param {string=''}               options.data.class              补充class\n * @param {object}                  options.service                 数据服务\n */\nvar ListBox = SourceComponent.extend({\n    name: 'listBox',\n    template: template,\n    /**\n     * @protected\n     */\n    config: function() {\n        _.extend(this.data, {\n            // @inherited source: [],\n            selected: null,\n            disabled: false\n        });\n        this.supr();\n    },\n    /**\n     * @method select(item) 选择某一项\n     * @public\n     * @param  {object} item 选择项\n     * @return {void}\n     */\n    select: function(item) {\n        if(this.data.disabled)\n            return;\n\n        this.data.selected = item;\n        /**\n         * @event select 选择某一项时触发\n         * @property {object} selected 当前选择项\n         */\n        this.$emit('select', {\n            selected: item\n        });\n    }\n});\n\nmodule.exports = ListBox;","module.exports=\"<ul class=\\\"u-listbox {@(class)}\\\" r-class={ {\\'z-dis\\': disabled} }>    {#list source as item}    <li r-class={ {\\'z-sel\\': selected === item} } on-click={this.select(item)}>{#if @(itemTemplate)}{#include @(itemTemplate)}{#else}{item.name}{/if}</li>    {/list}</ul>\"","/**\n * ------------------------------------------------------------\n * ListView  列表视图\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\n'use strict';\n\nvar ListBox = require('./listBox.js');\nvar template = require('./listView.html');\nvar _ = require('../base/util.js');\n\n/**\n * @class ListView\n * @extend ListBox\n * @param {object}                  options.data                    绑定属性\n * @param {object[]=[]}             options.data.source             数据源\n * @param {number}                  options.data.source[].id        每项的id\n * @param {string}                  options.data.source[].name      每项的内容\n * @param {object=null}             options.data.selected           当前选择项\n * @param {string=null}             options.data.itemTemplate       每一项的模板\n * @param {boolean=false}           options.data.disabled           是否禁用该组件\n * @param {string=''}               options.data.class              补充class\n * @param {object}                  options.service                 数据服务\n */\nvar ListView = ListBox.extend({\n    name: 'listView',\n    template: template,\n    config: function() {\n        _.extend(this.data, {\n            itemTemplate: null\n            // @inherited source: [],\n            // @inherited selected: null,\n            // @inherited disabled: false\n        });\n        this.supr();\n    }\n});\n\nmodule.exports = ListView;","module.exports=\"<div class=\\\"m-notify m-notify-{@(position)} {@(class)}\\\">    {#list messages as message}    <div class=\\\"notify_message notify_message-{@(message.type)}\\\" r-animation=\\'on: enter; class: animated fadeIn fast; on: leave; class: animated fadeOut fast;\\'>        <a class=\\\"notify_close\\\" on-click={this.close(message)}><i class=\\\"u-icon u-icon-close\\\"></i></a>        <div class=\\\"notify_text\\\"><i class=\\\"u-icon u-icon-{@(message.type)}-circle\\\" r-hide={@(!message.type)}></i> {@(message.text)}</div>    </div>    {/list}</div>\"","/**\n * ------------------------------------------------------------\n * Notify    通知\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\n'use strict';\n\nvar Component = require('../base/component.js');\nvar template = require('./notify.html');\nvar _ = require('../base/util.js');\n\n/**\n * @class Notify\n * @extend Component\n * @param {object}                  options.data                    监听数据\n * @param {string='topcenter'}      options.data.position           通知的位置，可选参数：`topcenter`、`topleft`、`topright`、`bottomcenter`、`bottomleft`、`bottomright`、`static`\n * @param {number=2000}             options.data.duration           每条消息的停留毫秒数，如果为0，则表示消息常驻不消失。\n * @param {string=''}               options.data.class              补充class\n */\nvar Notify = Component.extend({\n    name: 'notify',\n    template: template,\n    /**\n     * @protected\n     */\n    config: function() {\n        _.extend(this.data, {\n            messages: [],\n            position: 'topcenter',\n            duration: 2000\n        });\n        this.supr();\n    },\n    /**\n     * @protected\n     */\n    init: function() {\n        this.supr();\n        // 证明不是内嵌组件\n        if(this.$root === this)\n            this.$inject(document.body);\n    },\n    /**\n     * @method show(text[,type][,duration]) 弹出一个消息\n     * @public\n     * @param  {string=''} text 消息内容\n     * @param  {string=null} type 消息类型，可选参数：`info`、`success`、`warning`、`error`\n     * @param  {number=notify.duration} duration 该条消息的停留毫秒数，如果为0，则表示消息常驻不消失。\n     * @return {void}\n     */\n    show: function(text, type, duration) {\n        var message = {\n            text: text,\n            type: type,\n            duration: duration >= 0 ? duration : this.data.duration\n        };\n        this.data.messages.unshift(message);\n        this.$update();\n\n        if(message.duration)\n            this.$timeout(this.close.bind(this, message), message.duration);\n\n        /**\n         * @event show 弹出一个消息时触发\n         * @property {object} message 弹出的消息对象\n         */\n        this.$emit('show', {\n            message: message\n        });\n    },\n    /**\n     * @method close(message) 关闭某条消息\n     * @public\n     * @param  {object} message 需要关闭的消息对象\n     * @return {void}\n     */\n    close: function(message) {\n        var index = this.data.messages.indexOf(message);\n        this.data.messages.splice(index, 1);\n        this.$update();\n        /**\n         * @event close 关闭某条消息时触发\n         * @property {object} message 关闭了的消息对象\n         */\n        this.$emit('close', {\n            message: message\n        });\n    },\n    /**\n     * @method closeAll() 关闭所有消息\n     * @public\n     * @return {void}\n     */\n    closeAll: function() {\n        this.$update('messages', []);\n    }\n}).use('$timeout');\n\n\n/**\n * 直接初始化一个实例\n * @type {Notify}\n */\nvar notify = new Notify();\nNotify.notify = notify;\n\n/**\n * @method show(text[,type][,duration]) 弹出一个消息\n * @static\n * @param  {string=''} text 消息内容\n * @param  {string=null} type 消息类型，可选参数：`info`、`success`、`warning`、`error`\n * @param  {number=notify.duration} duration 该条消息的停留毫秒数，如果为0，则表示消息常驻不消失。\n * @return {void}\n */\nNotify.show = function() {\n    notify.show.apply(notify, arguments);\n}\n/**\n * @method close(message) 关闭某条消息\n * @static\n * @param  {object} message 需要关闭的消息对象\n * @return {void}\n */\nNotify.close = function() {\n    notify.close.apply(notify, arguments);\n}\n/**\n * @method closeAll() 关闭所有消息\n * @static\n * @return {void}\n */\nNotify.closeAll = function() {\n    notify.closeAll.apply(notify, arguments);\n}\n\nmodule.exports = Notify;","module.exports=\"<div class=\\\"u-progress u-progress-{@(size)} u-progress-{@(type)} {@(class)}\\\" r-class={ {\\'u-progress-striped\\': striped, \\'z-act\\': active} }>    <div class=\\\"progress_bar\\\" style=\\\"width: {percent}%;\\\">{text ? (text === true ? percent + \\'%\\' : text) : \\'\\'}</div></div>\"","/**\n * ------------------------------------------------------------\n * Progress  进度条\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\n'use strict';\n\nvar Component = require('../base/component.js');\nvar template = require('./progress.html');\nvar _ = require('../base/util.js');\n\n/**\n * @class Progress\n * @extend Component\n * @param {object}                  options.data                    绑定属性\n * @param {number=36}               options.data.percent            百分比\n * @param {string|boolean=true}     options.data.text               在进度条中是否显示百分比。值为`string`时显示该段文字。\n * @param {string=null}             options.data.size               进度条的尺寸\n * @param {string=null}             options.data.type               进度条的类型，改变显示颜色\n * @param {boolean=false}           options.data.striped            是否显示条纹\n * @param {boolean=false}           options.data.active             进度条是否为激活状态，当`striped`为`true`时，进度条显示动画\n * @param {string=''}               options.data.class              补充class\n */\nvar Progress = Component.extend({\n    name: 'progress',\n    template: template,\n    /**\n     * @protected\n     */\n    config: function() {\n        _.extend(this.data, {\n            percent: 36,\n            text: true,\n            size: null,\n            type: null,\n            striped: false,\n            active: false\n        });\n        this.supr();\n    }\n});\n\nmodule.exports = Progress;","module.exports=\"<div class=\\\"u-unitgroup {@(class)}\\\">    {#list source as item}    <label class=\\\"u-radioex\\\" r-class={ {\\'z-dis\\': disabled, \\'z-sel\\': item === selected, \\'u-radioex-block\\': block} } on-click={this.select(item)}><div class=\\\"radioex_box\\\"><i class=\\\"u-icon u-icon-radio\\\"></i></div> {item.name}</label>    {/list}</div>\"","/**\n * ------------------------------------------------------------\n * RadioExGroup 输入扩展\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\n'use strict';\n\nvar RadioGroup = require('./radioGroup.js');\nvar template = require('./radioExGroup.html');\nvar _ = require('../base/util.js');\n\n/**\n * @class RadioExGroup\n * @extend RadioGroup\n * @param {object}                  options.data                    绑定属性\n * @param {object[]=[]}             options.data.source             数据源\n * @param {number}                  options.data.source[].id        每项的id\n * @param {string}                  options.data.source[].name      每项的内容\n * @param {object=null}             options.data.seleced            当前选择项\n * @param {boolean=false}           options.data.block              多行显示\n * @param {boolean=false}           options.data.disabled           是否禁用该组件\n * @param {string=''}               options.data.class              补充class\n */\nvar RadioExGroup = RadioGroup.extend({\n    name: 'radioExGroup',\n    template: template\n});\n\nmodule.exports = RadioExGroup;","module.exports=\"<div class=\\\"u-unitgroup {@(class)}\\\">    {#list source as item}    <label class=\\\"u-radioex\\\" r-class={ {\\'z-dis\\': disabled, \\'u-radioex-block\\': block} } on-click={this.select(item)}><input type=\\\"radio\\\" class=\\\"u-radio\\\" name={_radioGroupId} disabled={disabled}> {item.name}</label>    {/list}</div>\"","/**\n * ------------------------------------------------------------\n * RadioGroup 单选组\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\n'use strict';\n\nvar SourceComponent = require('../base/sourceComponent.js');\nvar template = require('./radioGroup.html');\nvar _ = require('../base/util.js');\n\n/**\n * @class RadioGroup\n * @extend SourceComponent\n * @param {object}                  options.data                    绑定属性\n * @param {object[]=[]}             options.data.source             数据源\n * @param {number}                  options.data.source[].id        每项的id\n * @param {string}                  options.data.source[].name      每项的内容\n * @param {object=null}             options.data.seleced            当前选择项\n * @param {boolean=false}           options.data.block              多行显示\n * @param {boolean=false}           options.data.disabled           是否禁用该组件\n * @param {string=''}               options.data.class              补充class\n * @param {object}                  options.service                 数据服务\n */\nvar RadioGroup = SourceComponent.extend({\n    name: 'radioGroup',\n    template: template,\n    /**\n     * @protected\n     */\n    config: function() {\n        _.extend(this.data, {\n            // @inherited source: [],\n            selected: null,\n            _radioGroupId: new Date()\n        });\n        this.supr();\n    },\n    /**\n     * @method select(item) 选择某一项\n     * @public\n     * @param  {object} item 选择项\n     * @return {void}\n     */\n    select: function(item) {\n        if(this.data.disabled)\n            return;\n\n        this.data.selected = item;\n        /**\n         * @event select 选择某一项时触发\n         * @property {object} selected 当前选择项\n         */\n        this.$emit('select', {\n            selected: item\n        });\n    }\n});\n\nmodule.exports = RadioGroup;","module.exports=\"<div class=\\\"u-dropdown u-dropdown-selectex {@(class)}\\\" r-class={ {\\'z-dis\\': disabled} } ref=\\\"element\\\">    <div class=\\\"dropdown_hd\\\" on-click={this.toggle(!open)}>        <span>{selected ? selected.name : placeholder}</span>        <i class=\\\"u-icon u-icon-caret-down\\\"></i>    </div>    <div class=\\\"dropdown_bd\\\" r-hide={!open} r-animation=\\\"on: enter; class: animated fadeInY fast; on: leave; class: animated fadeOutY fast;\\\">        <ul class=\\\"u-listbox\\\">            {#if placeholder}<li r-class={ {\\'z-sel\\': selected === null} } on-click={this.select(null)}>{placeholder}</li>{/if}            {#list source as item}            <li r-class={ {\\'z-sel\\': selected === item} } on-click={this.select(item)}>{item.name}</li>            {/list}        </ul>    </div></div>\"","/**\n * ------------------------------------------------------------\n * SelectEx  选择扩展\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\n'use strict';\n\nvar DropDown = require('./dropDown.js');\nvar template = require('./selectEx.html');\nvar _ = require('../base/util.js');\n\n/**\n * @class SelectEx\n * @extend DropDown\n * @param {object}                  options.data                    绑定属性\n * @param {object[]=[]}             options.data.source             数据源\n * @param {number}                  options.data.source[].id        每项的id\n * @param {string}                  options.data.source[].name      每项的内容\n * @param {object=null}             options.data.selected           当前选择项\n * @param {string='请选择'}         options.data.placeholder        默认项的文字\n * @param {boolean=false}           options.data.disabled           是否禁用该组件\n * @param {string=''}               options.data.class              补充class\n * @param {object}                  options.service                 数据服务\n */\nvar SelectEx = DropDown.extend({\n    name: 'selectEx',\n    template: template,\n    /**\n     * @protected\n     */\n    config: function() {\n        _.extend(this.data, {\n            // @inherited source: [],\n            // @inherited open: false\n            selected: null,\n            placeholder: '请选择',\n            // @inherited disabled: false,\n        });\n        this.supr();\n    },\n    /**\n     * @method select(item) 选择某一项\n     * @public\n     * @param  {object} item 选择项\n     * @return {void}\n     */\n    select: function(item) {\n        this.$update('selected', item);\n        //this.data.selected = item;\n        /**\n         * @event select 选择某一项时触发\n         * @property {object} selected 当前选择项\n         */\n        this.$emit('select', {\n            selected: item\n        });\n        this.toggle(false);\n    },\n});\n\nmodule.exports = SelectEx;","module.exports=\"<div class=\\\"u-dropdown u-dropdown-suggest {@(class)}\\\" r-class={ {\\'z-dis\\': disabled} } ref=\\\"element\\\">    <div class=\\\"dropdown_hd\\\">        <input class=\\\"u-input u-input-full\\\" placeholder={placeholder} r-model={value} on-focus={this.input($event)} on-keyup={this.input($event)} on-blur={this.uninput($event)} ref=\\\"input\\\" disabled={disabled} {#if readonly}readonly=\\\"readonly\\\"{/if}>    </div>    <div class=\\\"dropdown_bd\\\" r-hide={!open} r-animation=\\\"on: enter; class: animated fadeInY fast; on: leave; class: animated fadeOutY fast;\\\">        <ul class=\\\"u-listbox\\\">            {#list source as item}            {#if this.filter(item)}                <li on-click={this.select(item)}>{item.name}</li>            {/if}            {/list}        </ul>    </div></div>\"","/**\n * ------------------------------------------------------------\n * Suggest   自动提示\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\n'use strict';\n\nvar DropDown = require('./dropDown.js');\nvar template = require('./suggest.html');\nvar _ = require('../base/util.js');\nvar ListBox = require('./listBox.js');\n\n/**\n * @class Suggest\n * @extend DropDown\n * @param {object}                  options.data                    绑定属性\n * @param {object[]=[]}             options.data.source             数据源\n * @param {number}                  options.data.source[].id        每项的id\n * @param {string}                  options.data.source[].name      每项的内容\n * @param {object=null}             options.data.selected           当前选择项\n * @param {string=''}               options.data.value              文本框中的值\n * @param {string='请输入'}         options.data.placeholder        文本框默认文字\n * @param {number=0}                options.data.minLength          最小提示长度。当输入长度>=该值后开始提示\n * @param {string='all'}            options.data.matchType          匹配方式，`all`表示匹配全局，`start`表示只匹配开头，`end`表示只匹配结尾\n * @param {boolean=false}           options.data.strict             是否为严格模式。当为严格模式时，`value`属性必须在source中选择，否则为空。\n * @param {boolean=false}           options.data.readonly           文本框是否只读\n * @param {boolean=false}           options.data.disabled           是否禁用该组件\n * @param {string=''}               options.data.class              补充class\n * @param {object}                  options.service                 数据服务\n */\nvar Suggest = DropDown.extend({\n    name: 'suggest',\n    template: template,\n    /**\n     * @protected\n     */\n    config: function() {\n        _.extend(this.data, {\n            // @inherited source: [],\n            // @inherited open: false,\n            selected: null,\n            value: '',\n            placeholder: '请输入',\n            minLength: 0,\n            delay: 300,\n            matchType: 'all',\n            strict: false,\n            readonly: false,\n            // @inherited disabled: false,\n        });\n        this.supr();\n    },\n    /**\n     * @method select(item) 选择某一项\n     * @public\n     * @param  {object} item 选择项\n     * @return {void}\n     */\n    select: function(item) {\n        this.$update('selected', item);\n        this.data.value = item.name;\n        //this.data.selected = item;\n        /**\n         * @event select 选择某一项时触发\n         * @property {object} selected 当前选择项\n         */\n        this.$emit('select', {\n            selected: item\n        });\n        this.toggle(false);\n    },\n    /**\n     * @method toggle(open)  在展开状态和收起状态之间切换\n     * @public\n     * @param  {boolean} open 展开还是收起\n     * @return {void}\n     */\n    toggle: function(open, _isInput) {\n        if(this.data.disabled)\n            return;\n\n        this.data.open = open;\n\n        /**\n         * @event toggle 展开或收起状态改变时触发\n         * @property {boolean} open 展开还是收起\n         */\n        this.$emit('toggle', {\n            open: open\n        });\n\n        var index = DropDown.opens.indexOf(this);\n        if(open && index < 0)\n            DropDown.opens.push(this);\n        else if(!open && index >= 0) {\n            DropDown.opens.splice(index, 1);\n\n            if(!_isInput && this.data.strict)\n               this.data.value = this.data.selected ? this.data.selected.name : '';\n        }\n    },\n    // 输入时\n    input: function($event) {\n        var value = this.data.value;\n\n        if(value.length >= this.data.minLength)\n            this.toggle(true);\n        else\n            this.toggle(false, true);\n    },\n    uninput: function($event) {\n\n    },\n    filter: function(item) {\n        var value = this.data.value;\n\n        if(!value && this.data.minLength)\n            return false;\n\n        if(this.data.matchType == 'all')\n            return item.name.indexOf(value) >= 0;\n        else if(this.data.matchType == 'start')\n            return item.name.slice(0, value.length) == value;\n        else if(this.data.matchType == 'end')\n            return item.name.slice(-value.length) == value;\n    }\n});\n\nmodule.exports = Suggest;","module.exports=\"<table class=\\\"m-table m-tableview {@(class)}\\\" r-class={ {\\'m-table-striped\\': striped, \\'m-table-hover\\': hover} }>    <thead>        <tr>            {#list fields as field}            <th r-class={ {\\'tableview_sortable\\': field.sortable} } on-click={this.sort(field)}>                {field.name || field.key}                {#if field.sortable}                    <i class=\\\"u-icon {order.by === field.key ? (order.desc ? \\'u-icon-sort-desc\\' : \\'u-icon-sort-asc\\') : \\'u-icon-sort\\'}\\\"></i>                {/if}            </th>            {/list}        </tr>    </thead>    <tbody>        {#list source as item}        <tr>            {#list fields as field}            <td>{item[field.key]}</td>            {/list}        </tr>        {/list}    </tbody></table>\"","/**\n * ------------------------------------------------------------\n * TableView 表格视图\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\n'use strict';\n\nvar SourceComponent = require('../base/sourceComponent.js');\nvar template = require('./tableView.html');\nvar _ = require('../base/util.js');\n\n/**\n * @class TableView\n * @extend SourceComponent\n * @param {object}                  options.data                    绑定属性\n * @param {object[]=[]}             options.data.source             数据源\n * @param {number}                  options.data.source[].id        每项的id\n * @param {string}                  options.data.source[].name      每项的内容\n * @param {object[]=[]}             options.data.field              字段集\n * @param {string}                  options.data.field[].key        每个字段的key\n * @param {string}                  options.data.field[].name       每个字段在表头显示的文字，如果没有则显示key\n * @param {boolean=false}           options.data.striped            是否显示条纹\n * @param {boolean=false}           options.data.hover              是否每行在hover时显示样式\n * @param {string=''}               options.data.class              补充class\n * @param {object}                  options.service                 数据服务\n */\nvar TableView = SourceComponent.extend({\n    name: 'tableView',\n    template: template,\n    /**\n     * @protected\n     */\n    config: function() {\n        _.extend(this.data, {\n            // @inherited source: [],\n            fields: [],\n            striped: false,\n            hover: false,\n            // TODO: 暂不考虑多字段排序\n            order: {\n                by: null,\n                desc: false\n            }\n        });\n        this.supr();\n    },\n    /**\n     * @method sort(field) 按照某个字段排序\n     * @public\n     * @param  {object} field 排序字段\n     * @return {void}\n     */\n    sort: function(field) {\n        if(!field.sortable)\n            return;\n\n        var order = this.data.order;\n\n        if(order.by === field.key)\n            order.desc = !order.desc;\n        else {\n            order.by = field.key;\n            order.desc = false;\n        }\n\n        if(this.service)\n            this.$updateSource();\n        else {\n            this.data.source.sort(function(a, b) {\n                if(order.desc)\n                    return a[order.by] < b[order.by];\n                else\n                    return a[order.by] > b[order.by];\n            });\n        }\n        /**\n         * @event sort 按照某个字段排序时触发\n         * @property {object} field 排序字段\n         */\n        this.$emit('sort', {\n            field: field\n        });\n    }\n});\n\nmodule.exports = TableView;","/**\n * ------------------------------------------------------------\n * TimePicker 日期选择\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\nvar Suggest = require('./suggest.js');\nvar _ = require('../base/util.js');\n\n/**\n * @class TimePicker\n * @extend Suggest\n * @param {object}                  options.data                    绑定属性\n * @param {string=''}               options.data.value              文本框中的值\n * @param {string='请输入'}         options.data.placeholder        文本框默认文字\n * @param {boolean=false}           options.data.readonly           文本框是否只读\n * @param {boolean=false}           options.data.disabled           是否禁用该组件\n * @param {string=''}               options.data.class              补充class\n */\nvar TimePicker = Suggest.extend({\n    name: 'timePicker',\n    /**\n     * @protected\n     */\n    config: function() {\n        var source = [];\n        for(var i = 0; i < 10; i++) {\n            source.push({name: '0' + i + ':00'});\n            source.push({name: '0' + i + ':30'});\n        }\n        for(var i = 10; i < 24; i++) {\n            source.push({name: i + ':00'});\n            source.push({name: i + ':30'});\n        }\n\n        _.extend(this.data, {\n            source: source,\n            // @inherited open: false,\n            // @inherited selected: null,\n            // @inherited value: '',\n            // @inherited placeholder: '请输入',\n            // @inherited minLength: 0,\n            // @inherited delay: 300,\n            matchType: 'start'\n            // @inherited strict: false,\n            // @inherited readonly: false,\n            // @inherited disabled: false,\n        });\n        this.supr();\n    },\n    filter: function(item) {\n        return true;\n    }\n});\n\nmodule.exports = TimePicker;","module.exports=\"<div class=\\\"u-dropdown u-dropdown-selectex {@(class)}\\\" r-class={ {\\'z-dis\\': disabled} } ref=\\\"element\\\">    <div class=\\\"dropdown_hd\\\" on-click={this.toggle(!open)}>        <i class=\\\"u-icon u-icon-caret-down\\\"></i>        <span>{selected ? selected.name : placeholder}</span>    </div>    <div class=\\\"dropdown_bd\\\" r-hide={!open} r-animation=\\\"on: enter; class: animated fadeInY fast; on: leave; class: animated fadeOutY fast;\\\">        <treeView source={source} on-select={this.select($event.selected)} />    </div></div>\"","/**\n * ------------------------------------------------------------\n * TreeSelect 树型选择\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\n'use strict';\n\nvar SelectEx = require('./selectEx.js');\nvar template = require('./treeSelect.html');\nvar _ = require('../base/util.js');\nvar Treeview = require('./treeView.js');\n\n/**\n * @class TreeSelect\n * @extend SelectEx\n * @param {object}                  options.data                    绑定属性\n * @param {object[]=[]}             options.data.source             数据源\n * @param {number}                  options.data.source[].id        每项的id\n * @param {string}                  options.data.source[].name      每项的内容\n * @param {object=null}             options.data.selected           当前选择项\n * @param {string='请选择'}         options.data.placeholder        默认项的文字\n * @param {boolean=false}           options.data.disabled           是否禁用该组件\n * @param {string=''}               options.data.class              补充class\n * @param {object}                  options.service                 数据服务\n */\nvar TreeSelect = SelectEx.extend({\n    name: 'treeSelect',\n    template: template,\n    config: function() {\n        _.extend(this.data, {\n            // @inherited source: [],\n            // @inherited open: false,\n            // @inherited selected: null,\n            // @inherited placeholder: '请选择',\n            // @inherited disabled: false,\n        });\n        this.supr();\n    }\n});\n\nmodule.exports = TreeSelect;","module.exports=\"<div class=\\\"u-treeview {@(class)}\\\" r-class={ {\\'z-dis\\': disabled} }>    <treeViewList source={source} visible={true} /></div>\"","/**\n * ------------------------------------------------------------\n * TreeView  树型视图\n * @author   sensen(rainforest92@126.com)\n * ------------------------------------------------------------\n */\n\n'use strict';\n\nvar SourceComponent = require('../base/sourceComponent.js');\nvar template = require('./treeView.html');\nvar hierarchicalTemplate = require('./treeViewList.html');\nvar _ = require('../base/util.js');\n\n/**\n * @class TreeView\n * @extend SourceComponent\n * @param {object}                  options.data                    绑定属性\n * @param {object[]=[]}             options.data.source             数据源\n * @param {number}                  options.data.source[].id        每项的id\n * @param {string}                  options.data.source[].name      每项的内容\n * @param {object=null}             options.data.selected           当前选择项\n * @param {boolean=false}           options.data.disabled           是否禁用该组件\n * @param {boolean=false}           options.data.hierarchical       是否分级动态加载，需要service\n * @param {string=''}               options.data.class              补充class\n * @param {object}                  options.service                 数据服务\n */\nvar TreeView = SourceComponent.extend({\n    name: 'treeView',\n    template: template,\n    /**\n     * @protected\n     */\n    config: function() {\n        _.extend(this.data, {\n            // @inherited source: [],\n            selected: null,\n            disabled: false,\n            multiple: false,\n            hierarchical: false\n        });\n        this.supr();\n\n        this.treeroot = this;\n    },\n    /**\n     * @method select(item) 选择某一项\n     * @public\n     * @param  {object} item 选择项\n     * @return {void}\n     */\n    select: function(item) {\n        if(this.data.disabled)\n            return;\n\n        this.data.selected = item;\n        /**\n         * @event select 选择某一项时触发\n         * @property {object} selected 当前选择项\n         */\n        this.$emit('select', {\n            selected: item\n        });\n    }\n});\n\nvar TreeViewList = SourceComponent.extend({\n    name: 'treeViewList',\n    template: hierarchicalTemplate,\n    /**\n     * @protected\n     */\n    config: function() {\n        _.extend(this.data, {\n            // @inherited source: [],\n            itemTemplate: null,\n            visible: false\n        });\n        this.supr();\n\n        this.treeroot = this.$parent.treeroot;\n        this.service = this.treeroot.service;\n        this.data.itemTemplate = this.treeroot.data.itemTemplate;\n        this.data.hierarchical = this.treeroot.data.hierarchical;\n\n        this.$watch('visible', function(newValue) {\n            if(!this.data.hierarchical)\n                return;\n\n            if(!newValue || this.$parent.name !== 'treeViewList')\n                return;\n\n            this.$updateSource(function() {\n                this.data.hierarchical = false;\n            });\n        });\n    },\n    /**\n     * @override\n     */\n    getParams: function() {\n        if(this.data.parent)\n            return _.extend({parentId: this.data.parent.id}, this.treeroot.getParams());\n    },\n    $updateSource: function() {\n        this.service.getList(this.getParams(), function(data) {\n            if(data.code != 200 && !data.success)\n                return alert(data.result);\n\n            // 给每个节点item添加parent\n            data.result.forEach(function(item) {\n                item.parent = this.data.parent;\n            }.bind(this));\n\n            this.$update('source', data.result);\n\n            this.$emit('updateSource', {\n                result: data.result\n            });\n        }.bind(this));\n        return this;\n    },\n    /**\n     * @method select(item) 选择某一项\n     * @private\n     * @param  {object} item 选择项\n     * @return {void}\n     */\n    select: function(item) {\n        if(this.treeroot.data.disabled)\n            return;\n\n        this.treeroot.select(item);\n    },\n    /**\n     * @method toggle(item) 展开或收起某一项\n     * @private\n     * @param  {object} item 展开收起项\n     * @return {void}\n     */\n    toggle: function(item) {\n        if(this.treeroot.data.disabled)\n            return;\n\n        item.open = !item.open;\n\n        /**\n         * @event toggle 展开或收起某一项时触发\n         * @property {object} item 展开收起项\n         * @property {boolean} open 展开还是收起\n         */\n        this.treeroot.$emit('toggle', {\n            item: item,\n            open: item.open\n        });\n    }\n});\n\nmodule.exports = TreeView;","module.exports=\"<ul class=\\\"treeview_list\\\" r-class={ {\\'z-dis\\': disabled} } r-hide={!visible}>    {#list source as item}    <li>        <div class=\\\"treeview_item\\\">            {#if item.childrenCount || (item.children && item.children.length)}            <i class=\\\"u-icon\\\" r-class={ {\\'u-icon-caret-right\\': !item.open, \\'u-icon-caret-down\\': item.open}} on-click={this.toggle(item)}></i>            {/if}            <div class=\\\"treeview_itemname\\\" r-class={ {\\'z-sel\\': this.treeroot.data.selected === item} } on-click={this.select(item)}>{#if @(itemTemplate)}{#include @(itemTemplate)}{#else}{item.name}{/if}</div>        </div>        {#if item.childrenCount || (item.children && item.children.length)}<treeViewList source={item.children} visible={item.open} parent={item} />{/if}    </li>    {/list}</ul>\""]}