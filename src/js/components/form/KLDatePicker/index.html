<div class="kl-datepicker kl-datepicker--{size} {class}" r-width="{width}">
  <div class="kl-dropdown" is-dis={disabled} r-hide={!visible} ref="element">
    <div class="kl-dropdown__hd">
      {#if showTime}
      <label class="kl-input">
        <input class="kl-input__inner kl-input__inner--{state}" placeholder={placeholder} value={date | format: 'yyyy-MM-dd HH:mm:ss'} ref="input"
        autofocus={autofocus} readonly={readonly} disabled={disabled} on-focus={this.toggle(true)} on-change={this._onInput($event)} >
      </label>
      {#else}
      <label class="kl-input">
        <input class="kl-input__inner kl-input__inner--{state}" placeholder={placeholder} value={date | format: 'yyyy-MM-dd'} ref="input"
        autofocus={autofocus} readonly={readonly} disabled={disabled} on-focus={this.toggle(true)} on-change={this._onInput($event)} >
      </label>
      {/if}
    </div>
    <div class="kl-dropdown__bd" r-hide={!open}>
      <calendar lang={lang} minDate={minDate} maxDate={maxDate} date={_date} on-select={this.select($event.date, _time)}>
        {#if showTime}
        <time-picker size="sm" time={_time} on-change={this._onDateTimeChange(_date, _time)}
                     disabledHours={disabledHours}
                     disabledMinutes={disabledMinutes}
                     disabledSeconds={disabledSeconds}
        />
        <div class="kl-dropdown__ft">
          <kl-button size="sm" class="kl-datepicker__confirmBtn" on-click={this.onConfirm()} title={this.$trans('CONFIRM')} />
        </div>
        {/if}
      </calendar>
    </div>
  </div>
  {#if tip && !hideTip}
    <span class="kl-tip kl-tip--{state} animated" r-animation="on:enter;class:fadeInY;on:leave;class:fadeOutY;">
      <kl-icon type={state} />
      <span class="kl-tip__msg">{tip}</span>
    </span>
  {/if}
</div>
