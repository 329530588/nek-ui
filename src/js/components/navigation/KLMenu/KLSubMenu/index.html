{#if url || route}
<a class="kl-sub-menu {class}" r-class={ {'is-highlight': active} } r-route={url+route}>
  <div class="kl-sub-menu-head">
    {#if iconClass}
    <span class="kl-sub-menu-head__icon {iconClass}"></span>
    {/if}
    <span class="kl-sub-menu-head__title">
      {#if title}
        {title}
      {#elseif titleTemplate}
        {#inc titleTemplate}
      {/if}
    </span>
  </div>
</a>
{#else}
<li class="kl-sub-menu {class}" r-class={ {'is-highlight': (!active && rootMenu.currentSubMenu === this)} } on-click={this.toggle($event)}>
  <div class="kl-sub-menu-head">
    {#if iconClass}
    <span class="kl-sub-menu-head__icon {iconClass}"></span>
    {/if}
    <span class="kl-sub-menu-head__title">
      {#if title}
        {title}
      {#elseif titleTemplate}
        {#inc titleTemplate}
      {/if}
    </span>
    {#if this.$body}
      <kl-icon type="arrow-down" class="kl-sub-menu-head__arrow {active ? 'is-open' : ''}" />
    {/if}
  </div>
  {#if active}
  <div class="kl-menu-item-wrap" r-animation="on:enter;collapse:on;on:leave;collapse:off;">
    {#inc this.$body}
  </div>
  {/if}
</li>
{/if}
